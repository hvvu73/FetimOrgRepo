{"programModules":{"MMS480":{"program":"MMS480","triggers":{"RetrieveMediaKeyCheck":{"name":"RetrieveMediaKeyCheck","method":"retrieveMediaKeys","advice":"POST","active":true,"modified":1673855522916,"modifiedBy":"ARTWRI","sourceUuid":"932a1ad9-9dfd-4c50-a69d-d520b1c74b1c","programName":"MMS480","utilities":[],"type":"METHOD","priority":500}},"transactions":{},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"932a1ad9-9dfd-4c50-a69d-d520b1c74b1c":{"uuid":"932a1ad9-9dfd-4c50-a69d-d520b1c74b1c","updated":1665576838554,"updatedBy":"ARTWRI","created":1673855512169,"createdBy":"ARTWRI","apiVersion":"0.5","beVersion":"16.0.0.20221110165802","language":"GROOVY","codeHash":"8BD1ACFC132AF73521180E411FA8EB7BD46D044AF5B67927651413787A1BB3A3","code":"LyoqDQogKiAgQnVzaW5lc3MgRW5naW5lIEV4dGVuc2lvbg0KICovDQogLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCiBFeHRlbnNpb24gTmFtZTogRVhUNDgwDQogVHlwZSA6IEV4dGVuZE0zVHJpZ2dlcg0KIFNjcmlwdCBBdXRob3I6IEFydW4gVGl3YXJpDQogRGF0ZTogMjAyMi0wNS0yNg0KICANCiBEZXNjcmlwdGlvbjoNCiAgICAgICBzZXQgdGhlIGNvbnNpZ25lZSBiYXNlZCBvbiBvcmRlciBkaXZpc2lvbg0KICAgICAgICAgIA0KIFJldmlzaW9uIEhpc3Rvcnk6DQogTmFtZSAgICAgICAgICAgICAgICAgICAgRGF0ZSAgICAgICAgICAgICBWZXJzaW9uICAgICAgICAgIERlc2NyaXB0aW9uIG9mIENoYW5nZXMNCiBBcnVuIFRpd2FyaSAgICAgICAgICAgICAyMDIyLTA1LTI2ICAgICAgICAgICAgICAgICAgICAgMS4wICAgICAgICAgICAgICBJbml0aWFsIFZlcnNpb24NCiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovDQpwdWJsaWMgY2xhc3MgUmV0cmlldmVNZWRpYUtleUNoZWNrIGV4dGVuZHMgRXh0ZW5kTTNUcmlnZ2VyIHsNCiAgcHJpdmF0ZSBmaW5hbCBFeHRlbnNpb25BUEkgZXh0ZW5zaW9uDQogIHByaXZhdGUgZmluYWwgTWV0aG9kQVBJIG1ldGhvZA0KICBwcml2YXRlIGZpbmFsIERhdGFiYXNlQVBJIGRhdGFiYXNlDQogIHByaXZhdGUgZmluYWwgUHJvZ3JhbUFQSSBwcm9ncmFtDQogIHByaXZhdGUgZmluYWwgTUlDYWxsZXJBUEkgbWlDYWxsZXINCiAgcHJpdmF0ZSBTdHJpbmcgSU5SQw0KICBwcml2YXRlIFN0cmluZyBESVZJDQogIHByaXZhdGUgYm9vbGVhbiBDUlM5NDlfQ0hFQ0sNCg0KICBwdWJsaWMgUmV0cmlldmVNZWRpYUtleUNoZWNrKEV4dGVuc2lvbkFQSSBleHRlbnNpb24sTWV0aG9kQVBJIG1ldGhvZCxEYXRhYmFzZUFQSSBkYXRhYmFzZSxQcm9ncmFtQVBJIHByb2dyYW0sTUlDYWxsZXJBUEkgbWlDYWxsZXIpIHsNCiAgICB0aGlzLmV4dGVuc2lvbiA9IGV4dGVuc2lvbg0KICAgIHRoaXMubWV0aG9kPW1ldGhvZA0KICAgIHRoaXMuZGF0YWJhc2UgPSBkYXRhYmFzZQ0KICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW0NCiAgICB0aGlzLm1pQ2FsbGVyID0gbWlDYWxsZXINCg0KICB9DQoNCiAgcHVibGljIHZvaWQgbWFpbigpIHsNCiAgICBpbnQgcmV0cnlJbmRleD0oaW50KW1ldGhvZC5nZXRBcmd1bWVudCgwKQ0KICAgIGxvbmcgRExJWCA9IChMb25nKSBtZXRob2QuZ2V0QXJndW1lbnQoMSkNCiAgICBNZWRpYSBtZWRpYQ0KICAgIENSUzk0OV9DSEVDSyA9IGZhbHNlDQoNCiAgICBtZWRpYSA9IHJldHJpZXZlTWVkaWFLZXlzKHJldHJ5SW5kZXgsRExJWCkNCiAgICBpZihDUlM5NDlfQ0hFQ0spDQogICAgICBtZXRob2Quc2V0UmV0dXJuVmFsdWUobWVkaWEpDQogIH0NCiAgDQovL1JldHJpZXZlIGFuZCBzZXQgQ09OQSBhcyBtZWRpYSBiYXNlZCBvbiBDUlM5NDkgZWxzZSBJbnZvaWNlIHJlY2VpcHQNCiAgcHVibGljIE1lZGlhIHJldHJpZXZlTWVkaWFLZXlzKGludCByZXRyeUluZGV4LCBsb25nIERMSVgpIHsNCiAgICBpbnQgQ09OTyA9IChJbnRlZ2VyKXByb2dyYW0uZ2V0TERBWkQoKS5DT05PDQogICAgYm9vbGVhbiBGbGFnID0gdHJ1ZQ0KICAgIFN0cmluZyBDT0FGID0gIiINCiAgICBTdHJpbmcgQ09OQSA9ICIiDQogICAgU3RyaW5nIFdITE8gPSAiIg0KDQogICAgLy9NSERJU0gNCiAgICBEQkFjdGlvbiBNSERJU0hfcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiTUhESVNIIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJPUUNPQUYiLCJPUUNPTkEiLCJPUVdITE8iKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIE1IRElTSF9jb250YWluZXIgPSBNSERJU0hfcXVlcnkuZ2V0Q29udGFpbmVyKCk7DQogICAgTUhESVNIX2NvbnRhaW5lci5zZXQoIk9RQ09OTyIsIENPTk8pDQogICAgTUhESVNIX2NvbnRhaW5lci5zZXQoIk9RRExJWCIsIERMSVgpDQogICAgTUhESVNIX2NvbnRhaW5lci5zZXQoIk9RSU5PVSIsIDEpOw0KDQogICAgQ2xvc3VyZTw/PiBwcm9jZXNzQ09BRlJlY29yZCA9IHsgREJDb250YWluZXIgcmVjb3JkX0NPQUYgLT4NCiAgICAgIENPQUYgPSByZWNvcmRfQ09BRi5nZXRTdHJpbmcoIk9RQ09BRiIpLnRyaW0oKQ0KICAgICAgQ09OQSA9IHJlY29yZF9DT0FGLmdldFN0cmluZygiT1FDT05BIikudHJpbSgpDQogICAgICBXSExPID0gcmVjb3JkX0NPQUYuZ2V0U3RyaW5nKCJPUVdITE8iKS50cmltKCkNCiAgICB9DQogICAgTUhESVNIX3F1ZXJ5LnJlYWRBbGwoTUhESVNIX2NvbnRhaW5lciwzLCBwcm9jZXNzQ09BRlJlY29yZCkNCg0KDQogICAgLy9zZWxlY3QgTUhESVNMDQogICAgREJBY3Rpb24gTUhESVNMX3F1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIk1IRElTTCIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiVVJSSUROIikuYnVpbGQoKQ0KICAgIERCQ29udGFpbmVyIE1IRElTTF9jb250YWluZXIgPSBNSERJU0xfcXVlcnkuZ2V0Q29udGFpbmVyKCkNCiAgICBNSERJU0xfY29udGFpbmVyLnNldCgiVVJDT05PIiwgQ09OTykNCiAgICBNSERJU0xfY29udGFpbmVyLnNldCgiVVJETElYIiwgRExJWCkNCiAgICBNSERJU0xfY29udGFpbmVyLnNldCgiVVJST1JDIiwgMykNCiAgICBDbG9zdXJlPD8+IHByb2Nlc3NETElYUmVjb3JkID0geyBEQkNvbnRhaW5lciByZWNvcmRfRExJWCAtPg0KICAgICAgU3RyaW5nIE9STk8gPSByZWNvcmRfRExJWC5nZXRTdHJpbmcoIlVSUklETiIpLnRyaW0oKTsNCiAgICAgIGlmKEZsYWcpIHsNCiAgICAgICAgZGVmIHBhcmFtcyA9IFsgIk9STk8iOiIke09STk99Ii50b1N0cmluZygpIF0NCg0KICAgICAgICBkZWYgY2FsbGJhY2sgPSB7DQogICAgICAgICAgTWFwPFN0cmluZywgU3RyaW5nPiByZXNwb25zZSAtPg0KDQogICAgICAgICAgaWYocmVzcG9uc2UuSU5SQyAhPSBudWxsKXsNCiAgICAgICAgICAgIElOUkMgPSByZXNwb25zZS5JTlJDDQogICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgbWlDYWxsZXIuY2FsbCgiT0lTMTAwTUkiLCJHZXRIZWFkIiwgcGFyYW1zLCBjYWxsYmFjaykNCiAgICAgICAgRmxhZyA9IGZhbHNlDQogICAgICB9DQogICAgfTsNCiAgICBNSERJU0xfcXVlcnkucmVhZEFsbChNSERJU0xfY29udGFpbmVyLDMsIHByb2Nlc3NETElYUmVjb3JkKQ0KDQogICAgLy9HZXQgRElWSSBmcm9tIFdITE8NCiAgICBkZWYgcGFyYW1zX1dITE8gPSBbICJXSExPIjoiJHtXSExPfSIudG9TdHJpbmcoKSBdDQoNCiAgICBkZWYgY2FsbGJhY2tfV0hMTyA9IHsNCiAgICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gcmVzcG9uc2UgLT4NCg0KICAgICAgaWYocmVzcG9uc2UuRElWSSAhPSBudWxsKXsNCiAgICAgICAgRElWSSA9IHJlc3BvbnNlLkRJVkkNCiAgICAgIH0NCiAgICB9DQoNCiAgICBtaUNhbGxlci5jYWxsKCJNTVMwMDVNSSIsIkdldFdhcmVob3VzZSIsIHBhcmFtc19XSExPLCBjYWxsYmFja19XSExPKQ0KDQoNCiAgICBkZWYgcGFyYW1zID0gWyAiRElWSSI6IiR7RElWSX0iLnRvU3RyaW5nKCksIkRPTlIiOiI5MDAiLCJET1ZBIjoiMDAiLCJQUkYxIjoiJHtDT05BfSIudG9TdHJpbmcoKSwiTUVEQyI6Ik1CTSIsIlNFUU4iOiIxIl0NCg0KICAgIGRlZiBjYWxsYmFjayA9IHsNCiAgICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gcmVzcG9uc2UgLT4NCg0KICAgICAgaWYocmVzcG9uc2UuU0lJRCAhPSBudWxsKXsNCiAgICAgICAgQ1JTOTQ5X0NIRUNLID0gdHJ1ZQ0KICAgICAgfQ0KICAgIH0NCg0KICAgIG1pQ2FsbGVyLmNhbGwoIkNSUzk0OU1JIiwiR2V0UGFydG5lck1lZGlhIiwgcGFyYW1zLCBjYWxsYmFjaykNCg0KICAgIGlmKCFDUlM5NDlfQ0hFQ0spIHsNCiAgICAgIGRlZiBwYXJhbXMxID0gWyAiRElWSSI6IiR7RElWSX0iLnRvU3RyaW5nKCksIkRPTlIiOiI5MDAiLCJET1ZBIjoiMDAiLCJQUkYxIjoiJHtJTlJDfSIudG9TdHJpbmcoKSwiTUVEQyI6Ik1CTSIsIlNFUU4iOiIxIl0NCg0KICAgICAgZGVmIGNhbGxiYWNrMSA9IHsNCiAgICAgICAgTWFwPFN0cmluZywgU3RyaW5nPiByZXNwb25zZTEgLT4NCg0KICAgICAgICBpZihyZXNwb25zZTEuU0lJRCAhPSBudWxsKXsNCiAgICAgICAgICBDUlM5NDlfQ0hFQ0sgPSB0cnVlDQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgbWlDYWxsZXIuY2FsbCgiQ1JTOTQ5TUkiLCJHZXRQYXJ0bmVyTWVkaWEiLCBwYXJhbXMxLCBjYWxsYmFjazEpDQogICAgICByZXR1cm4gbmV3IE1lZGlhKElOUkMsIENPQUYsIGZhbHNlKQ0KICAgIH0NCiAgICBlbHNlIHsNCiAgICAgIHJldHVybiBuZXcgTWVkaWEoQ09OQSwgQ09BRiwgZmFsc2UpDQogICAgfQ0KDQoNCiAgfQ0KfQ=="}}}