{"programModules":{"EXT001MI":{"program":"EXT001MI","triggers":{},"transactions":{"ISPGetPrchseOrd":{"sourceUuid":"f65058ed-dac1-40d1-a9ed-feebcaf6a608","name":"ISPGetPrchseOrd","program":"EXT001MI","description":"ALL_MI_0001_GetPurchaseOrders","active":true,"multi":true,"modified":1690808497377,"modifiedBy":"SMALALI","outputFields":[{"name":"RCTP","description":"Record Type (OH,OC,OL,LR,LC)","length":2,"mandatory":false,"type":"A"},{"name":"DIVI","description":"division","length":3,"mandatory":false,"type":"A"},{"name":"FACI","description":"facility","length":3,"mandatory":false,"type":"A"},{"name":"WHLO","description":"warehouse","length":3,"mandatory":false,"type":"A"},{"name":"PUNO","description":"purchase order number","length":10,"mandatory":false,"type":"A"},{"name":"SUNO","description":"supplier","length":10,"mandatory":false,"type":"A"},{"name":"SUNM","description":"supplier name","length":700,"mandatory":false,"type":"A"},{"name":"RENM","description":"name","length":36,"mandatory":false,"type":"A"},{"name":"BUYE","description":"buyer","length":10,"mandatory":false,"type":"A"},{"name":"CSCD","description":"country","length":3,"mandatory":false,"type":"A"},{"name":"CUCD","description":"currency","length":3,"mandatory":false,"type":"A"},{"name":"DATE","description":"entry date","length":8,"mandatory":false,"type":"N"},{"name":"PUDT","description":"order date","length":8,"mandatory":false,"type":"N"},{"name":"DWDT","description":"requested delivery date","length":8,"mandatory":false,"type":"N"},{"name":"YRE1","description":"your reference","length":36,"mandatory":false,"type":"A"},{"name":"PHNO","description":"telephone number 1","length":16,"mandatory":false,"type":"A"},{"name":"TFNO","description":"facsimile transmission number","length":16,"mandatory":false,"type":"A"},{"name":"REMK","description":"remark","length":30,"mandatory":false,"type":"A"},{"name":"ORTY","description":"order type","length":3,"mandatory":false,"type":"A"},{"name":"COAM","description":"total order cost","length":17,"mandatory":false,"type":"N"},{"name":"TOQT","description":"total quantity","length":15,"mandatory":false,"type":"N"},{"name":"TEPY","description":"payment terms","length":3,"mandatory":false,"type":"A"},{"name":"MODL","description":"delivery method","length":3,"mandatory":false,"type":"A"},{"name":"TEDL","description":"delivery terms","length":3,"mandatory":false,"type":"A"},{"name":"TEPA","description":"packaging terms","length":3,"mandatory":false,"type":"A"},{"name":"TEL1","description":"terms text","length":36,"mandatory":false,"type":"A"},{"name":"PUSL","description":"lowest status - purchase order","length":2,"mandatory":false,"type":"A"},{"name":"PUST","description":"highest status - purchase order","length":2,"mandatory":false,"type":"A"},{"name":"CDSE","description":"sequence number - costing element","length":4,"mandatory":false,"type":"N"},{"name":"REPN","description":"receiving number","length":10,"mandatory":false,"type":"N"},{"name":"EXTY","description":"charge type","length":1,"mandatory":false,"type":"N"},{"name":"TX30","description":"description","length":30,"mandatory":false,"type":"A"},{"name":"EXIC","description":"charge invoicing","length":1,"mandatory":false,"type":"N"},{"name":"WSOP","description":"costing operator","length":2,"mandatory":false,"type":"A"},{"name":"CCUC","description":"Charge Currency","length":3,"mandatory":false,"type":"A"},{"name":"CEVA","description":"costing element amount","length":15,"mandatory":false,"type":"N"},{"name":"CEVJ","description":"adjusted costing element amount","length":15,"mandatory":false,"type":"N"},{"name":"THPR","description":"3rd party charges","length":1,"mandatory":false,"type":"N"},{"name":"IVCQ","description":"invoice charge quantity","length":1,"mandatory":false,"type":"N"},{"name":"CEID","description":"costing element","length":6,"mandatory":false,"type":"A"},{"name":"PNLI","description":"purchase order line","length":3,"mandatory":false,"type":"N"},{"name":"PNLS","description":"purchase order line subnumber","length":3,"mandatory":false,"type":"N"},{"name":"ITNO","description":"item number","length":15,"mandatory":false,"type":"A"},{"name":"ADQA","description":"transport notified quantit alternate U/M","length":15,"mandatory":false,"type":"N"},{"name":"ORQT","description":"ordered quantity - basic U/M","length":15,"mandatory":false,"type":"N"},{"name":"TRDT","description":"transaction date","length":8,"mandatory":false,"type":"N"},{"name":"LWHL","description":"Line Warehouse","length":3,"mandatory":false,"type":"A"},{"name":"PITD","description":"purchase order item name","length":60,"mandatory":false,"type":"A"},{"name":"PITT","description":"purchase order item description","length":120,"mandatory":false,"type":"A"},{"name":"SITE","description":"supplier item number","length":30,"mandatory":false,"type":"A"},{"name":"CAQA","description":"approved quantity - alternate U/M","length":15,"mandatory":false,"type":"N"},{"name":"RJQA","description":"rejected quantity","length":15,"mandatory":false,"type":"N"},{"name":"SDQA","description":"stored quantity","length":15,"mandatory":false,"type":"N"},{"name":"ORQA","description":"ordered quantity - alternate U/M","length":15,"mandatory":false,"type":"N"},{"name":"IVQA","description":"invoiced quantity - alternate U/M","length":15,"mandatory":false,"type":"N"},{"name":"RVQA","description":"received quantity","length":15,"mandatory":false,"type":"N"},{"name":"CFQA","description":"confirmed quantity","length":15,"mandatory":false,"type":"N"},{"name":"OQPU","description":"Open Quantity Price UM","length":3,"mandatory":false,"type":"A"},{"name":"PURC","description":"requisition by","length":10,"mandatory":false,"type":"A"},{"name":"LBUY","description":"Line Buyer","length":10,"mandatory":false,"type":"A"},{"name":"STUM","description":"Standard UM","length":3,"mandatory":false,"type":"A"},{"name":"UNMS","description":"basic unit of measure","length":3,"mandatory":false,"type":"A"},{"name":"ALUM","description":"Alternative UM","length":3,"mandatory":false,"type":"A"},{"name":"CWUN","description":"Catch weight UM","length":3,"mandatory":false,"type":"A"},{"name":"LNAM","description":"line amount - order currency","length":15,"mandatory":false,"type":"N"},{"name":"PUPR","description":"purchase price","length":17,"mandatory":false,"type":"N"},{"name":"PUQT","description":"purchased quantity","length":15,"mandatory":false,"type":"N"},{"name":"ALPR","description":"Alternative Price","length":17,"mandatory":false,"type":"N"},{"name":"PTCD","description":"purchase price text","length":1,"mandatory":false,"type":"N"},{"name":"VTCD","description":"VAT code","length":2,"mandatory":false,"type":"N"},{"name":"GRMT","description":"goods receiving method","length":3,"mandatory":false,"type":"A"},{"name":"LMOD","description":"Line MODL","length":3,"mandatory":false,"type":"A"},{"name":"LTED","description":"Line TEDL","length":3,"mandatory":false,"type":"A"},{"name":"LTEL","description":"Line TEL1","length":36,"mandatory":false,"type":"A"},{"name":"LPSL","description":"Line PUSL","length":2,"mandatory":false,"type":"A"},{"name":"LPST","description":"Line PUST","length":2,"mandatory":false,"type":"A"},{"name":"POPN","description":"alias number","length":30,"mandatory":false,"type":"A"},{"name":"RORC","description":"reference order category","length":1,"mandatory":false,"type":"N"},{"name":"RORN","description":"reference order number","length":10,"mandatory":false,"type":"A"},{"name":"RORL","description":"reference order line","length":6,"mandatory":false,"type":"N"},{"name":"RORX","description":"line suffix","length":3,"mandatory":false,"type":"N"},{"name":"SUDO","description":"delivery note number","length":20,"mandatory":false,"type":"A"},{"name":"FRRC","description":"freight reference type","length":1,"mandatory":false,"type":"N"},{"name":"FRRE","description":"freight reference","length":12,"mandatory":false,"type":"N"},{"name":"AMOP","description":"Amount Open Std Unit Value","length":17,"mandatory":false,"type":"A"},{"name":"AMOR","description":"Amount Ordered Std Unit Value","length":17,"mandatory":false,"type":"A"},{"name":"PRCE","description":"Price Std Unit Value","length":17,"mandatory":false,"type":"N"},{"name":"UNIT","description":"Unit - Std Unit Value","length":3,"mandatory":false,"type":"A"},{"name":"OPQT","description":"Open Quantity Std Unit Value","length":17,"mandatory":false,"type":"A"},{"name":"QTIV","description":"Quantity Invoice Std Unit Value","length":17,"mandatory":false,"type":"A"},{"name":"QTOR","description":"Quantity Ordered Std Unit Value","length":17,"mandatory":false,"type":"A"},{"name":"QTRV","description":"Quantity Received - Std Unit Value","length":17,"mandatory":false,"type":"A"},{"name":"ALTU","description":"Alternative Unit - Unit Value","length":3,"mandatory":false,"type":"A"},{"name":"ALQO","description":"Alternative Quanity Open Unit Value","length":17,"mandatory":false,"type":"N"},{"name":"ALTP","description":"Alternative Price Unit Value","length":17,"mandatory":false,"type":"N"},{"name":"RPNM","description":"Receipt Number","length":15,"mandatory":false,"type":"A"},{"name":"RELP","description":"receipt type","length":1,"mandatory":false,"type":"N"},{"name":"RPDT","description":"Receipt Date","length":8,"mandatory":false,"type":"A"},{"name":"RPQT","description":"Receipt Quantity","length":17,"mandatory":false,"type":"N"},{"name":"RQAL","description":"Receipt Quantity Alternative UM","length":17,"mandatory":false,"type":"A"},{"name":"OAOU","description":"Open Amount Order UM","length":17,"mandatory":false,"type":"A"},{"name":"OALC","description":"Open Amount Local Currency","length":17,"mandatory":false,"type":"A"},{"name":"OPCW","description":"Open Catch Weight","length":17,"mandatory":false,"type":"N"},{"name":"OQOU","description":"Open Quantity Order UM","length":17,"mandatory":false,"type":"A"},{"name":"OQPM","description":"Open Quantity Purchase Order Price UM","length":17,"mandatory":false,"type":"A"},{"name":"CELD","description":"Costing element Description","length":20,"mandatory":false,"type":"A"},{"name":"IVCS","description":"Invoice Costs","length":20,"mandatory":false,"type":"A"},{"name":"CHFC","description":"Charge Factor","length":20,"mandatory":false,"type":"A"}],"inputFields":[{"name":"SUNO","description":"supplier","length":10,"mandatory":false,"type":"A"},{"name":"PUNO","description":"Purchase Orders List (semi-colon separated)","length":1000,"mandatory":false,"type":"A"},{"name":"PUSL","description":"lowest status - purchase order","length":2,"mandatory":false,"type":"A"},{"name":"PUST","description":"highest status - purchase order","length":2,"mandatory":false,"type":"A"}],"utilities":[]}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"f65058ed-dac1-40d1-a9ed-feebcaf6a608":{"uuid":"f65058ed-dac1-40d1-a9ed-feebcaf6a608","updated":1690808153282,"updatedBy":"SMALALI","created":1686757897954,"createdBy":"SMALALI","apiVersion":"0.9","beVersion":"16.0.0.20230516150031.5","language":"GROOVY","codeHash":"AFF0B1D76797B0D666FC5FAC929EFBB6815F75BDAC80D6BC15A2C473F374BFB0","code":"LyoqDQoqIFJFQURNRQ0KKiBUaGlzIGV4dGVuc2lvbiBzZW5kcyBNMyBQdXJjaGFzZSBvcmRlciBkZXRhaWxzIChQTyBMaW5lIGRldGFpbHMsUmVjZWlwdCBkZXRhaWxzLGNoYXJnZSBkZXRhaWxzLGl0ZW0gZGV0YWlscyxzdXBwbGllciBkZXRhaWxzKSB0byAzcmQgcGFydHkgYXBwbGljYXRpb24gSVNQLiANCiogDQoqDQoqIE5hbWU6IEVYVDAwMU1JLklTUEdldFByY2hzZU9yZA0KKiBEZXNjcmlwdGlvbjogDQoqIERhdGUgICAgICAgICAgQ2hhbmdlZCBieSAgICAgICAgICAgICAgRGVzY3JpcHRpb24NCiogMjAyMS0wNS0xOSAgICBIaXRlc2ggQ2hvdHJhbmkgICAgICAgICBJbml0aWFsIHZlcnNpb24NCiogMjAyMy0wMy0xMCAgICBTaGFzaGFuayBNYWxhbGkgICAgICAgICBSZW1vdmUgdW51c2VkIGNvZGUsIHVzYWdlIGxvd2VyQ2FtZWxDYXNlDQoqIDIwMjMtMDYtMTQgICAgU2hhc2hhbmsgTWFsYWxpICAgICAgICAgQ2hhbmdlIC5zaXplIG1ldGhvZCB0byAuc2l6ZSgpDQoqICANCiogIA0KKi8NCg0KDQppbXBvcnQgZ3Jvb3Z5Lmpzb24uKjsNCmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlOw0KaW1wb3J0IGphdmEudGltZS5mb3JtYXQuRGF0ZVRpbWVGb3JtYXR0ZXI7DQppbXBvcnQgamF2YS50ZXh0LkRlY2ltYWxGb3JtYXQ7DQppbXBvcnQgamF2YS5sYW5nLkRvdWJsZTsNCmltcG9ydCBqYXZhLmxhbmcuSW50ZWdlcjsNCmltcG9ydCBqYXZhLm1hdGguKjsNCg0KcHVibGljIGNsYXNzIElTUEdldFByY2hzZU9yZCBleHRlbmRzIEV4dGVuZE0zVHJhbnNhY3Rpb24gew0KICBwcml2YXRlIGZpbmFsIE1JQVBJIG1pOw0KICBwcml2YXRlIGZpbmFsIE1JQ2FsbGVyQVBJIG1pQ2FsbGVyOw0KICBwcml2YXRlIGZpbmFsIExvZ2dlckFQSSBsb2dnZXI7DQogIHByaXZhdGUgZmluYWwgUHJvZ3JhbUFQSSBwcm9ncmFtOw0KICBwcml2YXRlIGZpbmFsIERhdGFiYXNlQVBJIGRhdGFiYXNlOw0KICBwcml2YXRlIGZpbmFsIElvbkFQSSBpb247DQogIHByaXZhdGUgU3RyaW5nIENPTk8gPSAiIjsNCiAgcHJpdmF0ZSBTdHJpbmcgU1VOTyA9ICIiOw0KICBwcml2YXRlIFN0cmluZyBQVU5PID0gIiI7DQogIHByaXZhdGUgU3RyaW5nIGlucHV0UHVzbCA9ICIiOw0KICBwcml2YXRlIFN0cmluZyBpbnB1dFB1c3QgPSAiIjsNCiAgcHJpdmF0ZSBTdHJpbmcgY2hlY2tQdXNsID0gIiI7DQogIHByaXZhdGUgU3RyaW5nIGNoZWNrUHVzdCA9ICIiOw0KICBwcml2YXRlIFN0cmluZyBjaGVja0NvYW0gPSAiIjsNCiAgcHJpdmF0ZSBTdHJpbmcgY2hlY2tQb3RjID0gIiI7DQogIHByaXZhdGUgU3RyaW5nIGNoZWNrVG9xdCA9ICIiOw0KICBwcml2YXRlIFN0cmluZyBudW1iZXJPZkRlY2ltYWxzID0gIiI7DQogIHByaXZhdGUgU3RyaW5nIHByaWNlVW5pdFN0YW5kYXJkID0gIiI7DQogIHByaXZhdGUgU3RyaW5nIGV4cG9ydEVtcHR5ID0gIiI7DQogIHByaXZhdGUgU3RyaW5nIHZhbGlkQ2hhcmdlVHlwZXMgPSAiIjsNCiAgcHJpdmF0ZSBTdHJpbmcgcmVjZWlwdFF1YW50aXR5ID0gIiI7DQogIHByaXZhdGUgU3RyaW5nIG9wZW5BbW91bnRMb2NhbEN1cnJlbmN5ID0gIiI7DQogIHByaXZhdGUgU3RyaW5nIGZpeGVkQ2hhcmdlVHlwZXMgPSAiIjsNCiAgcHJpdmF0ZSBBcnJheUxpc3QgPCBTdHJpbmcgPiB2YWxpZFB1cmNoYXNlT3JkZXJMaXN0ID0gbnVsbDsNCiAgcHJpdmF0ZSBBcnJheUxpc3QgPCBTdHJpbmcgPiB0ZW1wUHVubyA9IG51bGw7DQogIHByaXZhdGUgQXJyYXlMaXN0IDwgSGFzaHRhYmxlID4gY2hhcmdlTGlzdCA9IG51bGw7DQogIHByaXZhdGUgQXJyYXlMaXN0IDwgSGFzaHRhYmxlID4gbGluZUxpc3QgPSBudWxsOw0KICBwcml2YXRlIEFycmF5TGlzdCA8IEhhc2h0YWJsZSA+IGxpbmVSZWNlaXB0TGlzdCA9IG51bGw7DQogIHByaXZhdGUgQXJyYXlMaXN0IDwgSGFzaHRhYmxlID4gb3BlbkxpbmVSZWNlaXB0TGlzdCA9IG51bGw7DQogIHByaXZhdGUgQXJyYXlMaXN0IDwgSGFzaHRhYmxlID4gbGluZUNoYXJnZVJlY2VpcHRMaXN0ID0gbnVsbDsNCiAgcHJpdmF0ZSBBcnJheUxpc3QgPCBIYXNodGFibGUgPiBsaW5lT3BlbkNoYXJnZVJlY2VpcHRMaXN0ID0gbnVsbDsNCiAgcHJpdmF0ZSBBcnJheUxpc3QgPCBIYXNodGFibGUgPiB0ZW1wTGluZUNoYXJnZUxpc3QgPSBudWxsOw0KICBwcml2YXRlIEFycmF5TGlzdCA8IEhhc2h0YWJsZSA+IGxpbmVDaGFyZ2VMaXN0ID0gbnVsbDsNCiAgcHJpdmF0ZSBTdHJpbmcgb0RpdmkgPSAiIiwgb0ZhY2kgPSAiIiwgb1dobG8gPSAiIiwgb1B1bm8gPSAiIiwgb1N1bm8gPSAiIiwgb1N1bm0gPSAiIiwgb1Jlbm0gPSAiIiwgb0J1eWUgPSAiIiwgb09ydHkgPSAiIjsNCiAgcHJpdmF0ZSBTdHJpbmcgb0NzY2QgPSAiIiwgb0N1Y2QgPSAiIiwgb0RhdGUgPSAiIiwgb1B1ZHQgPSAiIiwgb0R3ZHQgPSAiIiwgb1lyZTEgPSAiIiwgb1Bobm8gPSAiIiwgb1Rmbm8gPSAiIjsNCiAgcHJpdmF0ZSBTdHJpbmcgb0lhcGMgPSAiIjsNCiAgcHJpdmF0ZSBTdHJpbmcgb1JlbWsgPSAiIiwgb09ydGsgPSAiIiwgb0NvYW0gPSAiIiwgb1RvcXQgPSAiIiwgb01vZGwgPSAiIiwgb1RlcHkgPSAiIiwgb1RlcGEgPSAiIiwgb1RlbDEgPSAiIiwgb1B1c2wgPSAiIiwgb1B1c3QgPSAiIjsNCiAgcHJpdmF0ZSBTdHJpbmcgb0RtY3UgPSAiIiwgb1RlZGwgPSAiIjsNCiAgcHJpdmF0ZSBTdHJpbmcgc3RhbmRhcmRVbml0TWVhc3VyZSA9ICIiOw0KICBwcml2YXRlIFN0cmluZyB1bml0TWVhc3VyZSA9ICIiLCBpbnZRdHksIHJlcFF0eQ0KICBwcml2YXRlIFN0cmluZyBhbHRlcm5hdGVVbml0TWVhc3VyZSA9ICIiLCBvcGVuUXVhbnRpdHlPcmRlclVtYSA9ICIiOw0KICBwcml2YXRlIFN0cmluZyBwcmljZVVtRGNjZCA9ICIiLCBwcmljZVVtRG1jZiA9ICIiLCBwcmljZVVtQ29mYSA9ICIiLCBvcmRlclVtRGNjZCA9ICIiLCBvcmRlclVtRG1jZiA9ICIiLCBvcmRlclVtQ29mYSA9ICIiLCBiYXNpY1VtRGNjZCA9ICIiLCBwb3BuRWExMyA9ICIiLCBJVlFUID0gIiIsIGVhY2hMaW5lUHV1biA9ICIiLCBlYWNoTGluZVBwdW4gPSAiIjsNCiAgcHJpdmF0ZSBTdHJpbmcgb3JkZXJkUXVhbnRpdHlQcmljZVVtLCByZWNlaXZlZFF1YW50aXR5UHJpY2VVbSwgaW52b2ljZWRRdWFudGl0eVByaWNlVW0sIG9wZW5RdWFudGl0eVByaWNlVW0sIG9wZVF1YW50aXR5T3JkZXJVbSwgYW1vdW50T3BlbiwgcHJpY1BlclBpZWNlUHJpY2VVbSwgcHJpY1BlclBpZWNlT3JkZXJVbTsNCiAgcHJpdmF0ZSBTdHJpbmcgcHJpY2VQZXJQaWVjZVN0YW5kYXJkVW0sIHByaWNlcGVyUGllY2VPdW0sIG9wZW5RdWFudGl0eVN0YW5kYXJkVW0sIGludm9pY2VkUXVhbnRpdHlTdGFuZGFyZFVtLCBvcmRlcmVkUXVhbnRpdHlTdGFuZGFyZFVtLCByZWNlaXZlZFF1YW50aXR5U3RhbmRhcmRVbSwgYWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4sIGFsdGVybmF0aXZlUHJpY2U7DQogIHByaXZhdGUgU3RyaW5nIEFVVFBBID0gIiIsIHJlY2VpdmVkUXVhbnRpdHlPcmRlclVtID0gIiIsIHJlY2V2ZENvc3RBbW91bnRPcmRlclVtT3JkZXJDdXJyZW5jeSA9ICIiLCBhbW91bnRSZWNlaXZlZFByaWNlVW0gPSAiIiwgYW1vdW50T3BlblByaWNlVW0gPSAiIiwgYW1vdW50T3Blbk9yZGVyVW0gPSAiIjsNCiAgcHJpdmF0ZSBib29sZWFuIGlzRW5kT2ZGaWxlID0gZmFsc2U7DQogIHByaXZhdGUgRG91YmxlIGRDcHByID0gMC4wZDsNCiAgcHJpdmF0ZSBIYXNodGFibGUgdGVtcFRhYmxlQ2hhcmdlcyA9IG51bGw7DQogIHByaXZhdGUgSGFzaHRhYmxlIHRlbXBUYWJsZUNoYXJnZXMxID0gbnVsbDsNCg0KICBwdWJsaWMgSVNQR2V0UHJjaHNlT3JkKE1JQVBJIG1pLCBNSUNhbGxlckFQSSBtaUNhbGxlciwgUHJvZ3JhbUFQSSBwcm9ncmFtLCBEYXRhYmFzZUFQSSBkYXRhYmFzZSwgSW9uQVBJIGlvbiwgTG9nZ2VyQVBJIGxvZ2dlcikgew0KICAgIHRoaXMubWkgPSBtaTsNCiAgICB0aGlzLnByb2dyYW0gPSBwcm9ncmFtOw0KICAgIHRoaXMubWlDYWxsZXIgPSBtaUNhbGxlcjsNCiAgICB0aGlzLmxvZ2dlciA9IGxvZ2dlcjsNCiAgICB0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2U7DQogICAgdGhpcy5pb24gPSBpb247DQogIH0NCg0KICBwdWJsaWMgdm9pZCBtYWluKCkgew0KICAgIGdldENvbnRyb2xQcm9wZXJ0aWVzKCk7DQogICAgdmFsaWRQdXJjaGFzZU9yZGVyTGlzdCA9IG5ldyBBcnJheUxpc3QgPCBTdHJpbmcgPiAoKTsNCiAgICB0ZW1wVGFibGVDaGFyZ2VzID0gbmV3IEhhc2h0YWJsZSA8IFN0cmluZywgU3RyaW5nID4gKCk7DQogICAgdGVtcFRhYmxlQ2hhcmdlczEgPSBuZXcgSGFzaHRhYmxlIDwgU3RyaW5nLCBTdHJpbmcgPiAoKTsNCiAgICBDT05PID0gcHJvZ3JhbS5MREFaRC5nZXQoJ0NPTk8nKTsNCiAgICBTVU5PID0gbWkuaW5EYXRhLmdldCgnU1VOTycpOw0KICAgIFBVTk8gPSBtaS5pbkRhdGEuZ2V0KCdQVU5PJyk7DQogICAgaW5wdXRQdXNsID0gbWkuaW5EYXRhLmdldCgnUFVTTCcpOw0KICAgIGlucHV0UHVzdCA9IG1pLmluRGF0YS5nZXQoJ1BVU1QnKTsNCiAgICBpZiAoaW5wdXRQdXNsID09IG51bGwgfHwgaW5wdXRQdXNsLnRyaW0oKS5pc0VtcHR5KCkpIHsNCiAgICAgIGlucHV0UHVzbCA9ICIwIjsNCiAgICB9DQogICAgaWYgKGlucHV0UHVzdCA9PSBudWxsIHx8IGlucHV0UHVzdC50cmltKCkuaXNFbXB0eSgpKSB7DQogICAgICBpbnB1dFB1c3QgPSAiMTAwIjsNCiAgICB9DQogICAgaW50IG9yZGVyQXJyYXlMZW5ndGggPSAwOw0KICAgIGlmICghUFVOTy50cmltKCkuaXNFbXB0eSgpICYmIFNVTk8udHJpbSgpLmlzRW1wdHkoKSkgew0KICAgICAgU3RyaW5nW10gb3JkZXJBcnJheSA9IFBVTk8uc3BsaXQoJzsnKTsNCiAgICAgIG9yZGVyQXJyYXlMZW5ndGggPSBvcmRlckFycmF5Lmxlbmd0aDsNCiAgICAgIG9yZGVyQXJyYXkuZWFjaCB7DQogICAgICAgIHZhbHVlIC0+DQogICAgICAgICAgU3RyaW5nIGVhY2hQdW5vID0gdmFsdWU7DQoNCiAgICAgICAgZ2V0SGVhZEJhc2ljKGVhY2hQdW5vKTsNCiAgICAgICAgZ2V0SGVhZChlYWNoUHVubyk7DQogICAgICAgIHZhbGlkUHVyY2hhc2VPcmRlckxpc3QuYWRkKGVhY2hQdW5vLnRyaW0oKSk7DQoNCiAgICAgIH0NCg0KICAgIH0gZWxzZSBpZiAoIVNVTk8udHJpbSgpLmlzRW1wdHkoKSkgew0KICAgICAgZ2V0UHVyY2hhc2VPcmRlckZvclN1cHBsaWVyKCk7DQogICAgfQ0KDQogICAgaW50IHB1cmNoYXNlT3JkZXJDYXAgPSAwOw0KICAgIGlmIChvcmRlckFycmF5TGVuZ3RoID09IDApIHsNCiAgICAgIG9yZGVyQXJyYXlMZW5ndGggPSAyMDA7DQogICAgfQ0KICAgIGlmICh2YWxpZFB1cmNoYXNlT3JkZXJMaXN0LnNpemUoKSA+IDIwMCkgew0KICAgICAgDQogICAgfQ0KICAgIGlmICh2YWxpZFB1cmNoYXNlT3JkZXJMaXN0LnNpemUoKSA8IDIwMCkgew0KICAgICAgaXNFbmRPZkZpbGUgPSB0cnVlOw0KICAgIH0NCiAgICB2YWxpZFB1cmNoYXNlT3JkZXJMaXN0LmVhY2ggew0KICAgICAgdmFsdWUgLT4NCiAgICAgICAgU3RyaW5nIGVhY2hQdW5vID0gdmFsdWU7DQogICAgICBjbGVhclBvSGVhZGVyRmllbGRzKCk7DQogICAgICBib29sZWFuIHJlY29yZEZvdW5kID0gZ2V0T3JkZXJEZXRhaWxzKGVhY2hQdW5vLnRyaW0oKSk7DQogICAgICBnZXRQb1N0YXR1cyhlYWNoUHVuby50cmltKCkpOw0KICAgICAgZ2V0Q3VycmVuY3lDb252ZXJzaW9uKG9EaXZpLnRyaW0oKSk7DQogICAgICBnZXRTdXBwbGllck5hbWUob1N1bm8udHJpbSgpKTsNCiAgICAgIGlmIChyZWNvcmRGb3VuZCAmJiBwdXJjaGFzZU9yZGVyQ2FwIDwgb3JkZXJBcnJheUxlbmd0aCkgew0KICAgICAgICBwdXJjaGFzZU9yZGVyQ2FwKys7DQogICAgICAgIHdyaXRlUHVyY2hhc2VPcmRlcigpOw0KICAgICAgICBnZXRDaGFyZ2VzKGVhY2hQdW5vLnRyaW0oKSk7DQogICAgICAgIGNoYXJnZUxpc3QuZWFjaCB7DQogICAgICAgICAgdmFsdWUxIC0+DQogICAgICAgICAgICBIYXNodGFibGUgZWFjaENoYXJnZSA9IHZhbHVlMTsNCiAgICAgICAgICB3cml0ZUNoYXJnZXMoZWFjaFB1bm8sIGVhY2hDaGFyZ2UpOw0KICAgICAgICB9DQoNCiAgICAgICAgZ2V0TGluZURldGFpbHMoZWFjaFB1bm8pOw0KICAgICAgICBsaW5lTGlzdC5lYWNoIHsNCiAgICAgICAgICB2YWx1ZTIgLT4NCiAgICAgICAgICAgIEhhc2h0YWJsZSBlYWNoTGluZSA9IHZhbHVlMjsNCiAgICAgICAgICBnZXRVbml0T2ZNZWFzdXJlbWVudENvbnZlcnNpb24oZWFjaExpbmUpOw0KICAgICAgICAgIGdldEJhc2ljRGVjaW1hbENvZGUoZWFjaExpbmUpOw0KICAgICAgICAgIGdldEl0ZW1BbGlhcyhlYWNoTGluZSk7DQogICAgICAgICAgZ2V0TXBsaW5lRGV0YWlscyhlYWNoUHVubywgZWFjaExpbmUpOw0KICAgICAgICAgIHVzZUNwcHJJZkF2YWlsYWJsZShlYWNoTGluZSk7DQogICAgICAgICAgY2hlY2tPcmRlclByaWNlQW5kQmFzZVVuaXRzKGVhY2hMaW5lKQ0KICAgICAgICAgIHdyaXRlUHVyY2hhc2VMaW5lKGVhY2hQdW5vLCBlYWNoTGluZSk7DQogICAgICAgICAgZ2V0TGluZVJlY2VpcHRzKGVhY2hQdW5vLCBlYWNoTGluZSk7DQogICAgICAgICAgb3BlbkxpbmVSZWNlaXB0TGlzdCA9IG5ldyBBcnJheUxpc3QgPCBIYXNodGFibGUgPiAoKTsNCiAgICAgICAgICBsaW5lUmVjZWlwdExpc3QuZWFjaCB7DQogICAgICAgICAgICBsaW5lUmVjZWlwdCAtPg0KICAgICAgICAgICAgICBIYXNodGFibGUgZWFjaExpbmVSZWNlaXB0ID0gbGluZVJlY2VpcHQ7DQoNCiAgICAgICAgICAgIGNhbGN1bGF0ZVJlY2VpcHRRdWFudGl0aWVzKGVhY2hMaW5lUmVjZWlwdCwgZWFjaExpbmUpOw0KICAgICAgICAgICAgb3BlbkxpbmVSZWNlaXB0TGlzdC5hZGQoZWFjaExpbmVSZWNlaXB0KTsNCg0KICAgICAgICAgICAgZ2F0aGVyUmVjZWlwdENoYXJnZXMoZWFjaFB1bm8sIGVhY2hMaW5lUmVjZWlwdCwgZWFjaExpbmUpOw0KDQogICAgICAgICAgICBsaW5lT3BlbkNoYXJnZVJlY2VpcHRMaXN0ID0gbmV3IEFycmF5TGlzdCA8IEhhc2h0YWJsZSA+ICgpOw0KICAgICAgICAgICAgbGluZUNoYXJnZVJlY2VpcHRMaXN0LmVhY2ggew0KICAgICAgICAgICAgICBsaW5lQ2hhcmdlUmVjZWlwdCAtPg0KICAgICAgICAgICAgICAgIEhhc2h0YWJsZSBlYWNoTGluZUNoYXJnZVJlY2VpcHQgPSBsaW5lQ2hhcmdlUmVjZWlwdDsNCiAgICAgICAgICAgICAgZ2V0Q2hhcmdlVGV4dChlYWNoTGluZUNoYXJnZVJlY2VpcHQpOw0KICAgICAgICAgICAgICBjYWxjdWxhdGVSZWNlaXB0Q2hhcmdlUXVhbnRpdGllcyhlYWNoTGluZSwgZWFjaExpbmVSZWNlaXB0LCBlYWNoTGluZUNoYXJnZVJlY2VpcHQpOw0KDQogICAgICAgICAgICAgIGNoZWNrQ2hhcmdlT3JkZXJQcmljZUFuZEJhc2VVbml0KGVhY2hMaW5lLCBlYWNoTGluZVJlY2VpcHQsIGVhY2hMaW5lQ2hhcmdlUmVjZWlwdCk7DQogICAgICAgICAgICAgIGFkZFRvTGluZU9wZW5DaGFyZ2VSZWNlaXB0TGlzdChlYWNoUHVubywgZWFjaExpbmUsIGVhY2hMaW5lUmVjZWlwdCwgZWFjaExpbmVDaGFyZ2VSZWNlaXB0KTsNCiAgICAgICAgICAgICAgZ2V0TGluZUNoYXJnZXMoZWFjaFB1bm8sIGVhY2hMaW5lKTsNCiAgICAgICAgICAgICAgdGVtcExpbmVDaGFyZ2VMaXN0LmVhY2ggew0KDQogICAgICAgICAgICAgICAgdGVtcExpbmVDaGFyZ2UgLT4NCiAgICAgICAgICAgICAgICAgIEhhc2h0YWJsZSBlYWNoVGVtcExpbmVDaGFyZ2UgPSB0ZW1wTGluZUNoYXJnZTsNCg0KICAgICAgICAgICAgICAgIGdldExpbmVDaGFyZ2VUZXh0KGVhY2hQdW5vLCB0ZW1wTGluZUNoYXJnZSwgZWFjaExpbmUpOw0KICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgbGluZUNoYXJnZUxpc3QuZWFjaCB7DQogICAgICAgICAgICAgIGxpbmVDaGFyZ2UgLT4NCiAgICAgICAgICAgICAgICBIYXNodGFibGUgZWFjaExpbmVDaGFyZ2UgPSBsaW5lQ2hhcmdlOw0KICAgICAgICAgICAgICB3cml0ZUxpbmVDaGFyZ2VzKGVhY2hQdW5vLCBlYWNoTGluZUNoYXJnZSwgZWFjaExpbmUpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgfQ0KDQogICAgICAgICAgb3BlbkxpbmVSZWNlaXB0TGlzdC5lYWNoIHsNCiAgICAgICAgICAgIG9wZW5MaW5lUmVjZWlwdCAtPg0KICAgICAgICAgICAgICBIYXNodGFibGUgZWFjaE9wZW5MaW5lUmVjZWlwdCA9IG9wZW5MaW5lUmVjZWlwdDsNCiAgICAgICAgICAgIHdyaXRlUmVjZWlwdHMoZWFjaFB1bm8sIGVhY2hPcGVuTGluZVJlY2VpcHQsIGVhY2hMaW5lKTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgfQ0KDQogICAgICB9DQoNCiAgICB9DQogICAgaWYgKGlzRW5kT2ZGaWxlKSB7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUkNUUCcsICdMJyk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUFVOTycsICclJUVPRiUlJyk7DQogICAgICBtaS53cml0ZSgpOw0KICAgIH0NCiAgfQ0KDQoNCiAvKioNCiAgKiBSZXRyaXZlIHRoZSBjb250cm9sIHByb3BlcnRpZXMgZnJvbSBDVUdFWDEgDQogICogDQogICovDQoNCiAgcHVibGljIGdldENvbnRyb2xQcm9wZXJ0aWVzKCkgew0KICAgIGJvb2xlYW4gcmVjb3JkRXhpc3RzID0gdHJ1ZTsNCiAgICBkZWYgY2FsbGJhY2sgPSB7DQogICAgICBNYXAgPCBTdHJpbmcsDQogICAgICBTdHJpbmcgPiByZXN1bHRzIC0+DQogICAgICByZWNvcmRFeGlzdHMgPSAhcmVzdWx0cy5nZXQoJ2Vycm9yJyk7DQogICAgICBpZiAocmVjb3JkRXhpc3RzKSB7DQogICAgICAgIG51bWJlck9mRGVjaW1hbHMgPSByZXN1bHRzLmdldCgnQTEyMScpOw0KDQogICAgICB9IGVsc2Ugew0KICAgICAgICBtaS5lcnJvcigiUGxlYXNlIG1haW50YWluIHJlY29yZCBpbiBDVUdFWDEgZm9yIE5PT0ZERUNJTUFMUyIpOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgfQ0KICAgIGRlZiBwYXJhbXMgPSBbIkZJTEUiOiAiSVNQRklMRSIsICJQSzAxIjogIkdFVFBVUkNIQVNFT1JERVIiLCAiUEswMiI6ICJOT09GREVDSU1BTFMiXTsNCiAgICBtaUNhbGxlci5jYWxsKCJDVVNFWFRNSSIsICJHZXRGaWVsZFZhbHVlIiwgcGFyYW1zLCBjYWxsYmFjayk7DQoNCiAgICBkZWYgY2FsbGJhY2syID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpOw0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBwcmljZVVuaXRTdGFuZGFyZCA9IHJlc3VsdHMuZ2V0KCdBMTIxJyk7DQoNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIG1pLmVycm9yKCJQbGVhc2UgbWFpbnRhaW4gcmVjb3JkIGluIENVR0VYMSBmb3IgUFJJQ0VVTklUU1RBTkRBUkQiKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgIH0NCiAgICBkZWYgcGFyYW1zMiA9IFsiRklMRSI6ICJJU1BGSUxFIiwgIlBLMDEiOiAiR0VUUFVSQ0hBU0VPUkRFUiIsICJQSzAyIjogIlBSSUNFVU5JVFNUQU5EQVJEIl07DQogICAgbWlDYWxsZXIuY2FsbCgiQ1VTRVhUTUkiLCAiR2V0RmllbGRWYWx1ZSIsIHBhcmFtczIsIGNhbGxiYWNrMik7DQoNCiAgICBkZWYgY2FsbGJhY2szID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpOw0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBleHBvcnRFbXB0eSA9IHJlc3VsdHMuZ2V0KCdBMTIxJyk7DQoNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIG1pLmVycm9yKCJQbGVhc2UgbWFpbnRhaW4gcmVjb3JkIGluIENVR0VYMSBmb3IgRVhQT1JURU1QVFkiKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgIH0NCiAgICBkZWYgcGFyYW1zMyA9IFsiRklMRSI6ICJJU1BGSUxFIiwgIlBLMDEiOiAiR0VUUFVSQ0hBU0VPUkRFUiIsICJQSzAyIjogIkVYUE9SVEVNUFRZIl07DQogICAgbWlDYWxsZXIuY2FsbCgiQ1VTRVhUTUkiLCAiR2V0RmllbGRWYWx1ZSIsIHBhcmFtczMsIGNhbGxiYWNrMyk7DQoNCiAgICBkZWYgY2FsbGJhY2s0ID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpOw0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICB2YWxpZENoYXJnZVR5cGVzID0gcmVzdWx0cy5nZXQoJ0ExMjEnKTsNCg0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgbWkuZXJyb3IoIlBsZWFzZSBtYWludGFpbiByZWNvcmQgaW4gQ1VHRVgxIGZvciBDSEFSR0VUWVBFIik7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICB9DQogICAgZGVmIHBhcmFtczQgPSBbIkZJTEUiOiAiSVNQRklMRSIsICJQSzAxIjogIkdFVFBVUkNIQVNFT1JERVIiLCAiUEswMiI6ICJDSEFSR0VUWVBFIl07DQogICAgbWlDYWxsZXIuY2FsbCgiQ1VTRVhUTUkiLCAiR2V0RmllbGRWYWx1ZSIsIHBhcmFtczQsIGNhbGxiYWNrNCk7DQoNCiAgICBkZWYgY2FsbGJhY2s1ID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpOw0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBmaXhlZENoYXJnZVR5cGVzID0gcmVzdWx0cy5nZXQoJ0ExMjEnKTsNCg0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgbWkuZXJyb3IoIlBsZWFzZSBtYWludGFpbiByZWNvcmQgaW4gQ1VHRVgxIGZvciBDSEFSR0VUWVBFIik7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICB9DQogICAgZGVmIHBhcmFtczUgPSBbIkZJTEUiOiAiSVNQRklMRSIsICJQSzAxIjogIkdFVFBVUkNIQVNFT1JERVIiLCAiUEswMiI6ICJGSVhFRENIQVJHRVRZUEUiXTsNCiAgICBtaUNhbGxlci5jYWxsKCJDVVNFWFRNSSIsICJHZXRGaWVsZFZhbHVlIiwgcGFyYW1zNSwgY2FsbGJhY2s1KTsNCg0KICB9DQoNCg0KIC8qKg0KICAqIGNsZWFyIGxvY2FsIHZlcmlhYmxlcyBvZiBQTyBoZWFkZXINCiAgKiANCiAgKi8NCiAgIA0KICBwdWJsaWMgY2xlYXJQb0hlYWRlckZpZWxkcygpIHsNCiAgICBvUHVubyA9ICIiOw0KICAgIG9EYXRlID0gIiI7DQogICAgb1B1ZHQgPSAiIjsNCiAgICBvRHdkdCA9ICIiOw0KICAgIG9SZW5tID0gIiI7DQogICAgb1N1bm8gPSAiIjsNCiAgICBvQ3NjZCA9ICIiOw0KICAgIG9CdXllID0gIiI7DQogICAgb0N1Y2QgPSAiIjsNCiAgICBvWXJlMSA9ICIiOw0KICAgIG9QaG5vID0gIiI7DQogICAgb1Rmbm8gPSAiIjsNCiAgICBvUmVtayA9ICIiOw0KICAgIG9Db2FtID0gIiI7DQogICAgb0RpdmkgPSAiIjsNCiAgICBvRmFjaSA9ICIiOw0KICAgIG9XaGxvID0gIiI7DQogICAgb09ydHkgPSAiIjsNCiAgICBvVGVweSA9ICIiOw0KICAgIG9Nb2RsID0gIiI7DQogICAgb1RlcGEgPSAiIjsNCiAgICBvVGVkbCA9ICIiOw0KICAgIG9UZWwxID0gIiI7DQogICAgb1RvcXQgPSAiIjsNCiAgICBvRG1jdSA9ICIiOw0KICAgIG9TdW5tID0gIiI7DQogICAgb0lhcGMgPSAiIjsNCiAgfQ0KDQoNCiAvKioNCiAgKiBHZXQgUHVyY2hhc2Ugb3JkZXIgYmFzaWMgZGV0YWlscyB1c2luZyBQUFMwMDFNSS5HZXRIZWFkQmFzaWMNCiAgKiANCiAgKi8NCiAgIA0KICBwdWJsaWMgZ2V0SGVhZEJhc2ljKFN0cmluZyBQVU5PKSB7DQogICAgYm9vbGVhbiByZWNvcmRFeGlzdHMgPSB0cnVlOw0KICAgIGRlZiBjYWxsYmFjayA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKTsNCiAgICAgIGlmIChyZWNvcmRFeGlzdHMpIHsNCiAgICAgICAgY2hlY2tQdXNsID0gcmVzdWx0cy5nZXQoJ1BVU0wnKTsNCiAgICAgICAgY2hlY2tQdXN0ID0gcmVzdWx0cy5nZXQoJ1BVU1QnKTsNCiAgICAgIH0NCiAgICB9DQogICAgZGVmIHBhcmFtcyA9IFsiQ09OTyI6IENPTk8sICJQVU5PIjogUFVOT107DQogICAgbWlDYWxsZXIuY2FsbCgiUFBTMDAxTUkiLCAiR2V0SGVhZEJhc2ljIiwgcGFyYW1zLCBjYWxsYmFjayk7DQogIH0NCg0KDQogLyoqDQogICogR2V0IFB1cmNoYXNlIG9yZGVyIHN0YXR1cyB1c2luZyBQUFMwMDFNSS5HZXRIZWFkQmFzaWMNCiAgKiANCiAgKi8NCiAgIA0KICBwdWJsaWMgZ2V0UG9TdGF0dXMoU3RyaW5nIFBVTk8pIHsNCiAgICBib29sZWFuIHJlY29yZEV4aXN0cyA9IHRydWU7DQogICAgZGVmIGNhbGxiYWNrID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpOw0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KDQogICAgICAgIG9QdXNsID0gcmVzdWx0cy5nZXQoJ1BVU0wnKTsNCiAgICAgICAgb1B1c3QgPSByZXN1bHRzLmdldCgnUFVTVCcpOw0KDQogICAgICB9DQogICAgfQ0KICAgIGRlZiBwYXJhbXMgPSBbIkNPTk8iOiBDT05PLCAiUFVOTyI6IFBVTk9dOw0KICAgIG1pQ2FsbGVyLmNhbGwoIlBQUzAwMU1JIiwgIkdldEhlYWRCYXNpYyIsIHBhcmFtcywgY2FsbGJhY2spOw0KICB9DQoNCg0KIC8qKg0KICAqIEdldCBwdXJjaGFzZSBvcmRlciBhZGRpdGlvbmFsIGRldGFpbHMgZnJvbSB0YWJsZSBNUEhFQUQNCiAgKiANCiAgKi8NCg0KICBwdWJsaWMgZ2V0SGVhZChTdHJpbmcgZWFjaFB1bm8pIHsNCg0KICAgIGludCBjdXJyZW50Q29tcGFueSA9IChJbnRlZ2VyKSBwcm9ncmFtLmdldExEQVpEKCkuQ09OTzsNCiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJNUEhFQUQiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIklBQ09OTyIsICJJQVBVTk8iLCAiSUFDT0FNIiwgIklBUE9UQyIsICJJQVRPUVQiKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpOw0KICAgIGNvbnRhaW5lci5zZXQoIklBQ09OTyIsIGN1cnJlbnRDb21wYW55KTsNCiAgICBjb250YWluZXIuc2V0KCJJQVBVTk8iLCBlYWNoUHVubyk7DQoNCiAgICBpZiAocXVlcnkucmVhZChjb250YWluZXIpKSB7DQogICAgICBjaGVja0NvYW0gPSBjb250YWluZXIuZ2V0KCJJQUNPQU0iKTsNCiAgICAgIGNoZWNrUG90YyA9IGNvbnRhaW5lci5nZXQoIklBUE9UQyIpOw0KICAgICAgY2hlY2tUb3F0ID0gY29udGFpbmVyLmdldCgiSUFUT1FUIik7DQogICAgfQ0KICB9DQoNCiAvKioNCiAgKiBWYWxpZGF0ZSBwdXJjaGFzZSBvcmRlciBudW1iZXINCiAgKiANCiAgKi8NCiAgIA0KICBwdWJsaWMgYm9vbGVhbiB2YWxpZGF0ZVB1bm8oKSB7DQogICAgY2hlY2tDb2FtID0gY2hlY2tDb2FtLmVxdWFscygiIikgPyAiMCIgOiBjaGVja0NvYW07DQogICAgY2hlY2tUb3F0ID0gY2hlY2tUb3F0LmVxdWFscygiIikgPyAiMCIgOiBjaGVja1RvcXQ7DQoNCiAgICBCaWdEZWNpbWFsIHRvdGFsQW1vdW50ID0gbmV3IEJpZ0RlY2ltYWwoY2hlY2tDb2FtKTsNCiAgICBCaWdEZWNpbWFsIHRvdGFsUXVhbnRpdHkgPSBuZXcgQmlnRGVjaW1hbChjaGVja1RvcXQpOw0KDQogICAgYm9vbGVhbiBoYXNBbW91bnQgPSB0b3RhbEFtb3VudC5jb21wYXJlVG8oQmlnRGVjaW1hbC5aRVJPKSAhPSAwOw0KICAgIGJvb2xlYW4gaGFzUXVhbnRpdHkgPSB0b3RhbFF1YW50aXR5LmNvbXBhcmVUbyhCaWdEZWNpbWFsLlpFUk8pICE9IDA7DQoNCiAgICBib29sZWFuIGhhc0Ftb3VudE9yUXVhbnRpdHkgPSBoYXNBbW91bnQgfHwgaGFzUXVhbnRpdHk7DQoNCiAgICBpZiAoY2hlY2tQb3RjLmVxdWFscygiMzAiKSB8fCBjaGVja1BvdGMuZXF1YWxzKCI0MCIpKSB7DQogICAgICByZXR1cm4gY2hlY2tQdXNsLnRvSW50ZWdlcigpIDw9IDMwICYmIGNoZWNrUHVzdC50b0ludGVnZXIoKSA+PSAxNTsNCiAgICB9IGVsc2Ugew0KICAgICAgcmV0dXJuIChjaGVja1B1c2wudG9JbnRlZ2VyKCkgPD0gaW5wdXRQdXN0LnRvSW50ZWdlcigpICYmIGNoZWNrUHVzdC50b0ludGVnZXIoKSA+PSBpbnB1dFB1c2wudG9JbnRlZ2VyKCkpICYmIChjaGVja1B1c2wudG9JbnRlZ2VyKCkgPCA4NSkgJiYgaGFzQW1vdW50T3JRdWFudGl0eTsNCiAgICB9DQogIH0NCg0KIC8qKg0KICAqIHJldHJpdmUgUHVyY2hhc2Ugb3JkZXIgc3VwcGxpZXIgbnVtYmVyIGZyb20gTVBIRUFEDQogICogDQogICovDQogICANCiAgcHVibGljIGdldFB1cmNoYXNlT3JkZXJGb3JTdXBwbGllcigpIHsNCiAgICBEQkFjdGlvbiBxdWVyeU1waGVhZCA9IGRhdGFiYXNlLnRhYmxlKCJNUEhFQUQiKS5pbmRleCgiNDAiKS5zZWxlY3Rpb24oIklBUFVOTyIsICJJQUNPTk8iLCAiSUFTVU5PIiwgIklBUFVTTCIsICJJQVBVU1QiLCAiSUFQT1RDIiwgIklBVE9RVCIsICJJQUNPQU0iKS5idWlsZCgpOw0KICAgIGlmICghUFVOTy50cmltKCkuaXNFbXB0eSgpICYmICFTVU5PLnRyaW0oKS5pc0VtcHR5KCkpIHsNCiAgICAgIEV4cHJlc3Npb25GYWN0b3J5IGV4cHJlc3Npb24gPSBkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiTVBIRUFEIik7DQogICAgICBpZiAoIVBVTk8uY29udGFpbnMoJzsnKSkgew0KICAgICAgICBleHByZXNzaW9uID0gZXhwcmVzc2lvbi5ndCgiSUFQVU5PIiwgUFVOTy50cmltKCkpOw0KICAgICAgICBxdWVyeU1waGVhZCA9IGRhdGFiYXNlLnRhYmxlKCJNUEhFQUQiKS5pbmRleCgiNDAiKS5tYXRjaGluZyhleHByZXNzaW9uKS5zZWxlY3Rpb24oIklBUFVOTyIsICJJQUNPTk8iLCAiSUFTVU5PIiwgIklBUFVTTCIsICJJQVBVU1QiLCAiSUFQT1RDIiwgIklBVE9RVCIsICJJQUNPQU0iKS5idWlsZCgpOw0KICAgICAgfQ0KDQogICAgfQ0KDQogICAgREJDb250YWluZXIgcmVjb3JkTXBoZWFkID0gcXVlcnlNcGhlYWQuZ2V0Q29udGFpbmVyKCk7DQogICAgcmVjb3JkTXBoZWFkLnNldCgiSUFDT05PIiwgSW50ZWdlci5wYXJzZUludChDT05PLnRyaW0oKSkpOw0KICAgIHJlY29yZE1waGVhZC5zZXQoIklBU1VOTyIsIFNVTk8udHJpbSgpKTsNCiAgICANCiAgICBpbnQgcmVhZHMgPSBxdWVyeU1waGVhZC5yZWFkQWxsKHJlY29yZE1waGVhZCwgMiwgZ2V0TXBoZWFkUmVjb3Jkcyk7DQoNCiAgfQ0KDQogIENsb3N1cmUgPCA/ID4gZ2V0TXBoZWFkUmVjb3JkcyA9IHsNCiAgICBEQkNvbnRhaW5lciByZWNvcmQgLT4NCiAgICBTdHJpbmcgUFVOTyA9IHJlY29yZC5nZXQoIklBUFVOTyIpID09IG51bGwgPyAiIiA6IHJlY29yZC5nZXQoIklBUFVOTyIpOw0KICAgIGNoZWNrUHVzbCA9IHJlY29yZC5nZXQoJ0lBUFVTTCcpID09IG51bGwgPyAiMDAiIDogcmVjb3JkLmdldCgnSUFQVVNMJyk7DQogICAgY2hlY2tQdXN0ID0gcmVjb3JkLmdldCgnSUFQVVNUJykgPT0gbnVsbCA/ICIwMCIgOiByZWNvcmQuZ2V0KCdJQVBVU1QnKTsNCiAgICBjaGVja1BvdGMgPSByZWNvcmQuZ2V0KCJJQVBPVEMiKSA9PSBudWxsID8gIiIgOiByZWNvcmQuZ2V0KCdJQVBPVEMnKTsNCiAgICBjaGVja1RvcXQgPSByZWNvcmQuZ2V0KCJJQVRPUVQiKSA9PSBudWxsID8gIiIgOiByZWNvcmQuZ2V0KCdJQVRPUVQnKTsNCiAgICBjaGVja0NvYW0gPSByZWNvcmQuZ2V0KCdJQUNPQU0nKSA9PSBudWxsID8gIjAiIDogcmVjb3JkLmdldCgnSUFDT0FNJyk7DQogICAgYm9vbGVhbiBpc1ZhbGlkUHVubyA9IHZhbGlkYXRlUHVubygpOw0KICAgIGlmIChpc1ZhbGlkUHVubykgew0KICAgICAgdmFsaWRQdXJjaGFzZU9yZGVyTGlzdC5hZGQoUFVOTy50cmltKCkpOw0KICAgIH0gZWxzZSB7DQogICAgICB2YWxpZFB1cmNoYXNlT3JkZXJMaXN0LmFkZChQVU5PLnRyaW0oKSk7DQogICAgfQ0KDQogIH0NCg0KDQogLyoqDQogICogUmV0cml2ZSBwdXJjaGFzZSBvcmRlciBkZXRhaWxzIGZyb20gTVBIRUFEDQogICogDQogICovDQogICANCiAgcHVibGljIGJvb2xlYW4gZ2V0T3JkZXJEZXRhaWxzKFN0cmluZyBlYWNoUHVubykgew0KDQogICAgYm9vbGVhbiByZWNvcmRGb3VuZCA9IGZhbHNlOw0KICAgIGludCBjdXJyZW50Q29tcGFueSA9IChJbnRlZ2VyKSBwcm9ncmFtLmdldExEQVpEKCkuQ09OTzsNCiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJNUEhFQUQiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIklBQ09OTyIsICJJQVBVTk8iLCAiSUFQVURUIiwgIklBRFdEVCIsICJJQVNVTk8iLCAiSUFCVVlFIiwgIklBQ1VDRCIsICJJQVlSRTEiLCAiSUFURk5PIiwgIklBQ09BTSIsICJJQURJVkkiLCAiSUFGQUNJIiwgIklBV0hMTyIsICJJQU9SVFkiLCAiSUFURVBZIiwgIklBTU9ETCIsICJJQVRFUEEiLCAiSUFURURMIiwgIklBVEVMMSIsICJJQVRPUVQiKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpOw0KICAgIGNvbnRhaW5lci5zZXQoIklBQ09OTyIsIGN1cnJlbnRDb21wYW55KTsNCiAgICBjb250YWluZXIuc2V0KCJJQVBVTk8iLCBlYWNoUHVubyk7DQoNCiAgICBpZiAocXVlcnkucmVhZChjb250YWluZXIpKSB7DQogICAgICByZWNvcmRGb3VuZCA9IHRydWU7DQogICAgICBvUHVubyA9IGNvbnRhaW5lci5nZXQoJ0lBUFVOTycpOw0KICAgICAgb1B1ZHQgPSBjb250YWluZXIuZ2V0KCdJQVBVRFQnKTsNCiAgICAgIG9Ed2R0ID0gY29udGFpbmVyLmdldCgnSUFEV0RUJyk7DQogICAgICBvU3VubyA9IGNvbnRhaW5lci5nZXQoJ0lBU1VOTycpOw0KICAgICAgb0J1eWUgPSBjb250YWluZXIuZ2V0KCdJQUJVWUUnKTsNCiAgICAgIG9DdWNkID0gY29udGFpbmVyLmdldCgnSUFDVUNEJyk7DQogICAgICBvWXJlMSA9IGNvbnRhaW5lci5nZXQoJ0lBWVJFMScpOw0KICAgICAgb1Rmbm8gPSBjb250YWluZXIuZ2V0KCdJQVRGTk8nKTsNCiAgICAgIG9Db2FtID0gY29udGFpbmVyLmdldCgnSUFDT0FNJyk7DQogICAgICBvRGl2aSA9IGNvbnRhaW5lci5nZXQoJ0lBRElWSScpOw0KICAgICAgb0ZhY2kgPSBjb250YWluZXIuZ2V0KCdJQUZBQ0knKTsNCiAgICAgIG9XaGxvID0gY29udGFpbmVyLmdldCgnSUFXSExPJyk7DQogICAgICBvT3J0eSA9IGNvbnRhaW5lci5nZXQoJ0lBT1JUWScpOw0KICAgICAgb1RlcHkgPSBjb250YWluZXIuZ2V0KCdJQVRFUFknKTsNCiAgICAgIG9Nb2RsID0gY29udGFpbmVyLmdldCgnSUFNT0RMJyk7DQogICAgICBvVGVwYSA9IGNvbnRhaW5lci5nZXQoJ0lBVEVQQScpOw0KICAgICAgb1RlZGwgPSBjb250YWluZXIuZ2V0KCdJQVRFREwnKTsNCiAgICAgIG9UZWwxID0gY29udGFpbmVyLmdldCgnSUFURUwxJyk7DQogICAgICBvVG9xdCA9IGNvbnRhaW5lci5nZXQoJ0lBVE9RVCcpOw0KDQogICAgICANCiAgICAgIG9EYXRlID0gTG9jYWxEYXRlLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIikpOw0KDQogICAgICANCiAgICAgIERCQWN0aW9uIHF1ZXJ5Q3N5dXNyID0gZGF0YWJhc2UudGFibGUoIkNTWVVTUiIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiQ1JDT05PIiwgIkNSRElWSSIsICJDUlJFU1AiLCAiQ1JSRU5NIikuYnVpbGQoKTsNCiAgICAgIERCQ29udGFpbmVyIGNvbnRhaW5lckNzeXVzciA9IHF1ZXJ5Q3N5dXNyLmdldENvbnRhaW5lcigpOw0KICAgICAgY29udGFpbmVyQ3N5dXNyLnNldCgiQ1JDT05PIiwgY3VycmVudENvbXBhbnkpOw0KICAgICAgY29udGFpbmVyQ3N5dXNyLnNldCgiQ1JESVZJIiwgb0RpdmkpOw0KICAgICAgY29udGFpbmVyQ3N5dXNyLnNldCgiQ1JSRVNQIiwgb0J1eWUpOw0KDQogICAgICBpZiAocXVlcnlDc3l1c3IucmVhZChjb250YWluZXJDc3l1c3IpKSB7DQogICAgICAgIG9SZW5tID0gY29udGFpbmVyQ3N5dXNyLmdldCgiQ1JSRU5NIik7DQogICAgICB9DQoNCiAgICAgIA0KICAgICAgREJBY3Rpb24gcXVlcnlDaWRtYXMgPSBkYXRhYmFzZS50YWJsZSgiQ0lETUFTIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJJRENPTk8iLCAiSURTVU5PIiwgIklEQ1NDRCIsICJJRFBITk8iKS5idWlsZCgpOw0KICAgICAgREJDb250YWluZXIgY29udGFpbmVyQ2lkbWFzID0gcXVlcnlDaWRtYXMuZ2V0Q29udGFpbmVyKCk7DQogICAgICBjb250YWluZXJDaWRtYXMuc2V0KCJJRENPTk8iLCBjdXJyZW50Q29tcGFueSk7DQogICAgICBjb250YWluZXJDaWRtYXMuc2V0KCJJRFNVTk8iLCBvU3Vubyk7DQoNCiAgICAgIGlmIChxdWVyeUNpZG1hcy5yZWFkKGNvbnRhaW5lckNpZG1hcykpIHsNCiAgICAgICAgb0NzY2QgPSBjb250YWluZXJDaWRtYXMuZ2V0KCJJRENTQ0QiKTsNCiAgICAgICAgb1Bobm8gPSBjb250YWluZXJDaWRtYXMuZ2V0KCJJRFBITk8iKTsNCiAgICAgIH0NCg0KICAgICAgIA0KICAgICAgREJBY3Rpb24gcXVlcnlDaWR2ZW4gPSBkYXRhYmFzZS50YWJsZSgiQ0lEVkVOIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJJSUNPTk8iLCAiSUlTVU5PIiwgIklJSUFQQyIpLmJ1aWxkKCk7DQogICAgICBEQkNvbnRhaW5lciBjb250YWluZXJDaWR2ZW4gPSBxdWVyeUNpZHZlbi5nZXRDb250YWluZXIoKTsNCiAgICAgIGNvbnRhaW5lckNpZHZlbi5zZXQoIklJQ09OTyIsIGN1cnJlbnRDb21wYW55KTsNCiAgICAgIGNvbnRhaW5lckNpZHZlbi5zZXQoIklJU1VOTyIsIG9TdW5vKTsNCg0KICAgICAgaWYgKHF1ZXJ5Q2lkdmVuLnJlYWQoY29udGFpbmVyQ2lkdmVuKSkgew0KICAgICAgICBvSWFwYyA9IGNvbnRhaW5lckNpZHZlbi5nZXQoIklJSUFQQyIpOw0KICAgICAgfSANCg0KICAgICAgDQogICAgICBEQkFjdGlvbiBxdWVyeU1wb3JkdCA9IGRhdGFiYXNlLnRhYmxlKCJNUE9SRFQiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIk9UQ09OTyIsICJPVE9SVFkiLCAiT1RQMjUwIiwgIk9UUE9UQyIpLmJ1aWxkKCk7DQogICAgICBEQkNvbnRhaW5lciBjb250YWluZXJNcG9yZHQgPSBxdWVyeU1wb3JkdC5nZXRDb250YWluZXIoKTsNCiAgICAgIGNvbnRhaW5lck1wb3JkdC5zZXQoIk9UQ09OTyIsIGN1cnJlbnRDb21wYW55KTsNCiAgICAgIGNvbnRhaW5lck1wb3JkdC5zZXQoIk9UT1JUWSIsIG9PcnR5KTsNCg0KICAgICAgU3RyaW5nIHRQMjUwID0gIiI7DQogICAgICBTdHJpbmcgdFBvdGMgPSAiIjsNCiAgICAgIFN0cmluZyB0QWdudCA9IGNvbnRhaW5lci5nZXQoIklBQUdOVCIpOw0KDQogICAgICBpZiAocXVlcnlNcG9yZHQucmVhZChjb250YWluZXJNcG9yZHQpKSB7DQogICAgICAgIHRQMjUwID0gY29udGFpbmVyTXBvcmR0LmdldCgiT1RQMjUwIik7DQogICAgICAgIHRQb3RjID0gY29udGFpbmVyTXBvcmR0LmdldCgiT1RQT1RDIik7DQogICAgICB9DQoNCiAgICAgIA0KICAgICAgU3RyaW5nIHRTdW5vID0gY29udGFpbmVyLmdldCgiSUFTVU5PIik7DQogICAgICBTdHJpbmcgdFJmdHkgPSAiIjsNCiAgICAgIFN0cmluZyB0UmZpZCA9IGNvbnRhaW5lci5nZXQoIklBUkZJRCIpOw0KDQogICAgICBpZiAodFAyNTAuZXF1YWxzKCIxIikgJiYgIXRBZ250LmVxdWFscygiIikpIHsNCiAgICAgICAgdFN1bm8gPSAiIiArIHRBZ250Ow0KICAgICAgfQ0KDQogICAgICBpZiAodFBvdGMuZXF1YWxzKCI2MCIpIHx8IHRQb3RjLmVxdWFscygiNjUiKSB8fCB0UG90Yy5lcXVhbHMoIjcwIikpIHsNCiAgICAgICAgdFJmdHkgPSAiMTUiOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgaWYgKHRQb3RjLmVxdWFscygiODAiKSB8fCB0UG90Yy5lcXVhbHMoIjg1IikpIHsNCiAgICAgICAgICB0UmZ0eSA9ICIzNSI7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdFJmdHkgPSAiMTAiOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIERCQWN0aW9uIHF1ZXJ5Q2lkcmVmID0gZGF0YWJhc2UudGFibGUoIkNJRFJFRiIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiSVJDT05PIiwgIklSU1VOTyIsICJJUlJGVFkiLCAiSVJSRklEIiwgIklSUEhOTyIpLmJ1aWxkKCk7DQogICAgICBEQkNvbnRhaW5lciBjb250YWluZXJDaWRyZWYgPSBxdWVyeUNpZHJlZi5nZXRDb250YWluZXIoKTsNCiAgICAgIGNvbnRhaW5lckNpZHJlZi5zZXQoIklSQ09OTyIsIGN1cnJlbnRDb21wYW55KTsNCiAgICAgIGNvbnRhaW5lckNpZHJlZi5zZXQoIklSU1VOTyIsIHRTdW5vKTsNCiAgICAgIGNvbnRhaW5lckNpZHJlZi5zZXQoIklSUkZUWSIsIHRSZnR5KTsNCiAgICAgIGNvbnRhaW5lckNpZHJlZi5zZXQoIklSUkZJRCIsIHRSZmlkKTsNCg0KICAgICAgaWYgKHF1ZXJ5Q2lkcmVmLnJlYWQoY29udGFpbmVyQ2lkcmVmKSkgew0KICAgICAgICBvUGhubyA9IGNvbnRhaW5lckNpZHJlZi5nZXQoIklSUEhOTyIpOw0KICAgICAgfQ0KDQogICAgICANCiAgICAgIERCQWN0aW9uIHF1ZXJ5Q3JldnRiID0gZGF0YWJhc2UudGFibGUoIkNSRVZUQiIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiUlRDT05PIiwgIlJUUkVWVCIsICJSVFJJRE4iLCAiUlRSRU1LIikuYnVpbGQoKTsNCiAgICAgIERCQ29udGFpbmVyIGNvbnRhaW5lckNyZXZ0YiA9IHF1ZXJ5Q3JldnRiLmdldENvbnRhaW5lcigpOw0KICAgICAgY29udGFpbmVyQ3JldnRiLnNldCgiUlRDT05PIiwgY3VycmVudENvbXBhbnkpOw0KICAgICAgY29udGFpbmVyQ3JldnRiLnNldCgiUlRSRVZUIiwgMSk7DQogICAgICBjb250YWluZXJDcmV2dGIuc2V0KCJSVFJJRE4iLCBlYWNoUHVubyk7DQogICAgICBxdWVyeUNyZXZ0Yi5yZWFkQWxsKGNvbnRhaW5lckNyZXZ0YiwgMywgY2xvc3VyZUNyZXZ0Yik7DQoNCiAgICB9DQoNCiAgICByZXR1cm4gcmVjb3JkRm91bmQ7DQogIH0NCg0KICBDbG9zdXJlIDwgPyA+IGNsb3N1cmVDcmV2dGIgPSB7DQogICAgREJDb250YWluZXIgY29udGFpbmVyUmVjb3JkIC0+DQogICAgb1JlbWsgPSBjb250YWluZXJSZWNvcmQuZ2V0KCJSVFJFTUsiKTsNCiAgfQ0KDQogDQogLyoqDQogICogcmV0cml2ZSBjdXJyZW5jeSBzZXR0aW5nIGZvciBhIGRpdmlzaW9uDQogICogDQogICovDQogICANCiAgcHVibGljIGdldEN1cnJlbmN5Q29udmVyc2lvbihTdHJpbmcgb0RpdmkpIHsNCiAgICBib29sZWFuIHJlY29yZEV4aXN0cyA9IHRydWU7DQogICAgZGVmIGNhbGxiYWNrID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpOw0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBvRG1jdSA9IHJlc3VsdHMuZ2V0KCdETUNVJyk7DQoNCiAgICAgIH0NCiAgICB9DQogICAgZGVmIHBhcmFtcyA9IFsiQ09OTyI6IENPTk8sICJESVZJIjogb0RpdmldOw0KICAgIG1pQ2FsbGVyLmNhbGwoIk1OUzEwME1JIiwgIkdldEJhc2ljRGF0YSIsIHBhcmFtcywgY2FsbGJhY2spOw0KICB9DQoNCiAgLyoqIHJldHJpdmUgc3VwcGxpZXIgZGV0YWlscyB1c2luZyBDUlM2MjBNSS5HZXRCYXNpY0RhdGENCiAgICovDQogICANCiAgcHVibGljIGdldFN1cHBsaWVyTmFtZShTdHJpbmcgb1N1bm8pIHsNCiAgICBib29sZWFuIHJlY29yZEV4aXN0cyA9IHRydWU7DQogICAgZGVmIGNhbGxiYWNrID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpOw0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBvU3VubSA9IHJlc3VsdHMuZ2V0KCdTVU5NJyk7DQoNCiAgICAgIH0NCiAgICB9DQogICAgZGVmIHBhcmFtcyA9IFsiQ09OTyI6IENPTk8sICJTVU5PIjogb1N1bm9dOw0KICAgIG1pQ2FsbGVyLmNhbGwoIkNSUzYyME1JIiwgIkdldEJhc2ljRGF0YSIsIHBhcmFtcywgY2FsbGJhY2spOw0KICB9DQoNCg0KIC8qKg0KICAqIFNlbmQgcHVyY2hhc2Ugb3JkZXIgZGF0YSB0byBvdXRwdXQgQVBJIGZpZWxkcw0KICAqIA0KICAqLw0KICAgDQogIHB1YmxpYyB3cml0ZVB1cmNoYXNlT3JkZXIoKSB7DQogICAgaWYgKG9QdXNsLmVxdWFscygnNDAnKSB8fCBvUHVzbC5lcXVhbHMoJzQ1JykpIHsNCiAgICAgIG1pLm91dERhdGEucHV0KCdSQ1RQJywgJ09IJyk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUFVOTycsIG9QdW5vKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdEQVRFJywgb0RhdGUpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVRFQnLCBvUHVkdCk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnRFdEVCcsIG9Ed2R0KTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdSRU5NJywgb1Jlbm0pOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1NVTk8nLCBvU3Vubyk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnQ1NDRCcsIG9Dc2NkKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdCVVlFJywgb0J1eWUpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0NVQ0QnLCBvQ3VjZCk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnWVJFMScsIG9ZcmUxKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdQSE5PJywgb1Bobm8pOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1RGTk8nLCBvVGZubyk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUkVNSycsIG9SZW1rKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdDT0FNJywgb0NvYW0pOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0RJVkknLCBvRGl2aSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnRkFDSScsIG9GYWNpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdXSExPJywgb1dobG8pOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ09SVFknLCBvT3J0eSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnVEVQWScsIG9UZXB5KTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdNT0RMJywgb01vZGwpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1RFUEEnLCBvVGVwYSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnVEVETCcsIG9UZWRsKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdURUwxJywgb1RlbDEpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1RPUVQnLCBvVG9xdCk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnU1VOTScsIG9TdW5tKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdQVVNMJywgb1B1c2wpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVU1QnLCBvUHVzdCk7DQogICAgICBtaS53cml0ZSgpOw0KICAgIH0NCg0KICAgIGlmIChvUHVzbCA8ICc4NScgJiYgKCFvUHVzbC5lcXVhbHMoJzQwJykgJiYgIW9QdXNsLmVxdWFscygnNDUnKSkpIHsNCiAgICAgIG1pLm91dERhdGEucHV0KCdSQ1RQJywgJ09IJyk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUFVOTycsIG9QdW5vKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdEQVRFJywgb0RhdGUpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVRFQnLCBvUHVkdCk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnRFdEVCcsIG9Ed2R0KTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdSRU5NJywgb1Jlbm0pOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1NVTk8nLCBvU3Vubyk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnQ1NDRCcsIG9Dc2NkKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdCVVlFJywgb0J1eWUpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0NVQ0QnLCBvQ3VjZCk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnWVJFMScsIG9ZcmUxKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdQSE5PJywgb1Bobm8pOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1RGTk8nLCBvVGZubyk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUkVNSycsIG9SZW1rKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdDT0FNJywgb0NvYW0pOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0RJVkknLCBvRGl2aSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnRkFDSScsIG9GYWNpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdXSExPJywgb1dobG8pOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ09SVFknLCBvT3J0eSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnVEVQWScsIG9UZXB5KTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdNT0RMJywgb01vZGwpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1RFUEEnLCBvVGVwYSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnVEVETCcsIG9UZWRsKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdURUwxJywgb1RlbDEpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1RPUVQnLCBvVG9xdCk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnU1VOTScsIG9TdW5tKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdQVVNMJywgb1B1c2wpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVU1QnLCBvUHVzdCk7DQogICAgICBtaS53cml0ZSgpOw0KICAgIH0NCiAgfQ0KDQoNCiAvKioNCiAgKiBHZXQgY2hhcmdlcyBmb3IgZWFjaCBwdXJjaGFzZSBvcmRlciBmcm9tIHRhYmxlIE1QT0VYUA0KICAqIA0KICAqLw0KICAgDQogICANCiAgcHJpdmF0ZSBnZXRDaGFyZ2VzKFN0cmluZyBlYWNoUHVubykgew0KICAgIGNoYXJnZUxpc3QgPSBuZXcgQXJyYXlMaXN0IDwgSGFzaHRhYmxlID4gKCk7DQogICAgREJBY3Rpb24gcXVlcnlNcG9leHAgPSBkYXRhYmFzZS50YWJsZSgiTVBPRVhQIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJJVkNPTk8iLCAiSVZQVU5PIiwgIklWUE5MSSIsICJJVlBOTFMiLCAiSVZDRFNFIiwgIklWUkVQTiIsICJJVkVYVFkiLCAiSVZDRUlEIiwgIklWRVhJQyIsICJJVldTT1AiLCAiSVZDVUNEIiwgIklWQ0VWQSIsICJJVkNFVkoiLCAiSVZUSFBSIiwgIklWSVZDUSIsICJJVkFDSU4iKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIHJlY29yZE1wb2V4cCA9IHF1ZXJ5TXBvZXhwLmdldENvbnRhaW5lcigpOw0KICAgIHJlY29yZE1wb2V4cC5zZXQoIklWQ09OTyIsIEludGVnZXIucGFyc2VJbnQoQ09OTy50cmltKCkpKTsNCiAgICByZWNvcmRNcG9leHAuc2V0KCJJVlBVTk8iLCBlYWNoUHVuby50cmltKCkpOw0KICAgIHJlY29yZE1wb2V4cC5zZXQoIklWUE5MSSIsIDApOw0KICAgIHJlY29yZE1wb2V4cC5zZXQoIklWUE5MUyIsIDApOw0KICAgIA0KICAgIGludCByZWFkcyA9IHF1ZXJ5TXBvZXhwLnJlYWRBbGwocmVjb3JkTXBvZXhwLCA0LCBnZXRNcG9leHBSZWNvcmRzKTsNCg0KICB9DQoNCiAgQ2xvc3VyZSA8ID8gPiBnZXRNcG9leHBSZWNvcmRzID0gew0KICAgIERCQ29udGFpbmVyIHJlY29yZCAtPg0KICAgIFN0cmluZyBQTkxJID0gcmVjb3JkLmdldCgnSVZQTkxJJyk7DQogICAgU3RyaW5nIFBOTFMgPSByZWNvcmQuZ2V0KCdJVlBOTFMnKTsNCiAgICBTdHJpbmcgQ0RTRSA9IHJlY29yZC5nZXQoJ0lWQ0RTRScpOw0KICAgIFN0cmluZyBSRVBOID0gcmVjb3JkLmdldCgnSVZSRVBOJyk7DQogICAgU3RyaW5nIEVYVFkgPSByZWNvcmQuZ2V0KCdJVkVYVFknKTsNCiAgICBTdHJpbmcgQ0VJRCA9IHJlY29yZC5nZXQoJ0lWQ0VJRCcpOw0KICAgIFN0cmluZyBFWElDID0gcmVjb3JkLmdldCgnSVZFWElDJyk7DQogICAgU3RyaW5nIFdTT1AgPSByZWNvcmQuZ2V0KCdJVldTT1AnKTsNCiAgICBTdHJpbmcgQ1VDRCA9IHJlY29yZC5nZXQoJ0lWQ1VDRCcpOw0KICAgIFN0cmluZyBDRVZBID0gcmVjb3JkLmdldCgnSVZDRVZBJyk7DQogICAgU3RyaW5nIENFVkogPSByZWNvcmQuZ2V0KCdJVkNFVkonKTsNCiAgICBTdHJpbmcgVEhQUiA9IHJlY29yZC5nZXQoJ0lWVEhQUicpOw0KICAgIFN0cmluZyBJVkNRID0gcmVjb3JkLmdldCgnSVZJVkNRJyk7DQogICAgDQogICAgU3RyaW5nIEFDSU4gPSByZWNvcmQuZ2V0KCdJVkFDSU4nKTsNCiAgICBIYXNodGFibGUgdGVtcFRhYmxlID0gbmV3IEhhc2h0YWJsZSA8IFN0cmluZywNCiAgICBTdHJpbmcgPiAoKTsNCiAgICB0ZW1wVGFibGUucHV0KCdQTkxJJywgUE5MSSk7DQogICAgdGVtcFRhYmxlLnB1dCgnUE5MUycsIFBOTFMpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0NEU0UnLCBDRFNFKTsNCiAgICB0ZW1wVGFibGUucHV0KCdSRVBOJywgUkVQTik7DQogICAgdGVtcFRhYmxlLnB1dCgnRVhUWScsIEVYVFkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0NFSUQnLCBDRUlEKTsNCiAgICB0ZW1wVGFibGUucHV0KCdFWElDJywgRVhJQyk7DQogICAgdGVtcFRhYmxlLnB1dCgnV1NPUCcsIFdTT1ApOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0NVQ0QnLCBDVUNEKTsNCiAgICB0ZW1wVGFibGUucHV0KCdDRVZBJywgQ0VWQSk7DQogICAgdGVtcFRhYmxlLnB1dCgnQ0VWSicsIENFVkopOw0KICAgIHRlbXBUYWJsZS5wdXQoJ1RIUFInLCBUSFBSKTsNCiAgICB0ZW1wVGFibGUucHV0KCdJVkNRJywgSVZDUSk7DQogICAgdGVtcFRhYmxlLnB1dCgnQUNJTicsIEFDSU4pOw0KICAgIGNoYXJnZUxpc3QuYWRkKHRlbXBUYWJsZSk7DQoNCiAgfQ0KDQogLyoqDQogICogc2VuZCBjaGFyZ2UgZGV0YWlscyB0byBvdXRwdXQgYXBpIGZpZWxkcw0KICAqIA0KICAqLw0KICAgDQogIHB1YmxpYyB3cml0ZUNoYXJnZXMoU3RyaW5nIGVhY2hQdW5vLCBIYXNodGFibGUgZWFjaENoYXJnZSkgew0KICAgIFN0cmluZyBDRUlEID0gZWFjaENoYXJnZS5nZXQoJ0NFSUQnKTsNCiAgICBTdHJpbmcgVFgzMCA9ICIiOw0KICAgIGJvb2xlYW4gcmVjb3JkRXhpc3RzID0gdHJ1ZTsNCiAgICBkZWYgY2FsbGJhY2sgPSB7DQogICAgICBNYXAgPCBTdHJpbmcsDQogICAgICBTdHJpbmcgPiByZXN1bHRzIC0+DQogICAgICByZWNvcmRFeGlzdHMgPSAhcmVzdWx0cy5nZXQoJ2Vycm9yJyk7DQogICAgICBpZiAocmVjb3JkRXhpc3RzKSB7DQogICAgICAgIFRYMzAgPSByZXN1bHRzLmdldCgnVFgzMCcpOw0KDQogICAgICB9DQogICAgICBTdHJpbmcgUE5MSSA9IGVhY2hDaGFyZ2UuZ2V0KCdQTkxJJyk7DQogICAgICBTdHJpbmcgUE5MUyA9IGVhY2hDaGFyZ2UuZ2V0KCdQTkxTJyk7DQogICAgICBTdHJpbmcgQ0RTRSA9IGVhY2hDaGFyZ2UuZ2V0KCdDRFNFJyk7DQogICAgICBTdHJpbmcgUkVQTiA9IGVhY2hDaGFyZ2UuZ2V0KCdSRVBOJyk7DQogICAgICBTdHJpbmcgRVhUWSA9IGVhY2hDaGFyZ2UuZ2V0KCdFWFRZJyk7DQogICAgICBTdHJpbmcgRVhJQyA9IGVhY2hDaGFyZ2UuZ2V0KCdFWElDJyk7DQogICAgICBTdHJpbmcgV1NPUCA9IGVhY2hDaGFyZ2UuZ2V0KCdXU09QJyk7DQogICAgICBTdHJpbmcgQ1VDRCA9IGVhY2hDaGFyZ2UuZ2V0KCdDVUNEJyk7DQogICAgICBTdHJpbmcgQ0VWQSA9IGVhY2hDaGFyZ2UuZ2V0KCdDRVZBJyk7DQogICAgICBTdHJpbmcgQ0VWSiA9IGVhY2hDaGFyZ2UuZ2V0KCdDRVZKJyk7DQogICAgICBTdHJpbmcgVEhQUiA9IGVhY2hDaGFyZ2UuZ2V0KCdUSFBSJyk7DQogICAgICBTdHJpbmcgSVZDUSA9IGVhY2hDaGFyZ2UuZ2V0KCdJVkNRJyk7DQogICAgICBTdHJpbmcgQUNJTiA9IGVhY2hDaGFyZ2UuZ2V0KCdBQ0lOJyk7DQoNCiAgICAgIG1pLm91dERhdGEucHV0KCdSQ1RQJywgJ09DJyk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUFVOTycsIGVhY2hQdW5vKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdDRFNFJywgQ0RTRSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUkVQTicsIFJFUE4pOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0VYVFknLCBFWFRZKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdFWElDJywgRVhJQyk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnV1NPUCcsIFdTT1ApOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0NDVUMnLCBDVUNEKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdDRVZBJywgQ0VWQSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnQ0VWSicsIENFVkopOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1RIUFInLCBUSFBSKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdJVkNRJywgSVZDUSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnVFgzMCcsIFRYMzApOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0NFSUQnLCBDRUlEKTsNCiAgICAgIG1pLndyaXRlKCk7DQogICAgfQ0KICAgIGRlZiBwYXJhbXMgPSBbIkNFSUQiOiBDRUlELnRyaW0oKV07DQogICAgbWlDYWxsZXIuY2FsbCgiUFBTMjgwTUkiLCAiR2V0RWxlbWVudCIsIHBhcmFtcywgY2FsbGJhY2spOw0KDQogIH0NCg0KDQogLyoqDQogICogUmV0cml2ZSBwdXJjaGFzZSBvcmRlciBsaW5lIGRldGFpbHMgZnJvbSBNUExJTkUNCiAgKiANCiAgKi8NCg0KICBwdWJsaWMgZ2V0TGluZURldGFpbHMoU3RyaW5nIGVhY2hQdW5vKSB7DQoNCiAgICBsaW5lTGlzdCA9IG5ldyBBcnJheUxpc3QgPCBIYXNodGFibGUgPiAoKTsNCiAgICBpbnQgY3VycmVudENvbXBhbnkgPSAoSW50ZWdlcikgcHJvZ3JhbS5nZXRMREFaRCgpLkNPTk87DQoNCiAgICBEQkFjdGlvbiBxdWVyeU1wbGluZSA9IGRhdGFiYXNlLnRhYmxlKCJNUExJTkUiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIklCQ09OTyIsICJJQlBVTk8iLCAiSUJQTkxJIiwgIklCUE5MUyIsICJJQklUTk8iLCAiSUJTSVRFIiwgIklCQ0ZRQSIsICJJQlBVVU4iLCAiSUJXSExPIiwgIklCUFVTVCIsICJJQlBVU0wiLCAiSUJTVU5PIiwgIklCUElURCIsICJJQlBJVFQiLCAiSUJQVVBSIiwgIklCQ1BQUiIsICJJQkNGRDEiLCAiSUJDRkQyIiwgIklCQ0ZEMyIsICJJQlBQVU4iLCAiSUJQVUNEIiwgIklCTE5BTSIsICJJQlBUQ0QiLCAiSUJWVENEIiwgIklCT1JRQSIsICJJQkFEUUEiLCAiSUJSVlFBIiwgIklCQ0FRQSIsICJJQlJKUUEiLCAiSUJTRFFBIiwgIklCSVZRQSIsICJJQlBVUkMiLCAiSUJCVVlFIiwgIklCR1JNVCIsICJJQlJPUkMiLCAiSUJST1JOIiwgIklCUk9STCIsICJJQlJPUlgiLCAiSUJNT0RMIiwgIklCVEVETCIsICJJQlRFTDEiLCAiSUJUTlFBIikuYnVpbGQoKTsNCiAgICBEQkNvbnRhaW5lciBjb250YWluZXJNcGxpbmUgPSBxdWVyeU1wbGluZS5nZXRDb250YWluZXIoKTsNCiAgICBjb250YWluZXJNcGxpbmUuc2V0KCJJQkNPTk8iLCBjdXJyZW50Q29tcGFueSk7DQogICAgY29udGFpbmVyTXBsaW5lLnNldCgiSUJQVU5PIiwgZWFjaFB1bm8pOw0KDQogICAgcXVlcnlNcGxpbmUucmVhZEFsbChjb250YWluZXJNcGxpbmUsIDIsIGNsb3N1cmVNcGxpbmUpOw0KDQogIH0NCg0KICBDbG9zdXJlIDwgPyA+IGNsb3N1cmVNcGxpbmUgPSB7DQogICAgREJDb250YWluZXIgY29udGFpbmVyTXBsaW5lIC0+DQoNCiAgICBIYXNodGFibGUgdGVtcFRhYmxlID0gbmV3IEhhc2h0YWJsZSA8IFN0cmluZywNCiAgICBTdHJpbmcgPiAoKTsNCiAgICB0ZW1wVGFibGUucHV0KCdQTkxJJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJQTkxJJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnUE5MUycsIGNvbnRhaW5lck1wbGluZS5nZXQoJ0lCUE5MUycpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0lUTk8nLCBjb250YWluZXJNcGxpbmUuZ2V0KCdJQklUTk8nKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdTSVRFJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJTSVRFJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnQ0ZRQScsIGNvbnRhaW5lck1wbGluZS5nZXQoJ0lCQ0ZRQScpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ1BVVU4nLCBjb250YWluZXJNcGxpbmUuZ2V0KCdJQlBVVU4nKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdXSExPJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJXSExPJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnUFVTVCcsIGNvbnRhaW5lck1wbGluZS5nZXQoJ0lCUFVTVCcpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ1BVU0wnLCBjb250YWluZXJNcGxpbmUuZ2V0KCdJQlBVU0wnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdTVU5PJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJTVU5PJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnUElURCcsIGNvbnRhaW5lck1wbGluZS5nZXQoJ0lCUElURCcpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ1BJVFQnLCBjb250YWluZXJNcGxpbmUuZ2V0KCdJQlBJVFQnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdQVVBSJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJQVVBSJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnQ1BQUicsIGNvbnRhaW5lck1wbGluZS5nZXQoJ0lCQ1BQUicpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0NGRDEnLCBjb250YWluZXJNcGxpbmUuZ2V0KCdJQkNGRDEnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdDRkQyJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJDRkQyJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnQ0ZEMycsIGNvbnRhaW5lck1wbGluZS5nZXQoJ0lCQ0ZEMycpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ1BQVU4nLCBjb250YWluZXJNcGxpbmUuZ2V0KCdJQlBQVU4nKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdQVUNEJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJQVUNEJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnTE5BTScsIGNvbnRhaW5lck1wbGluZS5nZXQoJ0lCTE5BTScpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ1BUQ0QnLCBjb250YWluZXJNcGxpbmUuZ2V0KCdJQlBUQ0QnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdWVENEJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJWVENEJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnT1JRQScsIGNvbnRhaW5lck1wbGluZS5nZXQoJ0lCT1JRQScpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0FEUUEnLCBjb250YWluZXJNcGxpbmUuZ2V0KCdJQkFEUUEnKS50b1N0cmluZygpKTsNCgl0ZW1wVGFibGUucHV0KCdUTlFBJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJUTlFBJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnUlZRQScsIGNvbnRhaW5lck1wbGluZS5nZXQoJ0lCUlZRQScpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0NBUUEnLCBjb250YWluZXJNcGxpbmUuZ2V0KCdJQkNBUUEnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdSSlFBJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJSSlFBJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnU0RRQScsIGNvbnRhaW5lck1wbGluZS5nZXQoJ0lCU0RRQScpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0lWUUEnLCBjb250YWluZXJNcGxpbmUuZ2V0KCdJQklWUUEnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdQVVJDJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJQVVJDJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnQlVZRScsIGNvbnRhaW5lck1wbGluZS5nZXQoJ0lCQlVZRScpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0dSTVQnLCBjb250YWluZXJNcGxpbmUuZ2V0KCdJQkdSTVQnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdWVENEJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJWVENEJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnUk9SQycsIGNvbnRhaW5lck1wbGluZS5nZXQoJ0lCUk9SQycpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ1JPUk4nLCBjb250YWluZXJNcGxpbmUuZ2V0KCdJQlJPUk4nKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdST1JMJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJST1JMJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnUk9SWCcsIGNvbnRhaW5lck1wbGluZS5nZXQoJ0lCUk9SWCcpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ01PREwnLCBjb250YWluZXJNcGxpbmUuZ2V0KCdJQk1PREwnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdURURMJywgY29udGFpbmVyTXBsaW5lLmdldCgnSUJURURMJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnVEVMMScsIGNvbnRhaW5lck1wbGluZS5nZXQoJ0lCVEVMMScpLnRvU3RyaW5nKCkpOw0KDQogICAgaW50IGN1cnJlbnRDb21wYW55ID0gKEludGVnZXIpIHByb2dyYW0uZ2V0TERBWkQoKS5DT05POw0KDQogICAgDQogICAgU3RyaW5nIHRJdG5vID0gY29udGFpbmVyTXBsaW5lLmdldCgnSUJJVE5PJykudG9TdHJpbmcoKTsNCiAgICBTdHJpbmcgdFVubXMgPSAiIjsNCiAgICBTdHJpbmcgdEN3dW4gPSAiIjsNCiAgICBTdHJpbmcgdERjY2QgPSAiMCI7DQogICAgU3RyaW5nIHRQZGNjID0gIjAiOw0KICAgIFN0cmluZyBkZWNpbWFsWmVyb2VzID0gIiI7DQoNCiAgICBEQkFjdGlvbiBxdWVyeU1pdG1hcyA9IGRhdGFiYXNlLnRhYmxlKCJNSVRNQVMiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIk1NQ09OTyIsICJNTUlUTk8iLCAiTU1VTk1TIiwgIk1NRENDRCIsICJNTVBEQ0MiLCAiTU1DV1VOIikuYnVpbGQoKTsNCiAgICBEQkNvbnRhaW5lciBjb250YWluZXJNaXRtYXMgPSBxdWVyeU1pdG1hcy5nZXRDb250YWluZXIoKTsNCiAgICBjb250YWluZXJNaXRtYXMuc2V0KCJNTUNPTk8iLCBjdXJyZW50Q29tcGFueSk7DQogICAgY29udGFpbmVyTWl0bWFzLnNldCgiTU1JVE5PIiwgdEl0bm8pOw0KDQogICAgaWYgKHF1ZXJ5TWl0bWFzLnJlYWQoY29udGFpbmVyTWl0bWFzKSkgew0KDQogICAgICB0VW5tcyA9IGNvbnRhaW5lck1pdG1hcy5nZXQoIk1NVU5NUyIpOw0KICAgICAgdEN3dW4gPSBjb250YWluZXJNaXRtYXMuZ2V0KCJNTUNXVU4iKTsNCiAgICAgIHREY2NkID0gY29udGFpbmVyTWl0bWFzLmdldCgiTU1EQ0NEIik7DQogICAgICB0UGRjYyA9IGNvbnRhaW5lck1pdG1hcy5nZXQoIk1NUERDQyIpOw0KDQogICAgICANCiAgICAgIGludCBkY2NkID0gSW50ZWdlci5wYXJzZUludCh0RGNjZCk7DQogICAgICBpZiAoZGNjZCA+IDApIHsNCiAgICAgICAgZGVjaW1hbFplcm9lcyA9ICIuIjsNCg0KICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGRjY2Q7IGkrKykgew0KICAgICAgICAgIGRlY2ltYWxaZXJvZXMgPSBkZWNpbWFsWmVyb2VzICsgIjAiOw0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KDQogICAgdGVtcFRhYmxlLnB1dCgnVU5NUycsIHRVbm1zKTsNCiAgICB0ZW1wVGFibGUucHV0KCdDV1VOJywgdEN3dW4pOw0KDQogICAgDQogICAgU3RyaW5nIHREbWNmID0gIjEiOw0KICAgIFN0cmluZyB0Q29mYSA9ICIxIjsNCiAgICBTdHJpbmcgdFB1dW4gPSBjb250YWluZXJNcGxpbmUuZ2V0KCdJQlBVVU4nKS50b1N0cmluZygpOw0KICAgIGJvb2xlYW4gZXhpc3RNaXRhdW4gPSBmYWxzZTsNCg0KICAgIERCQWN0aW9uIHF1ZXJ5TWl0YXVuID0gZGF0YWJhc2UudGFibGUoIk1JVEFVTiIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiTVVDT05PIiwgIk1VSVROTyIsICJNVUFVVFAiLCAiTVVBTFVOIiwgIk1VRE1DRiIsICJNVUNPRkEiKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lck1pdGF1biA9IHF1ZXJ5TWl0YXVuLmdldENvbnRhaW5lcigpOw0KICAgIGNvbnRhaW5lck1pdGF1bi5zZXQoIk1VQ09OTyIsIGN1cnJlbnRDb21wYW55KTsNCiAgICBjb250YWluZXJNaXRhdW4uc2V0KCJNVUlUTk8iLCB0SXRubyk7DQogICAgY29udGFpbmVyTWl0YXVuLnNldCgiTVVBVVRQIiwgMSk7DQogICAgY29udGFpbmVyTWl0YXVuLnNldCgiTVVBTFVOIiwgdFB1dW4pOw0KDQogICAgaWYgKHF1ZXJ5TWl0YXVuLnJlYWQoY29udGFpbmVyTWl0YXVuKSkgew0KICAgICAgZXhpc3RNaXRhdW4gPSB0cnVlOw0KICAgICAgdERtY2YgPSBjb250YWluZXJNaXRhdW4uZ2V0KCJNVURNQ0YiKTsNCiAgICAgIHRDb2ZhID0gY29udGFpbmVyTWl0YXVuLmdldCgiTVVDT0ZBIik7DQogICAgfQ0KDQogICAgDQogICAgU3RyaW5nIHRPcnF0ID0gY29udGFpbmVyTXBsaW5lLmdldCgnSUJPUlFBJykudG9TdHJpbmcoKTsNCg0KICAgIGRvdWJsZSB0UHhudW0gPSBEb3VibGUucGFyc2VEb3VibGUodE9ycXQpOw0KDQogICAgRGVjaW1hbEZvcm1hdCBkZiA9IG5ldyBEZWNpbWFsRm9ybWF0KCIjIyMjIyMjIyMjIzAiICsgZGVjaW1hbFplcm9lcyk7DQogICAgdE9ycXQgPSAiIiArIGRmLmZvcm1hdCh0UHhudW0pOw0KDQogICAgdGVtcFRhYmxlLnB1dCgnT1JRVCcsIHRPcnF0KTsNCg0KICAgIA0KICAgIHRlbXBUYWJsZS5wdXQoJ0xPQ0QnLCBwcm9ncmFtLmdldExEQVpEKCkuTE9DRC50b1N0cmluZygpKTsNCg0KICAgIA0KICAgIFN0cmluZyB0UHVxdCA9IGNvbnRhaW5lck1wbGluZS5nZXQoJ0lCUFVDRCcpLnRvU3RyaW5nKCk7DQoNCiAgICB0UHhudW0gPSBEb3VibGUucGFyc2VEb3VibGUodFB1cXQpOw0KDQogICAgaWYgKCF0UHV1bi5lcXVhbHModFVubXMpKSB7DQoNCiAgICAgIGlmIChleGlzdE1pdGF1bikgew0KDQogICAgICAgIGlmICh0RG1jZi5lcXVhbHMoIjIiKSkgew0KICAgICAgICAgIHRQeG51bSA9IHRQeG51bSAqIERvdWJsZS5wYXJzZURvdWJsZSh0Q29mYSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdFB4bnVtID0gdFB4bnVtIC8gRG91YmxlLnBhcnNlRG91YmxlKHRDb2ZhKTsNCiAgICAgICAgfQ0KDQogICAgICB9DQoNCiAgICB9DQoNCiAgICBkZiA9IG5ldyBEZWNpbWFsRm9ybWF0KCIjIyMjIyMjIyMjIzAiICsgZGVjaW1hbFplcm9lcyk7DQogICAgdFB1cXQgPSAiIiArIGRmLmZvcm1hdCh0UHhudW0pOw0KICAgIHRlbXBUYWJsZS5wdXQoJ1BVUVQnLCB0UHVxdCk7DQoNCiAgICANCiAgICBTdHJpbmcgdFJ2cXQgPSBjb250YWluZXJNcGxpbmUuZ2V0KCdJQlJWUUEnKS50b1N0cmluZygpOw0KDQogICAgdFB4bnVtID0gRG91YmxlLnBhcnNlRG91YmxlKHRSdnF0KTsNCg0KICAgIGRmID0gbmV3IERlY2ltYWxGb3JtYXQoIiMjIyMjIyMjIyMjMCIgKyBkZWNpbWFsWmVyb2VzKTsNCiAgICB0UnZxdCA9ICIiICsgZGYuZm9ybWF0KHRQeG51bSk7DQogICAgdGVtcFRhYmxlLnB1dCgnUlZRVCcsIHRSdnF0KTsNCg0KICAgIGxpbmVMaXN0LmFkZCh0ZW1wVGFibGUpOw0KDQogIH0NCg0KDQogLyoqDQogICogUmV0cml2ZSBVbml0IG9mIE1lYXN1cmVtZW50IGZyb20gdGFibGUgTUlUQVVODQogICogDQogICovDQogICANCiAgcHVibGljIGdldFVuaXRPZk1lYXN1cmVtZW50Q29udmVyc2lvbihIYXNodGFibGUgZWFjaExpbmUpIHsNCiAgICBTdHJpbmcgSVROTyA9IGVhY2hMaW5lLmdldCgnSVROTycpOw0KICAgIGVhY2hMaW5lUHV1biA9IGVhY2hMaW5lLmdldCgnUFVVTicpOw0KICAgIGVhY2hMaW5lUHB1biA9IGVhY2hMaW5lLmdldCgnUFBVTicpOw0KICAgIGludCBjdXJyZW50Q29tcGFueSA9IHByb2dyYW0uZ2V0TERBWkQoKS5DT05POw0KDQogICAgREJBY3Rpb24gcXVlcnlNaXRhdW4gPSBkYXRhYmFzZS50YWJsZSgiTUlUQVVOIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJNVUNPTk8iLCAiTVVJVE5PIiwgIk1VQVVUUCIsICJNVUFMVU4iLCAiTVVETUNGIiwgIk1VQ09GQSIsICJNVURDQ0QiKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lck1pdGF1biA9IHF1ZXJ5TWl0YXVuLmdldENvbnRhaW5lcigpOw0KICAgIGNvbnRhaW5lck1pdGF1bi5zZXQoIk1VQ09OTyIsIGN1cnJlbnRDb21wYW55KTsNCiAgICBjb250YWluZXJNaXRhdW4uc2V0KCJNVUlUTk8iLCBJVE5PKTsNCiAgICBxdWVyeU1pdGF1bi5yZWFkQWxsKGNvbnRhaW5lck1pdGF1biwgMiwgY2xvc3VyZU1pdGF1bik7DQoNCiAgfQ0KDQogIENsb3N1cmUgPCA/ID4gY2xvc3VyZU1pdGF1biA9IHsNCiAgICBEQkNvbnRhaW5lciBjb250YWluZXJNaXRhdW4gLT4NCg0KICAgIFN0cmluZyBBVVRQID0gY29udGFpbmVyTWl0YXVuLmdldCgnTVVBVVRQJyk7DQogICAgQVVUUEEgPSBBVVRQOw0KICAgIFN0cmluZyBBTFVOID0gY29udGFpbmVyTWl0YXVuLmdldCgnTVVBTFVOJyk7DQogICAgU3RyaW5nIERDQ0QgPSBjb250YWluZXJNaXRhdW4uZ2V0KCdNVURDQ0QnKTsNCiAgICBTdHJpbmcgQ09GQSA9IGNvbnRhaW5lck1pdGF1bi5nZXQoJ01VQ09GQScpOw0KICAgIFN0cmluZyBETUNGID0gY29udGFpbmVyTWl0YXVuLmdldCgnTVVETUNGJyk7DQogICAgaWYgKEFMVU4udHJpbSgpLmVxdWFscyhlYWNoTGluZVB1dW4udHJpbSgpKSAmJiBBVVRQLnRyaW0oKS5lcXVhbHMoIjEiKSkgew0KICAgICAgb3JkZXJVbURjY2QgPSBEQ0NEOw0KICAgICAgb3JkZXJVbUNvZmEgPSBDT0ZBOw0KICAgICAgb3JkZXJVbURtY2YgPSBETUNGOw0KICAgIH0NCiAgICBpZiAoQUxVTi50cmltKCkuZXF1YWxzKGVhY2hMaW5lUHB1bi50cmltKCkpKSB7DQogICAgICBpZiAoQVVUUC50cmltKCkuZXF1YWxzKCIxIikpIHsNCiAgICAgICAgcHJpY2VVbURjY2QgPSBEQ0NEOw0KICAgICAgfQ0KICAgICAgaWYgKEFVVFAudHJpbSgpLmVxdWFscygiMiIpKSB7DQogICAgICAgIHByaWNlVW1Db2ZhID0gQ09GQTsNCiAgICAgICAgcHJpY2VVbURtY2YgPSBETUNGOw0KICAgICAgfQ0KICAgIH0NCiAgfQ0KICANCiAvKioNCiAgKiBnZXQgYmFzaWMgZGVjaW1hbCBjb2RlIGZvciBJdGVtIGFuZCBvcmRlciBxdWFudGl0eUludm9pY2VkDQogICogDQogICovDQogICANCiAgcHVibGljIGdldEJhc2ljRGVjaW1hbENvZGUoSGFzaHRhYmxlIGVhY2hMaW5lKSB7DQogICAgU3RyaW5nIElUTk8gPSBlYWNoTGluZS5nZXQoJ0lUTk8nKTsNCiAgICBTdHJpbmcgT1JRQSA9IGVhY2hMaW5lLmdldCgnT1JRQScpOw0KICAgIFN0cmluZyBBRFFBID0gZWFjaExpbmUuZ2V0KCdBRFFBJyk7DQoJU3RyaW5nIFROUUEgPSBlYWNoTGluZS5nZXQoJ1ROUUEnKTsNCiAgICBTdHJpbmcgT1JRVCA9IGVhY2hMaW5lLmdldCgnT1JRVCcpOw0KICAgIGJvb2xlYW4gcmVjb3JkRXhpc3RzID0gdHJ1ZTsNCiAgICBkZWYgY2FsbGJhY2sgPSB7DQogICAgICBNYXAgPCBTdHJpbmcsDQogICAgICBTdHJpbmcgPiByZXN1bHRzIC0+DQogICAgICByZWNvcmRFeGlzdHMgPSAhcmVzdWx0cy5nZXQoJ2Vycm9yJyk7DQogICAgICBpZiAocmVjb3JkRXhpc3RzKSB7DQogICAgICAgIGJhc2ljVW1EY2NkID0gcmVzdWx0cy5nZXQoJ0RDQ0QnKTsNCiAgICAgIH0NCiAgICAgIGlmIChBRFFBICE9IG51bGwgJiYgQURRQS50cmltKCkuaXNFbXB0eSgpKSB7DQogICAgICAgIEJpZ0RlY2ltYWwgYWR2aXNlZFF1YW50aXR5ID0gbmV3IEJpZ0RlY2ltYWwoQURRQSk7DQogICAgICAgIGlmIChhZHZpc2VkUXVhbnRpdHkuY29tcGFyZVRvKEJpZ0RlY2ltYWwuWkVSTykgIT0gMCkgew0KICAgICAgICAgIGJhc2ljVW1EY2NkID0gYmFzaWNVbURjY2QuZXF1YWxzKCIiKSA/ICIyIiA6IGJhc2ljVW1EY2NkOw0KICAgICAgICAgIG9yZGVyVW1Db2ZhID0gb3JkZXJVbUNvZmEuZXF1YWxzKCIiKSA/ICIxIiA6IG9yZGVyVW1Db2ZhLnRyaW0oKTsNCiAgICAgICAgICBvcmRlclVtRG1jZiA9IG9yZGVyVW1EbWNmLmVxdWFscygiIikgPyAiMSIgOiBvcmRlclVtRG1jZi50cmltKCk7DQoNCiAgICAgICAgICBCaWdEZWNpbWFsIG9yZGVyZWRRdWFudGl0eSA9IG5ldyBCaWdEZWNpbWFsKE9SUUEpOw0KICAgICAgICAgIEJpZ0RlY2ltYWwgY29udmVyc2lvbkZhY3RvciA9IG5ldyBCaWdEZWNpbWFsKG9yZGVyVW1Db2ZhKTsNCiAgICAgICAgICBCaWdJbnRlZ2VyIGRlY2ltYWxQbGFjZXMgPSBuZXcgQmlnSW50ZWdlcihiYXNpY1VtRGNjZCk7DQoNCiAgICAgICAgICBCaWdEZWNpbWFsIGJhc2VRdWFudGl0eSA9IG51bGw7DQoNCiAgICAgICAgICBpZiAob3JkZXJVbURtY2YuZXF1YWxzKCIxIikpIHsNCiAgICAgICAgICAgIGJhc2VRdWFudGl0eSA9IG9yZGVyZWRRdWFudGl0eS5zZXRTY2FsZSg4LCBSb3VuZGluZ01vZGUuSEFMRl9VUCkubXVsdGlwbHkoY29udmVyc2lvbkZhY3Rvcik7DQogICAgICAgICAgICBPUlFUID0gYmFzZVF1YW50aXR5LnNldFNjYWxlKGRlY2ltYWxQbGFjZXMuaW50VmFsdWUoKSwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgYmFzZVF1YW50aXR5ID0gb3JkZXJlZFF1YW50aXR5LnNldFNjYWxlKDgsIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS5kaXZpZGUoY29udmVyc2lvbkZhY3RvciwgUm91bmRpbmdNb2RlLkhBTEZfVVApOw0KICAgICAgICAgICAgT1JRVCA9IGJhc2VRdWFudGl0eS5zZXRTY2FsZShkZWNpbWFsUGxhY2VzLmludFZhbHVlKCksIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCk7DQogICAgICAgICAgfQ0KICAgICAgICAgIGVhY2hMaW5lLnJlcGxhY2UoJ09SUVQnLCBPUlFUKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgICBkZWYgcGFyYW1zID0gWyJDT05PIjogQ09OTywgIklUTk8iOiBJVE5PXTsNCiAgICBtaUNhbGxlci5jYWxsKCJNTVMyMDBNSSIsICJHZXRJdG1CYXNpYyIsIHBhcmFtcywgY2FsbGJhY2spOw0KICB9DQoNCg0KIC8qKg0KICAqIFNlbmQgcHVyY2hhc2Ugb3JkZXIgbGluZSBkZXRhaWxzIHRvIG91dHB1dCBhcGkgZmllbGRzDQogICogDQogICovDQogICANCiAgcHVibGljIHdyaXRlUHVyY2hhc2VMaW5lKFN0cmluZyBlYWNoUHVubywgSGFzaHRhYmxlIGVhY2hMaW5lKSB7DQogICAgU3RyaW5nIGNvbnZlcnRlZEFtb3VudCA9ICIiOw0KICAgIGRvdWJsZSBxdHlPcGVuID0gRG91YmxlLnBhcnNlRG91YmxlKGVhY2hMaW5lLmdldCgnVE5RQScpLnRvU3RyaW5nKCkpIC0gRG91YmxlLnBhcnNlRG91YmxlKGVhY2hMaW5lLmdldCgnSVZRQScpLnRvU3RyaW5nKCkpIA0KICAgIGRvdWJsZSBpbnZSZW0gPSBEb3VibGUucGFyc2VEb3VibGUoZWFjaExpbmUuZ2V0KCdUTlFBJykudG9TdHJpbmcoKSkgLSBEb3VibGUucGFyc2VEb3VibGUoZWFjaExpbmUuZ2V0KCdJVlFBJykudG9TdHJpbmcoKSkNCiAgICANCiAgICBkb3VibGUgbGluT2FvdTEgPSAoRG91YmxlLnBhcnNlRG91YmxlKGVhY2hMaW5lLmdldCgnTE5BTScpLnRvU3RyaW5nKCkpIC8gRG91YmxlLnBhcnNlRG91YmxlKGVhY2hMaW5lLmdldCgnT1JRQScpLnRvU3RyaW5nKCkpICogRG91YmxlLnBhcnNlRG91YmxlKGVhY2hMaW5lLmdldCgnVE5RQScpLnRvU3RyaW5nKCkpKSANCiAgICBkb3VibGUgbGluT2FvdTIgPSAoRG91YmxlLnBhcnNlRG91YmxlKGVhY2hMaW5lLmdldCgnTE5BTScpLnRvU3RyaW5nKCkpIC8gRG91YmxlLnBhcnNlRG91YmxlKGVhY2hMaW5lLmdldCgnT1JRQScpLnRvU3RyaW5nKCkpICogRG91YmxlLnBhcnNlRG91YmxlKGVhY2hMaW5lLmdldCgnSVZRQScpLnRvU3RyaW5nKCkpKQ0KCSAgZG91YmxlIGxpbk9hb3UgPSBsaW5PYW91MSAtIGxpbk9hb3UyDQoJIA0KICAgIERlY2ltYWxGb3JtYXQgZGVjT2JqZWN0ID0gbmV3IERlY2ltYWxGb3JtYXQoIiMuIyMiKTsNCiAgICBjb252ZXJ0ZWRBbW91bnQgPSBkZWNPYmplY3QuZm9ybWF0KGxpbk9hb3UpOw0KICAgIA0KICAgIGlmIChlYWNoTGluZS5nZXQoJ1BVU0wnKS50b1N0cmluZygpIDwgJzg1JyAmJiAob0lhcGMuZXF1YWxzKCcxJykgfHwgb0lhcGMuZXF1YWxzKCcyJykgfHwgb0lhcGMuZXF1YWxzKCczJykpKXsNCiAgICAgIC8vaWYgKChlYWNoTGluZS5nZXQoJ1BVU0wnKS50b1N0cmluZygpLmVxdWFscygnNDAnKSB8fCBlYWNoTGluZS5nZXQoJ1BVU0wnKS50b1N0cmluZygpLmVxdWFscygnNDUnKSkgJiYgKG9JYXBjLmVxdWFscygnMScpIHx8IG9JYXBjLmVxdWFscygnMicpIHx8IG9JYXBjLmVxdWFscygnMycpKSkgew0KICAgIGlmIChxdHlPcGVuICE9IDAuMCl7IA0KCSAgbWkub3V0RGF0YS5wdXQoJ1JDVFAnLCAnT0wnKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdQVU5PJywgZWFjaFB1bm8pOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1BOTEknLCBlYWNoTGluZS5nZXQoJ1BOTEknKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdQTkxTJywgZWFjaExpbmUuZ2V0KCdQTkxTJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnVFJEVCcsIGVhY2hMaW5lLmdldCgnVFJEVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0xXSEwnLCBlYWNoTGluZS5nZXQoJ1dITE8nKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdJVE5PJywgZWFjaExpbmUuZ2V0KCdJVE5PJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUElURCcsIGVhY2hMaW5lLmdldCgnUElURCcpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1BJVFQnLCBlYWNoTGluZS5nZXQoJ1BJVFQnKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdTSVRFJywgZWFjaExpbmUuZ2V0KCdTSVRFJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnQ0FRQScsIGVhY2hMaW5lLmdldCgnQ0FRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1JKUUEnLCBlYWNoTGluZS5nZXQoJ1JKUUEnKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdTRFFBJywgZWFjaExpbmUuZ2V0KCdTRFFBJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnT1JRQScsIGVhY2hMaW5lLmdldCgnT1JRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0lWUUEnLCBpbnZSZW0udG9TdHJpbmcoKSkNCiAgICAgIG1pLm91dERhdGEucHV0KCdSVlFBJywgZWFjaExpbmUuZ2V0KCdSVlFBJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnQ0ZRQScsIGVhY2hMaW5lLmdldCgnQ0ZRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ09RUFUnLCBlYWNoTGluZS5nZXQoJ29wZW5RdWFudGl0eVByaWNlVW0nKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdQVVJDJywgZWFjaExpbmUuZ2V0KCdQVVJDJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnTEJVWScsIGVhY2hMaW5lLmdldCgnQlVZRScpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1NUVU0nLCBlYWNoTGluZS5nZXQoJ3N0YW5kYXJkVW0nKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdVTk1TJywgZWFjaExpbmUuZ2V0KCdVTk1TJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnQUxVTScsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRlVW0nKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdDV1VOJywgZWFjaExpbmUuZ2V0KCdDV1VOJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnTE5BTScsIGVhY2hMaW5lLmdldCgnTE5BTScpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVUFInLCBlYWNoTGluZS5nZXQoJ3ByaWNlUGVyUGllY2VTdGFuZGFyZFVtJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUFVRVCcsIGVhY2hMaW5lLmdldCgnUFVRVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMUFInLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0aXZlUHJpY2UnKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdQVENEJywgZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKSk7DQogICAgICBpZiAoZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKS5sZW5ndGgoKSA9PSAxKSB7DQoNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVlRDRCcsICcwJyArIGVhY2hMaW5lLmdldCgnVlRDRCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICB9IGVsc2Ugew0KDQogICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1ZUQ0QnLCBlYWNoTGluZS5nZXQoJ1ZUQ0QnKS50b1N0cmluZygpKTsNCiAgICAgICAgfQ0KICAgICAgLy9taS5vdXREYXRhLnB1dCgnVlRDRCcsIGVhY2hMaW5lLmdldCgnVlRDRCcpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0dSTVQnLCBlYWNoTGluZS5nZXQoJ0dSTVQnKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdMTU9EJywgZWFjaExpbmUuZ2V0KCdNT0RMJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnTFRFRCcsIGVhY2hMaW5lLmdldCgnVEVETCcpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0xURUwnLCBlYWNoTGluZS5nZXQoJ1RFTDEnKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdMUFNMJywgZWFjaExpbmUuZ2V0KCdQVVNMJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnTFBTVCcsIGVhY2hMaW5lLmdldCgnUFVTVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1BPUE4nLCBlYWNoTGluZS5nZXQoJ3BvcG5FYTEzJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUk9SQycsIGVhY2hMaW5lLmdldCgnUk9SQycpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1JPUk4nLCBlYWNoTGluZS5nZXQoJ1JPUk4nKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdST1JMJywgZWFjaExpbmUuZ2V0KCdST1JMJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUk9SWCcsIGVhY2hMaW5lLmdldCgnUk9SWCcpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1NVRE8nLCBlYWNoTGluZS5nZXQoJ1NVRE8nKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdGUlJDJywgZWFjaExpbmUuZ2V0KCdGUlJDJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnRlJSRScsIGVhY2hMaW5lLmdldCgnRlJSRScpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0FEUUEnLCBlYWNoTGluZS5nZXQoJ0FEUUEnKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdPUlFUJywgZWFjaExpbmUuZ2V0KCdPUlFUJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnQU1PUCcsIGVhY2hMaW5lLmdldCgnYW1vdW50T3BlbicpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0FNT1InLCBlYWNoTGluZS5nZXQoJ0xOQU0nKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdQUkNFJywgZWFjaExpbmUuZ2V0KCdwcmljZVBlclBpZWNlU3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1VOSVQnLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0ZVVtJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnT1BRVCcsIGVhY2hMaW5lLmdldCgnb3BlblF1YW50aXR5U3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUSVYnLCBlYWNoTGluZS5nZXQoJ2ludm9pY2VkUXVhbnRpdHlTdGFuZGFyZFVtJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUVRPUicsIGVhY2hMaW5lLmdldCgnb3JkZXJlZFF1YW50aXR5U3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpDQogICAgICBtaS5vdXREYXRhLnB1dCgnUVRSVicsIGVhY2hMaW5lLmdldCgncmVjZWl2ZWRRdWFudGl0eVN0YW5kYXJkVW0nKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdBTFRVJywgZWFjaExpbmUuZ2V0KCdhbHRlcm5hdGVVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMUU8nLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0aXZlUXVhbnRpdHlPcGVuJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnQUxUUCcsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRpdmVQcmljZScpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ09BT1UnLCBjb252ZXJ0ZWRBbW91bnQudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnT1FPVScsIHF0eU9wZW4udG9TdHJpbmcoKSk7DQogICAgICBtaS53cml0ZSgpOw0KICAgIH0NCiAgfQ0KICAgIC8qaWYgKGVhY2hMaW5lLmdldCgnUFVTTCcpLnRvU3RyaW5nKCkgPCAnODUnICYmIG9JYXBjLmVxdWFscygiMSIpICYmICghZWFjaExpbmUuZ2V0KCdQVVNMJykudG9TdHJpbmcoKS5lcXVhbHMoJzQwJykgJiYgIWVhY2hMaW5lLmdldCgnUFVTTCcpLnRvU3RyaW5nKCkuZXF1YWxzKCc0NScpKSkgew0KDQogICAgDQogICAgICBtaS5vdXREYXRhLnB1dCgnUkNUUCcsICdPTCcpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVTk8nLCBlYWNoUHVubyk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUE5MSScsIGVhY2hMaW5lLmdldCgnUE5MSScpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1BOTFMnLCBlYWNoTGluZS5nZXQoJ1BOTFMnKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdUUkRUJywgZWFjaExpbmUuZ2V0KCdUUkRUJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnTFdITCcsIGVhY2hMaW5lLmdldCgnV0hMTycpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0lUTk8nLCBlYWNoTGluZS5nZXQoJ0lUTk8nKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdQSVREJywgZWFjaExpbmUuZ2V0KCdQSVREJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUElUVCcsIGVhY2hMaW5lLmdldCgnUElUVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1NJVEUnLCBlYWNoTGluZS5nZXQoJ1NJVEUnKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdDQVFBJywgZWFjaExpbmUuZ2V0KCdDQVFBJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUkpRQScsIGVhY2hMaW5lLmdldCgnUkpRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1NEUUEnLCBlYWNoTGluZS5nZXQoJ1NEUUEnKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdPUlFBJywgZWFjaExpbmUuZ2V0KCdPUlFBJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnSVZRQScsIGVhY2hMaW5lLmdldCgnSVZRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1JWUUEnLCBlYWNoTGluZS5nZXQoJ1JWUUEnKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdDRlFBJywgZWFjaExpbmUuZ2V0KCdDRlFBJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnT1FQVScsIGVhY2hMaW5lLmdldCgnb3BlblF1YW50aXR5UHJpY2VVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVUkMnLCBlYWNoTGluZS5nZXQoJ1BVUkMnKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdMQlVZJywgZWFjaExpbmUuZ2V0KCdCVVlFJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnU1RVTScsIGVhY2hMaW5lLmdldCgnc3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1VOTVMnLCBlYWNoTGluZS5nZXQoJ1VOTVMnKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdBTFVNJywgZWFjaExpbmUuZ2V0KCdhbHRlcm5hdGVVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0NXVU4nLCBlYWNoTGluZS5nZXQoJ0NXVU4nKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdMTkFNJywgZWFjaExpbmUuZ2V0KCdMTkFNJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUFVQUicsIGVhY2hMaW5lLmdldCgncHJpY2VQZXJQaWVjZVN0YW5kYXJkVW0nKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdQVVFUJywgZWFjaExpbmUuZ2V0KCdQVVFUJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnQUxQUicsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRpdmVQcmljZScpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1BUQ0QnLCBlYWNoTGluZS5nZXQoJ1ZUQ0QnKS50b1N0cmluZygpKTsNCiAgICAgICBpZiAoZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKS5sZW5ndGgoKSA9PSAxKSB7DQoNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVlRDRCcsICcwJyArIGVhY2hMaW5lLmdldCgnVlRDRCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICB9IGVsc2Ugew0KDQogICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1ZUQ0QnLCBlYWNoTGluZS5nZXQoJ1ZUQ0QnKS50b1N0cmluZygpKTsNCiAgICAgICAgfQ0KICAgICAgLy9taS5vdXREYXRhLnB1dCgnVlRDRCcsIGVhY2hMaW5lLmdldCgnVlRDRCcpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0dSTVQnLCBlYWNoTGluZS5nZXQoJ0dSTVQnKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdMTU9EJywgZWFjaExpbmUuZ2V0KCdNT0RMJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnTFRFRCcsIGVhY2hMaW5lLmdldCgnVEVETCcpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0xURUwnLCBlYWNoTGluZS5nZXQoJ1RFTDEnKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdMUFNMJywgZWFjaExpbmUuZ2V0KCdQVVNMJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnTFBTVCcsIGVhY2hMaW5lLmdldCgnUFVTVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1BPUE4nLCBlYWNoTGluZS5nZXQoJ3BvcG5FYTEzJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUk9SQycsIGVhY2hMaW5lLmdldCgnUk9SQycpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1JPUk4nLCBlYWNoTGluZS5nZXQoJ1JPUk4nKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdST1JMJywgZWFjaExpbmUuZ2V0KCdST1JMJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUk9SWCcsIGVhY2hMaW5lLmdldCgnUk9SWCcpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1NVRE8nLCBlYWNoTGluZS5nZXQoJ1NVRE8nKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdGUlJDJywgZWFjaExpbmUuZ2V0KCdGUlJDJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnRlJSRScsIGVhY2hMaW5lLmdldCgnRlJSRScpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0FEUUEnLCBlYWNoTGluZS5nZXQoJ0FEUUEnKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdPUlFUJywgZWFjaExpbmUuZ2V0KCdPUlFUJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnQU1PUCcsIGVhY2hMaW5lLmdldCgnYW1vdW50T3BlbicpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0FNT1InLCBlYWNoTGluZS5nZXQoJ0xOQU0nKS50b1N0cmluZygpKTsNCg0KICAgICAgaWYgKERvdWJsZS5wYXJzZURvdWJsZShlYWNoTGluZS5nZXQoJ0NQUFInKS50b1N0cmluZygpKSA9PSAwKSB7DQogICAgICAgIA0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFJDRScsIGVhY2hMaW5lLmdldCgncHJpY2VQZXJQaWVjZVN0YW5kYXJkVW0nKS50b1N0cmluZygpKTsNCiAgICAgIH0NCg0KICAgICAgaWYgKERvdWJsZS5wYXJzZURvdWJsZShlYWNoTGluZS5nZXQoJ0NQUFInKS50b1N0cmluZygpKSAhPSAwICYmIERvdWJsZS5wYXJzZURvdWJsZShlYWNoTGluZS5nZXQoJ0NGRDEnKS50b1N0cmluZygpKSAhPSAwKSB7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdQUkNFJywgKERvdWJsZS5wYXJzZURvdWJsZShlYWNoTGluZS5nZXQoJ0NQUFInKS50b1N0cmluZygpKSAtICgoKERvdWJsZS5wYXJzZURvdWJsZShlYWNoTGluZS5nZXQoJ0NGRDEnKS50b1N0cmluZygpKSkgLyAxMDApICogKERvdWJsZS5wYXJzZURvdWJsZShlYWNoTGluZS5nZXQoJ0NQUFInKS50b1N0cmluZygpKSkpKS50b1N0cmluZygpKTsNCg0KICAgICAgfQ0KDQogICAgICBpZiAoRG91YmxlLnBhcnNlRG91YmxlKGVhY2hMaW5lLmdldCgnQ1BQUicpLnRvU3RyaW5nKCkpICE9IDAgJiYgRG91YmxlLnBhcnNlRG91YmxlKGVhY2hMaW5lLmdldCgnQ0ZEMicpLnRvU3RyaW5nKCkpICE9IDApIHsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BSQ0UnLCAoRG91YmxlLnBhcnNlRG91YmxlKGVhY2hMaW5lLmdldCgnQ1BQUicpLnRvU3RyaW5nKCkpIC0gKCgoRG91YmxlLnBhcnNlRG91YmxlKGVhY2hMaW5lLmdldCgnQ0ZEMicpLnRvU3RyaW5nKCkpKSAvIDEwMCkgKiAoRG91YmxlLnBhcnNlRG91YmxlKGVhY2hMaW5lLmdldCgnQ1BQUicpLnRvU3RyaW5nKCkpKSkpLnRvU3RyaW5nKCkpOw0KDQogICAgICB9DQoNCiAgICAgIGlmIChEb3VibGUucGFyc2VEb3VibGUoZWFjaExpbmUuZ2V0KCdDUFBSJykudG9TdHJpbmcoKSkgIT0gMCAmJiBEb3VibGUucGFyc2VEb3VibGUoZWFjaExpbmUuZ2V0KCdDRkQzJykudG9TdHJpbmcoKSkgIT0gMCkgew0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFJDRScsIChEb3VibGUucGFyc2VEb3VibGUoZWFjaExpbmUuZ2V0KCdDUFBSJykudG9TdHJpbmcoKSkgLSAoKChEb3VibGUucGFyc2VEb3VibGUoZWFjaExpbmUuZ2V0KCdDRkQzJykudG9TdHJpbmcoKSkpIC8gMTAwKSAqIChEb3VibGUucGFyc2VEb3VibGUoZWFjaExpbmUuZ2V0KCdDUFBSJykudG9TdHJpbmcoKSkpKSkudG9TdHJpbmcoKSk7DQogICAgICB9DQoNCiAgICAgIGlmIChEb3VibGUucGFyc2VEb3VibGUoZWFjaExpbmUuZ2V0KCdDUFBSJykudG9TdHJpbmcoKSkgIT0gMCAmJiAoRG91YmxlLnBhcnNlRG91YmxlKGVhY2hMaW5lLmdldCgnQ0ZEMScpLnRvU3RyaW5nKCkpID09IDAgJiYgRG91YmxlLnBhcnNlRG91YmxlKGVhY2hMaW5lLmdldCgnQ0ZEMicpLnRvU3RyaW5nKCkpID09IDAgJiYgRG91YmxlLnBhcnNlRG91YmxlKGVhY2hMaW5lLmdldCgnQ0ZEMycpLnRvU3RyaW5nKCkpID09IDApKSB7DQoNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BSQ0UnLCBlYWNoTGluZS5nZXQoJ0NQUFInKS50b1N0cmluZygpKTsNCiAgICAgIH0NCg0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1VOSVQnLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0ZVVtJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnT1BRVCcsIGVhY2hMaW5lLmdldCgnb3BlblF1YW50aXR5U3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUSVYnLCBlYWNoTGluZS5nZXQoJ2ludm9pY2VkUXVhbnRpdHlTdGFuZGFyZFVtJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnUVRPUicsIGVhY2hMaW5lLmdldCgnb3JkZXJlZFF1YW50aXR5U3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpDQogICAgICBtaS5vdXREYXRhLnB1dCgnUVRSVicsIGVhY2hMaW5lLmdldCgncmVjZWl2ZWRRdWFudGl0eVN0YW5kYXJkVW0nKS50b1N0cmluZygpKTsNCg0KICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMVFUnLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0ZVVtJykudG9TdHJpbmcoKSk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnQUxRTycsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4nKS50b1N0cmluZygpKTsNCiAgICAgIG1pLm91dERhdGEucHV0KCdBTFRQJywgZWFjaExpbmUuZ2V0KCdhbHRlcm5hdGl2ZVByaWNlJykudG9TdHJpbmcoKSk7DQogICAgICBtaS53cml0ZSgpOw0KICAgIH0qLw0KICB9DQoNCiAvKioNCiAgKiBSZXRyaXZlIGl0ZW0gYWxpYXMgdXNpbmcgTU1TMDI1TUkuR2V0QWxpYXMNCiAgKiANCiAgKi8NCiAgIA0KICBwdWJsaWMgZ2V0SXRlbUFsaWFzKEhhc2h0YWJsZSBlYWNoTGluZSkgew0KICAgIFN0cmluZyBJVE5PID0gZWFjaExpbmUuZ2V0KCdJVE5PJyk7DQoNCiAgICBib29sZWFuIHJlY29yZEV4aXN0cyA9IHRydWU7DQogICAgZGVmIGNhbGxiYWNrID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpOw0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBwb3BuRWExMyA9IHJlc3VsdHMuZ2V0KCdQT1BOJyk7DQogICAgICB9DQoNCiAgICB9DQogICAgZGVmIHBhcmFtcyA9IFsiQ09OTyI6IENPTk8sICJBTFdUIjogIjAyIiwgIklUTk8iOiBJVE5PLCAiQUxXUSI6ICJFQTEzIl07DQogICAgbWlDYWxsZXIuY2FsbCgiTU1TMDI1TUkiLCAiR2V0QWxpYXMiLCBwYXJhbXMsIGNhbGxiYWNrKTsNCg0KICB9DQoNCiAgLyoqDQogICogZ2V0IHB1cmNoYXNlIG9yZGVyIGxpbmUgZGV0YWlscyBmcm9tIE1QTElORQ0KICAqIA0KICAqLw0KICANCiAgcHVibGljIGdldE1wbGluZURldGFpbHMoU3RyaW5nIGVhY2hQdW5vLCBIYXNodGFibGUgZWFjaExpbmUpIHsNCiAgICBTdHJpbmcgUE5MSSA9IGVhY2hMaW5lLmdldCgnUE5MSScpOw0KICAgIFN0cmluZyBQTkxTID0gZWFjaExpbmUuZ2V0KCdQTkxTJyk7DQogICAgaWYgKFBOTEkgIT0gbnVsbCAmJiAhUE5MSS50cmltKCkuZXF1YWxzKCIiKSkgUE5MSSA9IFN0cmluZy5mb3JtYXQoIiUwM2QiLCBJbnRlZ2VyLnBhcnNlSW50KFBOTEkudHJpbSgpKSk7DQogICAgaWYgKFBOTFMgIT0gbnVsbCAmJiAhUE5MUy50cmltKCkuZXF1YWxzKCIiKSkgUE5MUyA9IFN0cmluZy5mb3JtYXQoIiUwM2QiLCBJbnRlZ2VyLnBhcnNlSW50KFBOTFMudHJpbSgpKSk7DQogICAgREJBY3Rpb24gcXVlcnlNcGxpbmUgPSBkYXRhYmFzZS50YWJsZSgiTVBMSU5FIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJJQkNPTk8iLCAiSUJQVU5PIiwgIklCUE5MSSIsICJJQlBOTFMiLCAiSUJTVURPIiwgIklCRlJSQyIsICJJQkZSUkUiKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIHJlY29yZE1wbGluZSA9IHF1ZXJ5TXBsaW5lLmdldENvbnRhaW5lcigpOw0KICAgIHJlY29yZE1wbGluZS5zZXQoIklCQ09OTyIsIEludGVnZXIucGFyc2VJbnQoQ09OTy50cmltKCkpKTsNCiAgICByZWNvcmRNcGxpbmUuc2V0KCJJQlBVTk8iLCBlYWNoUHVuby50cmltKCkpOw0KICAgIHJlY29yZE1wbGluZS5zZXQoIklCUE5MSSIsIFBOTEkudHJpbSgpLnRvSW50ZWdlcigpKTsNCiAgICByZWNvcmRNcGxpbmUuc2V0KCJJQlBOTFMiLCBQTkxTLnRyaW0oKS50b0ludGVnZXIoKSk7DQogICAgcXVlcnlNcGxpbmUucmVhZChyZWNvcmRNcGxpbmUpOw0KDQogICAgZWFjaExpbmUucHV0KCdTVURPJywgcmVjb3JkTXBsaW5lLmdldCgnSUJTVURPJykudG9TdHJpbmcoKSk7DQogICAgZWFjaExpbmUucHV0KCdGUlJDJywgcmVjb3JkTXBsaW5lLmdldCgnSUJGUlJDJykudG9TdHJpbmcoKSk7DQogICAgZWFjaExpbmUucHV0KCdGUlJFJywgcmVjb3JkTXBsaW5lLmdldCgnSUJGUlJFJykudG9TdHJpbmcoKSk7DQoNCiAgfQ0KICANCiAgLyoqDQogICogY2hlY2sgQ29uZmlybSBwdXJjaGFzZSBwcmljZQ0KICAqIA0KICAqLw0KDQogIHB1YmxpYyB1c2VDcHBySWZBdmFpbGFibGUoSGFzaHRhYmxlIGVhY2hMaW5lKSB7DQogICAgU3RyaW5nIFBVUFIgPSBlYWNoTGluZS5nZXQoJ1BVUFInKTsNCiAgICBTdHJpbmcgQ1BQUiA9IGVhY2hMaW5lLmdldCgnQ1BQUicpOw0KDQogICAgRG91YmxlIGRQdXByID0gMC4wZDsNCg0KICAgIGlmIChQVVBSICE9IG51bGwgJiYgIVBVUFIudHJpbSgpLmVxdWFscygiIikpDQogICAgICBkUHVwciA9IERvdWJsZS5wYXJzZURvdWJsZShQVVBSLnRyaW0oKSk7DQogICAgaWYgKENQUFIgIT0gbnVsbCAmJiAhQ1BQUi50cmltKCkuZXF1YWxzKCIiKSkNCiAgICAgIGRDcHByID0gRG91YmxlLnBhcnNlRG91YmxlKENQUFIudHJpbSgpKTsNCg0KICAgIGlmIChkQ3BwciA+PSAwLjAwMDAwMCkNCiAgICAgIGVhY2hMaW5lLnJlcGxhY2UoJ1BVUFInLCAnQ1BQUicpOw0KICB9DQoNCg0KIC8qKg0KICAqIGNoZWNrIFBPIG9yZGVyIHByaWNlIGFuZCBCYXNpYyB1bml0IG9mIG1lYXN1cmVtZW50DQogICogDQogICovDQogICANCiAgcHVibGljIGNoZWNrT3JkZXJQcmljZUFuZEJhc2VVbml0cyhIYXNodGFibGUgZWFjaExpbmUpIHsNCiAgICBTdHJpbmcgVU5NUyA9IGVhY2hMaW5lLmdldCgnVU5NUycpOw0KICAgIFN0cmluZyBDV1VOID0gZWFjaExpbmUuZ2V0KCdDV1VOJyk7DQogICAgU3RyaW5nIFBVVU4gPSBlYWNoTGluZS5nZXQoJ1BVVU4nKTsNCiAgICBTdHJpbmcgSVZRQSA9IGVhY2hMaW5lLmdldCgnSVZRQScpOw0KICAgIFN0cmluZyBQUFVOID0gZWFjaExpbmUuZ2V0KCdQUFVOJyk7DQogICAgU3RyaW5nIE9SUUEgPSBlYWNoTGluZS5nZXQoJ09SUUEnKTsNCiAgICBTdHJpbmcgUlZRQSA9IGVhY2hMaW5lLmdldCgnUlZRQScpOw0KICAgIFN0cmluZyBSVlFUID0gZWFjaExpbmUuZ2V0KCdSVlFUJyk7DQoNCiAgICBTdHJpbmcgT1JRVCA9IGVhY2hMaW5lLmdldCgnT1JRVCcpOw0KICAgIFN0cmluZyBMTkFNID0gZWFjaExpbmUuZ2V0KCdMTkFNJyk7DQogICAgU3RyaW5nIEFVVFAgPSBlYWNoTGluZS5nZXQoJ0FVVFAnKTsNCiAgICBTdHJpbmcgc3RhbmRhcmRVbSA9ICIiOw0KICAgIFN0cmluZyBhbHRlcm5hdGVVbSA9ICIiOw0KDQogICAgSVZRVCA9IElWUUE7DQoNCiAgICBvcmRlclVtRGNjZCA9IGJhc2ljVW1EY2NkID09IG51bGwgPyAiMCIgOiBiYXNpY1VtRGNjZC50cmltKCk7DQogICAgb3JkZXJVbURtY2YgPSAiMSI7DQogICAgb3JkZXJVbUNvZmEgPSAiMSI7DQogICAgZG91YmxlIGRibE9ycWEgPSBEb3VibGUucGFyc2VEb3VibGUoT1JRQSk7DQogICAgZG91YmxlIGRibEl2cWEgPSBEb3VibGUucGFyc2VEb3VibGUoSVZRQSk7DQogICAgZG91YmxlIHZhbHVlID0gZGJsT3JxYSAtIGRibEl2cWE7DQogICAgb3BlblF1YW50aXR5UHJpY2VVbSA9IG5ldyBCaWdEZWNpbWFsKFN0cmluZy52YWx1ZU9mKHZhbHVlKSkuc2V0U2NhbGUoNCwgQmlnRGVjaW1hbC5ST1VORF9GTE9PUikudG9QbGFpblN0cmluZygpOw0KDQogICAgQmlnRGVjaW1hbCBpbnZvaWNlZFF1YW50aXR5ID0gbmV3IEJpZ0RlY2ltYWwoSVZRQSk7DQogICAgQmlnRGVjaW1hbCBjb252ZXJzaW9uRmFjdG9yID0gbmV3IEJpZ0RlY2ltYWwob3JkZXJVbUNvZmEpOw0KDQogICAgSVZRVCA9IGludm9pY2VkUXVhbnRpdHk7DQoNCiAgICBvcmRlcmRRdWFudGl0eVByaWNlVW0gPSBPUlFUOw0KICAgIHJlY2VpdmVkUXVhbnRpdHlQcmljZVVtID0gUlZRVDsNCiAgICBpbnZvaWNlZFF1YW50aXR5UHJpY2VVbSA9IElWUVQ7DQoNCiAgICBkb3VibGUgZGJsT3JxdCA9IERvdWJsZS5wYXJzZURvdWJsZShPUlFUKTsNCiAgICBkb3VibGUgZGJsSXZxdCA9IERvdWJsZS5wYXJzZURvdWJsZShJVlFUKTsNCiAgICBkb3VibGUgdmFsdWUyID0gZGJsT3JxdCAtIGRibEl2cXQ7DQogICAgb3BlblF1YW50aXR5UHJpY2VVbSA9IG5ldyBCaWdEZWNpbWFsKFN0cmluZy52YWx1ZU9mKHZhbHVlMikpLnNldFNjYWxlKDQsIEJpZ0RlY2ltYWwuUk9VTkRfRkxPT1IpLnRvUGxhaW5TdHJpbmcoKTsNCg0KICAgIHByaWNlVW1EY2NkID0gYmFzaWNVbURjY2QgPT0gbnVsbCA/ICIwIiA6IGJhc2ljVW1EY2NkLnRyaW0oKTsNCiAgICBwcmljZVVtRG1jZiA9ICIxIjsNCiAgICBwcmljZVVtQ29mYSA9ICIxIjsNCg0KICAgIA0KICAgIGRvdWJsZSBkYmxPcnFhMSA9IERvdWJsZS5wYXJzZURvdWJsZShPUlFBKTsNCiAgICBkb3VibGUgZGJsUnZxYSA9IERvdWJsZS5wYXJzZURvdWJsZShSVlFBKTsNCiAgICBkb3VibGUgZGJsSXZxYTEgPSBEb3VibGUucGFyc2VEb3VibGUoSVZRQSk7DQogICAgaW50IGludERjY2QgPSBJbnRlZ2VyLnZhbHVlT2Yob3JkZXJVbURjY2QpOw0KICAgIGRvdWJsZSB2YWx1ZTEgPSBkYmxSdnFhIC0gZGJsSXZxYTE7DQogICAgb3BlUXVhbnRpdHlPcmRlclVtID0gbmV3IEJpZ0RlY2ltYWwoU3RyaW5nLnZhbHVlT2YodmFsdWUxKSkuc2V0U2NhbGUoaW50RGNjZCwgQmlnRGVjaW1hbC5ST1VORF9GTE9PUikudG9QbGFpblN0cmluZygpOw0KDQogICAgDQogICAgb3BlUXVhbnRpdHlPcmRlclVtID0gb3BlUXVhbnRpdHlPcmRlclVtID09IG51bGwgPyAiIiA6IG9wZVF1YW50aXR5T3JkZXJVbS50cmltKCk7DQogICAgTE5BTSA9IExOQU0gPT0gbnVsbCA/ICIiIDogTE5BTS50cmltKCk7DQogICAgb3JkZXJkUXVhbnRpdHlQcmljZVVtID0gb3JkZXJkUXVhbnRpdHlQcmljZVVtID09IG51bGwgPyAiIiA6IG9yZGVyZFF1YW50aXR5UHJpY2VVbS50cmltKCk7DQogICAgT1JRQSA9IE9SUUEgPT0gbnVsbCA/ICIiIDogT1JRQS50cmltKCk7DQoNCiAgICBCaWdEZWNpbWFsIG9wZW5RdWFudGl0eU9yZGVyVW07DQoNCiAgICBpZiAob3BlUXVhbnRpdHlPcmRlclVtLmVxdWFscygiIikpIHsNCiAgICAgIG9wZW5RdWFudGl0eU9yZGVyVW0gPSBuZXcgQmlnRGVjaW1hbCgiMCIpOw0KICAgIH0gZWxzZSB7DQogICAgICBvcGVuUXVhbnRpdHlPcmRlclVtID0gbmV3IEJpZ0RlY2ltYWwob3BlUXVhbnRpdHlPcmRlclVtKTsNCiAgICB9DQoNCiAgICBCaWdEZWNpbWFsIG5ldHRMaW5lQW1vdW50Ow0KDQogICAgaWYgKExOQU0uZXF1YWxzKCIiKSkgew0KICAgICAgbmV0dExpbmVBbW91bnQgPSBuZXcgQmlnRGVjaW1hbCgiMC4wIik7DQogICAgfSBlbHNlIHsNCiAgICAgIG5ldHRMaW5lQW1vdW50ID0gbmV3IEJpZ0RlY2ltYWwoTE5BTSk7DQogICAgfQ0KDQogICAgQmlnRGVjaW1hbCBvcmRlcmVkUXVhbnRpdHlQcmljZVVtOw0KDQogICAgaWYgKG9yZGVyZFF1YW50aXR5UHJpY2VVbS5lcXVhbHMoIiIpKSB7DQogICAgICBvcmRlcmVkUXVhbnRpdHlQcmljZVVtID0gbmV3IEJpZ0RlY2ltYWwoIjAiKTsNCiAgICB9IGVsc2Ugew0KICAgICAgb3JkZXJlZFF1YW50aXR5UHJpY2VVbSA9IG5ldyBCaWdEZWNpbWFsKG9yZGVyZFF1YW50aXR5UHJpY2VVbSk7DQogICAgfQ0KDQogICAgQmlnRGVjaW1hbCBvcmRlcmVkUXVhbnRpdHk7DQoNCiAgICBpZiAoT1JRQS5lcXVhbHMoIiIpKSB7DQogICAgICBvcmRlcmVkUXVhbnRpdHkgPSBuZXcgQmlnRGVjaW1hbCgiMCIpOw0KICAgIH0gZWxzZSB7DQogICAgICBvcmRlcmVkUXVhbnRpdHkgPSBuZXcgQmlnRGVjaW1hbChPUlFBKTsNCiAgICB9DQoNCiAgICBCaWdEZWNpbWFsIHByaWNlUGVyUGllY2VPcmRlclVtOw0KICAgIGlmIChuZXR0TGluZUFtb3VudC5jb21wYXJlVG8oQmlnRGVjaW1hbC5aRVJPKSA9PSAwIHx8IG9yZGVyZWRRdWFudGl0eS5jb21wYXJlVG8oQmlnRGVjaW1hbC5aRVJPKSA9PSAwKSB7DQogICAgICBwcmljZVBlclBpZWNlT3JkZXJVbSA9IG5ldyBCaWdEZWNpbWFsKCIwLjAiKTsNCgkgIC8vbG9nZ2VyLmluZm8oInByaWNlUGVyUGllY2VPcmRlclVtX0EiK3ByaWNlUGVyUGllY2VPcmRlclVtKQ0KICAgICAgcHJpY2VwZXJQaWVjZU91bSA9IHByaWNlUGVyUGllY2VPcmRlclVtOw0KDQogICAgfSBlbHNlIHsNCiAgICAgIC8vcHJpY2VQZXJQaWVjZU9yZGVyVW0gPSBuZXR0TGluZUFtb3VudC5kaXZpZGUob3JkZXJlZFF1YW50aXR5LCBudW1iZXJPZkRlY2ltYWxzLnRvSW50ZWdlcigpLCBSb3VuZGluZ01vZGUuSEFMRl9VUCk7DQoJICBwcmljZVBlclBpZWNlT3JkZXJVbSA9IG5ldHRMaW5lQW1vdW50LmRpdmlkZShvcmRlcmVkUXVhbnRpdHksIDYsIFJvdW5kaW5nTW9kZS5IQUxGX1VQKTsNCgkgIGxvZ2dlci5pbmZvKCJwcmljZVBlclBpZWNlT3JkZXJVbV9CIitwcmljZVBlclBpZWNlT3JkZXJVbSkNCiAgICAgIHByaWNlcGVyUGllY2VPdW0gPSBwcmljZVBlclBpZWNlT3JkZXJVbTsNCg0KICAgIH0NCg0KICAgIEJpZ0RlY2ltYWwgcHJpY2VQZXJQaWVjZVByaWNlVW07DQoNCiAgICBpZiAob3JkZXJlZFF1YW50aXR5LmNvbXBhcmVUbyhCaWdEZWNpbWFsLlpFUk8pID09IDAgfHwgb3JkZXJlZFF1YW50aXR5UHJpY2VVbS5jb21wYXJlVG8oQmlnRGVjaW1hbC5aRVJPKSA9PSAwKSB7DQogICAgICBwcmljZVBlclBpZWNlUHJpY2VVbSA9IG5ldyBCaWdEZWNpbWFsKCIwLjAiKTsNCgkgIA0KICAgIH0gZWxzZSB7DQogICAgICBwcmljZVBlclBpZWNlUHJpY2VVbSA9IG9yZGVyZWRRdWFudGl0eS5kaXZpZGUob3JkZXJlZFF1YW50aXR5UHJpY2VVbSwgMTIsIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS5tdWx0aXBseShwcmljZVBlclBpZWNlT3JkZXJVbSk7DQoNCiAgICB9DQoNCiAgICBhbW91bnRPcGVuID0gb3BlblF1YW50aXR5T3JkZXJVbS5tdWx0aXBseShwcmljZVBlclBpZWNlT3JkZXJVbSkuc2V0U2NhbGUobnVtYmVyT2ZEZWNpbWFscy50b0ludGVnZXIoKSwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTsNCg0KICAgIHByaWNQZXJQaWVjZVByaWNlVW0gPSBwcmljZVBlclBpZWNlUHJpY2VVbS5zZXRTY2FsZSg2LCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpOw0KICAgIHByaWNQZXJQaWVjZU9yZGVyVW0gPSBwcmljZVBlclBpZWNlT3JkZXJVbS5zZXRTY2FsZSg2LCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpOw0KCQ0KDQogICAgaWYgKHByaWNlVW5pdFN0YW5kYXJkLnRyaW0oKS5lcXVhbHMoIjEiKSkgew0KICAgICAgc3RhbmRhcmRVbSA9IFBQVU4udHJpbSgpOw0KICAgICAgYWx0ZXJuYXRlVW0gPSBQVVVOLnRyaW0oKTsNCiAgICAgIC8vcHJpY2VQZXJQaWVjZVN0YW5kYXJkVW0gPSBwcmljUGVyUGllY2VQcmljZVVtID09IG51bGwgPyAiIiA6IHByaWNQZXJQaWVjZVByaWNlVW0udHJpbSgpOw0KCSAgcHJpY2VQZXJQaWVjZVN0YW5kYXJkVW0gPSBwcmljUGVyUGllY2VPcmRlclVtPT0gbnVsbCA/ICIiIDogcHJpY1BlclBpZWNlT3JkZXJVbS50cmltKCk7DQoJICBsb2dnZXIuaW5mbygicHJpY2VQZXJQaWVjZVN0YW5kYXJkVW1hIitwcmljZVBlclBpZWNlU3RhbmRhcmRVbSkNCiAgICAgIG9wZW5RdWFudGl0eVN0YW5kYXJkVW0gPSBvcGVuUXVhbnRpdHlQcmljZVVtID09IG51bGwgPyAiIiA6IG9wZW5RdWFudGl0eVByaWNlVW0udHJpbSgpOw0KICAgICAgaW52b2ljZWRRdWFudGl0eVN0YW5kYXJkVW0gPSBpbnZvaWNlZFF1YW50aXR5UHJpY2VVbSA9PSBudWxsID8gIiIgOiBpbnZvaWNlZFF1YW50aXR5UHJpY2VVbS50cmltKCk7DQogICAgICBvcmRlcmVkUXVhbnRpdHlTdGFuZGFyZFVtID0gb3JkZXJkUXVhbnRpdHlQcmljZVVtID09IG51bGwgPyAiIiA6IG9yZGVyZFF1YW50aXR5UHJpY2VVbS50cmltKCk7DQogICAgICByZWNlaXZlZFF1YW50aXR5U3RhbmRhcmRVbSA9IHJlY2VpdmVkUXVhbnRpdHlQcmljZVVtID09IG51bGwgPyAiIiA6IHJlY2VpdmVkUXVhbnRpdHlQcmljZVVtLnRyaW0oKTsNCg0KICAgICAgYWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4gPSBvcGVRdWFudGl0eU9yZGVyVW07DQogICAgICBhbHRlcm5hdGl2ZVByaWNlID0gcHJpY1BlclBpZWNlT3JkZXJVbTsNCgkgIC8vbG9nZ2VyLmluZm8oImFscHJfQSIrYWx0ZXJuYXRpdmVQcmljZSkNCg0KICAgIH0gZWxzZSB7DQogICAgICBzdGFuZGFyZFVtID0gUFVVTi50cmltKCk7DQogICAgICBhbHRlcm5hdGVVbSA9IFBQVU4udHJpbSgpOw0KICAgICAgLy9wcmljZVBlclBpZWNlU3RhbmRhcmRVbSA9IHByaWNQZXJQaWVjZVByaWNlVW0gPT0gbnVsbCA/ICIiIDogcHJpY1BlclBpZWNlUHJpY2VVbS50cmltKCk7DQoJICBwcmljZVBlclBpZWNlU3RhbmRhcmRVbSA9IHByaWNQZXJQaWVjZU9yZGVyVW09PSBudWxsID8gIiIgOiBwcmljUGVyUGllY2VPcmRlclVtLnRyaW0oKTsNCgkgICBsb2dnZXIuaW5mbygicHJpY2VQZXJQaWVjZVN0YW5kYXJkVW1iIitwcmljZVBlclBpZWNlU3RhbmRhcmRVbSkNCiAgICAgIG9wZW5RdWFudGl0eVN0YW5kYXJkVW0gPSBvcGVuUXVhbnRpdHlQcmljZVVtID09IG51bGwgPyAiIiA6IG9wZW5RdWFudGl0eVByaWNlVW0udHJpbSgpOw0KICAgICAgaW52b2ljZWRRdWFudGl0eVN0YW5kYXJkVW0gPSBJVlFBID09IG51bGwgPyAiIiA6IElWUUEudHJpbSgpOw0KICAgICAgb3JkZXJlZFF1YW50aXR5U3RhbmRhcmRVbSA9IE9SUUEgPT0gbnVsbCA/ICIiIDogT1JRQS50cmltKCk7DQogICAgICByZWNlaXZlZFF1YW50aXR5U3RhbmRhcmRVbSA9IFJWUUEgPT0gbnVsbCA/ICIiIDogUlZRQS50cmltKCk7DQoNCiAgICAgIGFsdGVybmF0aXZlUXVhbnRpdHlPcGVuID0gb3BlblF1YW50aXR5UHJpY2VVbTsNCiAgICAgIGFsdGVybmF0aXZlUHJpY2UgPSBwcmljUGVyUGllY2VQcmljZVVtOw0KCSAgLy9sb2dnZXIuaW5mbygiYWxwcl9CIithbHRlcm5hdGl2ZVByaWNlKQ0KICAgIH0NCiAgICBlYWNoTGluZS5wdXQoJ2Ftb3VudE9wZW4nLCBhbW91bnRPcGVuKTsNCiAgICBlYWNoTGluZS5wdXQoJ3ByaWNlUGVyUGllY2VTdGFuZGFyZFVtJywgcHJpY2VQZXJQaWVjZVN0YW5kYXJkVW0pOw0KICAgIGVhY2hMaW5lLnB1dCgnc3RhbmRhcmRVbScsIHN0YW5kYXJkVW0pOw0KICAgIGVhY2hMaW5lLnB1dCgnb3BlblF1YW50aXR5U3RhbmRhcmRVbScsIG9wZW5RdWFudGl0eVN0YW5kYXJkVW0pOw0KICAgIGVhY2hMaW5lLnB1dCgnaW52b2ljZWRRdWFudGl0eVN0YW5kYXJkVW0nLCBpbnZvaWNlZFF1YW50aXR5U3RhbmRhcmRVbSk7DQogICAgZWFjaExpbmUucHV0KCdvcmRlcmVkUXVhbnRpdHlTdGFuZGFyZFVtJywgb3JkZXJlZFF1YW50aXR5U3RhbmRhcmRVbSk7DQogICAgZWFjaExpbmUucHV0KCdyZWNlaXZlZFF1YW50aXR5U3RhbmRhcmRVbScsIHJlY2VpdmVkUXVhbnRpdHlTdGFuZGFyZFVtKTsNCiAgICBlYWNoTGluZS5wdXQoJ2FsdGVybmF0ZVVtJywgYWx0ZXJuYXRlVW0pOw0KICAgIGVhY2hMaW5lLnB1dCgnYWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4nLCBhbHRlcm5hdGl2ZVF1YW50aXR5T3Blbik7DQogICAgZWFjaExpbmUucHV0KCdhbHRlcm5hdGl2ZVByaWNlJywgYWx0ZXJuYXRpdmVQcmljZSk7DQogICAgZWFjaExpbmUucHV0KCdvcGVuUXVhbnRpdHlQcmljZVVtJywgb3BlblF1YW50aXR5UHJpY2VVbSk7DQogICAgZWFjaExpbmUucHV0KCdwb3BuRWExMycsIHBvcG5FYTEzKTsNCiAgfQ0KICAgDQogLyoqDQogICogZ2V0IFBPIGxpbmUgcmVjZWlwdCBkZXRhaWxzIGZyb20gdGFibGUgRkdSRUNMDQogICogDQogICovDQoNCiAgcHVibGljIGdldExpbmVSZWNlaXB0cyhTdHJpbmcgZWFjaFB1bm8sIEhhc2h0YWJsZSBlYWNoTGluZSkgew0KICAgIGxpbmVSZWNlaXB0TGlzdCA9IG5ldyBBcnJheUxpc3QgPCBIYXNodGFibGUgPiAoKTsNCiAgICBEQkFjdGlvbiBxdWVyeUZncmVjbCA9IGRhdGFiYXNlLnRhYmxlKCJGR1JFQ0wiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIkYyQ09OTyIsICJGMkRJVkkiLCAiRjJQVU5PIiwgIkYyUE5MSSIsICJGMlBOTFMiLCAiRjJSRVBOIiwgIkYyUkVMUCIsICJGMlJQUVQiLCAiRjJJVlFUIiwgIkYyUlBRQSIsICJGMklWUUEiLCAiRjJDQVdFIiwgIkYySVZDVyIsICJGMlJDQUMiLCAiRjJJQ0FDIiwgIkYyU0NPUCIsICJGMlNDT0MiLCAiRjJJTVNUIiwgIkYyVFJEVCIsICJGMlNFUkEiKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIHJlY29yZEZncmVjbCA9IHF1ZXJ5RmdyZWNsLmdldENvbnRhaW5lcigpOw0KICAgIHJlY29yZEZncmVjbC5zZXQoIkYyQ09OTyIsIEludGVnZXIucGFyc2VJbnQoQ09OTy50cmltKCkpKTsNCiAgICByZWNvcmRGZ3JlY2wuc2V0KCJGMkRJVkkiLCBvRGl2aS50cmltKCkpOw0KICAgIHJlY29yZEZncmVjbC5zZXQoIkYyUFVOTyIsIGVhY2hQdW5vLnRyaW0oKSk7DQogICAgcmVjb3JkRmdyZWNsLnNldCgiRjJQTkxJIiwgZWFjaExpbmUuZ2V0KCdQTkxJJykudG9TdHJpbmcoKS50b0ludGVnZXIoKSk7DQogICAgcmVjb3JkRmdyZWNsLnNldCgiRjJQTkxTIiwgZWFjaExpbmUuZ2V0KCdQTkxTJykudG9TdHJpbmcoKS50b0ludGVnZXIoKSk7DQogICAgDQogICAgaW50IHJlYWRzID0gcXVlcnlGZ3JlY2wucmVhZEFsbChyZWNvcmRGZ3JlY2wsIDUsIGdldEZncmVjbFJlY29yZHMpOw0KICB9DQoNCiAgQ2xvc3VyZSA8ID8gPiBnZXRGZ3JlY2xSZWNvcmRzID0gew0KICAgIERCQ29udGFpbmVyIHJlY29yZCAtPg0KICAgIFN0cmluZyBGMlJFUE4gPSByZWNvcmQuZ2V0KCdGMlJFUE4nKTsNCiAgICBTdHJpbmcgRjJSRUxQID0gcmVjb3JkLmdldCgnRjJSRUxQJyk7DQogICAgU3RyaW5nIEYyUlBRVCA9IHJlY29yZC5nZXQoJ0YyUlBRVCcpOw0KICAgIFN0cmluZyBGMklWUVQgPSByZWNvcmQuZ2V0KCdGMklWUVQnKTsNCiAgICBTdHJpbmcgRjJSUFFBID0gcmVjb3JkLmdldCgnRjJSUFFBJyk7DQogICAgU3RyaW5nIEYySVZRQSA9IHJlY29yZC5nZXQoJ0YySVZRQScpOw0KICAgIFN0cmluZyBGMkNBV0UgPSByZWNvcmQuZ2V0KCdGMkNBV0UnKTsNCiAgICBTdHJpbmcgRjJJVkNXID0gcmVjb3JkLmdldCgnRjJJVkNXJyk7DQogICAgU3RyaW5nIEYyUkNBQyA9IHJlY29yZC5nZXQoJ0YyUkNBQycpOw0KICAgIFN0cmluZyBGMklDQUMgPSByZWNvcmQuZ2V0KCdGMklDQUMnKTsNCiAgICBTdHJpbmcgRjJTQ09QID0gcmVjb3JkLmdldCgnRjJTQ09QJyk7DQogICAgU3RyaW5nIEYyU0NPQyA9IHJlY29yZC5nZXQoJ0YyU0NPQycpOw0KICAgIFN0cmluZyBGMklNU1QgPSByZWNvcmQuZ2V0KCdGMklNU1QnKTsNCiAgICBTdHJpbmcgRjJUUkRUID0gcmVjb3JkLmdldCgnRjJUUkRUJyk7DQogICAgU3RyaW5nIEYyU0VSQSA9IHJlY29yZC5nZXQoJ0YyU0VSQScpOw0KICAgIEhhc2h0YWJsZSB0ZW1wVGFibGUgPSBuZXcgSGFzaHRhYmxlIDwgU3RyaW5nLA0KICAgIFN0cmluZyA+ICgpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0YyUkVQTicsIEYyUkVQTik7DQogICAgdGVtcFRhYmxlLnB1dCgnRjJSRUxQJywgRjJSRUxQKTsNCiAgICB0ZW1wVGFibGUucHV0KCdGMlJQUVQnLCBGMlJQUVQpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0YySVZRVCcsIEYySVZRVCk7DQogICAgdGVtcFRhYmxlLnB1dCgnRjJSUFFBJywgRjJSUFFBKTsNCiAgICB0ZW1wVGFibGUucHV0KCdGMklWUUEnLCBGMklWUUEpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0YyQ0FXRScsIEYyQ0FXRSk7DQogICAgdGVtcFRhYmxlLnB1dCgnRjJJVkNXJywgRjJJVkNXKTsNCiAgICB0ZW1wVGFibGUucHV0KCdGMlJDQUMnLCBGMlJDQUMpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0YySUNBQycsIEYySUNBQyk7DQogICAgdGVtcFRhYmxlLnB1dCgnRjJTQ09QJywgRjJTQ09QKTsNCiAgICB0ZW1wVGFibGUucHV0KCdGMlNDT0MnLCBGMlNDT0MpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0YySU1TVCcsIEYySU1TVCk7DQogICAgdGVtcFRhYmxlLnB1dCgnRjJUUkRUJywgRjJUUkRUKTsNCiAgICB0ZW1wVGFibGUucHV0KCdGMlNFUkEnLCBGMlNFUkEpOw0KICAgIGxpbmVSZWNlaXB0TGlzdC5hZGQodGVtcFRhYmxlKTsNCg0KICB9DQoNCiAvKioNCiAgKiBjYWxjdWxhdGUgUE8gbGluZSByZWNlaXB0IHF1YW50aXRpZXMNCiAgKiANCiAgKi8NCiAgIA0KICBwdWJsaWMgY2FsY3VsYXRlUmVjZWlwdFF1YW50aXRpZXMoSGFzaHRhYmxlIGVhY2hMaW5lUmVjZWlwdCwgSGFzaHRhYmxlIGVhY2hMaW5lKSB7DQogICAgU3RyaW5nIFBQVU4gPSBlYWNoTGluZS5nZXQoJ1BQVU4nKTsNCiAgICBTdHJpbmcgUFVVTiA9IGVhY2hMaW5lLmdldCgnUFVVTicpOw0KICAgIFN0cmluZyBVTk1TID0gZWFjaExpbmUuZ2V0KCdVTk1TJyk7DQogICAgU3RyaW5nIENXVU4gPSBlYWNoTGluZS5nZXQoJ0NXVU4nKTsNCg0KICAgIFN0cmluZyBGMlJFUE4gPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMlJFUE4nKTsNCiAgICBTdHJpbmcgRjJSRUxQID0gZWFjaExpbmVSZWNlaXB0LmdldCgnRjJSRUxQJyk7DQogICAgU3RyaW5nIEYyUlBRVCA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YyUlBRVCcpOw0KICAgIHJlY2VpcHRRdWFudGl0eSA9IEYyUlBRVDsNCg0KICAgIFN0cmluZyBGMklWUVQgPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMklWUVQnKTsNCiAgICBTdHJpbmcgRjJSUFFBID0gZWFjaExpbmVSZWNlaXB0LmdldCgnRjJSUFFBJyk7DQogICAgU3RyaW5nIEYySVZRQSA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YySVZRQScpOw0KICAgIFN0cmluZyBGMkNBV0UgPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMkNBV0UnKTsNCiAgICBTdHJpbmcgRjJJVkNXID0gZWFjaExpbmVSZWNlaXB0LmdldCgnRjJJVkNXJyk7DQogICAgU3RyaW5nIEYyUkNBQyA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YyUkNBQycpOw0KICAgIFN0cmluZyBGMklDQUMgPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMklDQUMnKTsNCiAgICBTdHJpbmcgRjJTQ09QID0gZWFjaExpbmVSZWNlaXB0LmdldCgnRjJTQ09QJyk7DQogICAgU3RyaW5nIEYyU0NPQyA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YyU0NPQycpOw0KICAgIFN0cmluZyBGMklNU1QgPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMklNU1QnKTsNCiAgICBTdHJpbmcgRjJUUkRUID0gZWFjaExpbmVSZWNlaXB0LmdldCgnRjJUUkRUJyk7DQogICAgU3RyaW5nIEYyU0VSQSA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YyU0VSQScpOw0KDQogICAgUFBVTiA9IFBQVU4gPT0gbnVsbCA/ICIiIDogUFBVTi50cmltKCk7DQogICAgUFVVTiA9IFBVVU4gPT0gbnVsbCA/ICIiIDogUFVVTi50cmltKCk7DQogICAgVU5NUyA9IFVOTVMgPT0gbnVsbCA/ICIiIDogVU5NUy50cmltKCk7DQogICAgQ1dVTiA9IENXVU4gPT0gbnVsbCA/ICIiIDogQ1dVTi50cmltKCk7DQogICAgcHJpY2VVbUNvZmEgPSBwcmljZVVtQ29mYSA9PSBudWxsID8gIjEiIDogcHJpY2VVbUNvZmEudHJpbSgpOw0KICAgIHByaWNlVW1EbWNmID0gcHJpY2VVbURtY2YgPT0gbnVsbCA/ICIxIiA6IHByaWNlVW1EbWNmLnRyaW0oKTsNCg0KICAgIFN0cmluZyByZWNlaXZlZFF1YW50aXR5QWx0VW0gPSAiIjsNCiAgICBTdHJpbmcgb3BlUXVhbnRpdHlPcmRlclVtID0gIiI7DQogICAgU3RyaW5nIG9wZW5DYXRjaFdlaWdodCA9ICIiOw0KICAgIFN0cmluZyBvcGVuUXVhbnRpdHlQdXJjaGFzZU9yZGVyUHJpY2VVbSA9ICIiOw0KDQogICAgU3RyaW5nIG9wZW5BbW91bnRPcmRlclVtID0gIiI7DQogICAgU3RyaW5nIHJlY2VpdmVkUXVhbnRpdHkgPSAiIjsNCg0KICAgIEJpZ0RlY2ltYWwgZEZycHF0MiA9IG5ldyBCaWdEZWNpbWFsKDAuMGQpOw0KICAgIEJpZ0RlY2ltYWwgZEZpdnF0MiA9IG5ldyBCaWdEZWNpbWFsKDAuMGQpOw0KICAgIEJpZ0RlY2ltYWwgZEZycHFhMiA9IG5ldyBCaWdEZWNpbWFsKDAuMGQpOw0KICAgIEJpZ0RlY2ltYWwgZEZpdnFhMiA9IG5ldyBCaWdEZWNpbWFsKDAuMGQpOw0KICAgIEJpZ0RlY2ltYWwgZEZjYXdlMiA9IG5ldyBCaWdEZWNpbWFsKDAuMGQpOw0KICAgIEJpZ0RlY2ltYWwgZEZpdmN3MiA9IG5ldyBCaWdEZWNpbWFsKDAuMGQpOw0KICAgIEJpZ0RlY2ltYWwgZEZyY2FjMiA9IG5ldyBCaWdEZWNpbWFsKDAuMGQpOw0KICAgIEJpZ0RlY2ltYWwgZEZpY2FjMiA9IG5ldyBCaWdEZWNpbWFsKDAuMGQpOw0KICAgIEJpZ0RlY2ltYWwgZEZzY29wMiA9IG5ldyBCaWdEZWNpbWFsKDAuMGQpOw0KICAgIEJpZ0RlY2ltYWwgZEZzY29jMiA9IG5ldyBCaWdEZWNpbWFsKDAuMGQpOw0KICAgIEJpZ0RlY2ltYWwgZEZzZXJhMiA9IG5ldyBCaWdEZWNpbWFsKDAuMGQpOw0KDQogICAgQmlnRGVjaW1hbCBkY29mYSA9IG5ldyBCaWdEZWNpbWFsKHByaWNlVW1Db2ZhKTsNCg0KICAgIGludCBpbnRPcmRlclVtRGNjZCA9IG51bWJlck9mRGVjaW1hbHMudG9JbnRlZ2VyKCk7DQogICAgaW50IGludFByaWNlVW1EY2NkID0gbnVtYmVyT2ZEZWNpbWFscy50b0ludGVnZXIoKTsNCiAgICBpbnQgaW50QmFzaWNVbURjY2QgPSBudW1iZXJPZkRlY2ltYWxzLnRvSW50ZWdlcigpOw0KDQogICAgaWYgKEYyQ0FXRSAhPSBudWxsICYmICFGMkNBV0UudHJpbSgpLmVxdWFscygiIikpDQogICAgICBkRmNhd2UyID0gbmV3IEJpZ0RlY2ltYWwoRjJDQVdFLnRyaW0oKSk7DQogICAgaWYgKEYyUlBRVCAhPSBudWxsICYmICFGMlJQUVQudHJpbSgpLmVxdWFscygiIikpDQogICAgICBkRnJwcXQyID0gbmV3IEJpZ0RlY2ltYWwoRjJSUFFULnRyaW0oKSk7DQogICAgaWYgKEYySVZRVCAhPSBudWxsICYmICFGMklWUVQudHJpbSgpLmVxdWFscygiIikpDQogICAgICBkRml2cXQyID0gbmV3IEJpZ0RlY2ltYWwoRjJJVlFULnRyaW0oKSk7DQogICAgaWYgKEYyUlBRQSAhPSBudWxsICYmICFGMlJQUUEudHJpbSgpLmVxdWFscygiIikpDQogICAgICBkRnJwcWEyID0gbmV3IEJpZ0RlY2ltYWwoRjJSUFFBLnRyaW0oKSk7DQogICAgaWYgKEYySVZRQSAhPSBudWxsICYmICFGMklWUUEudHJpbSgpLmVxdWFscygiIikpDQogICAgICBkRml2cWEyID0gbmV3IEJpZ0RlY2ltYWwoRjJJVlFBLnRyaW0oKSk7DQogICAgaWYgKEYySVZDVyAhPSBudWxsICYmICFGMklWQ1cudHJpbSgpLmVxdWFscygiIikpDQogICAgICBkRml2Y3cyID0gbmV3IEJpZ0RlY2ltYWwoRjJJVkNXLnRyaW0oKSk7DQogICAgaWYgKEYyUkNBQyAhPSBudWxsICYmICFGMlJDQUMudHJpbSgpLmVxdWFscygiIikpDQogICAgICBkRnJjYWMyID0gbmV3IEJpZ0RlY2ltYWwoRjJSQ0FDLnRyaW0oKSk7DQogICAgaWYgKEYySUNBQyAhPSBudWxsICYmICFGMklDQUMudHJpbSgpLmVxdWFscygiIikpDQogICAgICBkRmljYWMyID0gbmV3IEJpZ0RlY2ltYWwoRjJJQ0FDLnRyaW0oKSk7DQogICAgaWYgKEYyU0NPUCAhPSBudWxsICYmICFGMlNDT1AudHJpbSgpLmVxdWFscygiIikpDQogICAgICBkRnNjb3AyID0gbmV3IEJpZ0RlY2ltYWwoRjJTQ09QLnRyaW0oKSk7DQogICAgaWYgKEYyU0NPQyAhPSBudWxsICYmICFGMlNDT0MudHJpbSgpLmVxdWFscygiIikpDQogICAgICBkRnNjb2MyID0gbmV3IEJpZ0RlY2ltYWwoRjJTQ09DLnRyaW0oKSk7DQogICAgaWYgKEYyU0VSQSAhPSBudWxsICYmICFGMlNFUkEudHJpbSgpLmVxdWFscygiIikpDQogICAgICBkRnNlcmEyID0gbmV3IEJpZ0RlY2ltYWwoRjJTRVJBLnRyaW0oKSk7DQogICAgaWYgKG9yZGVyVW1EY2NkICE9IG51bGwgJiYgIW9yZGVyVW1EY2NkLnRyaW0oKS5lcXVhbHMoIiIpKQ0KICAgICAgaW50T3JkZXJVbURjY2QgPSBJbnRlZ2VyLnZhbHVlT2Yob3JkZXJVbURjY2QudHJpbSgpKTsNCiAgICBpZiAocHJpY2VVbURjY2QgIT0gbnVsbCAmJiAhcHJpY2VVbURjY2QudHJpbSgpLmVxdWFscygiIikpDQogICAgICBpbnRQcmljZVVtRGNjZCA9IEludGVnZXIudmFsdWVPZihwcmljZVVtRGNjZC50cmltKCkpOw0KICAgIGlmIChiYXNpY1VtRGNjZCAhPSBudWxsICYmICFiYXNpY1VtRGNjZC50cmltKCkuZXF1YWxzKCIiKSkNCiAgICAgIGludEJhc2ljVW1EY2NkID0gSW50ZWdlci52YWx1ZU9mKGJhc2ljVW1EY2NkLnRyaW0oKSk7DQoNCiAgICBpZiAoZEZjYXdlMi5jb21wYXJlVG8obmV3IEJpZ0RlY2ltYWwoMC4wZCkpICE9IDApIHsNCg0KICAgICAgb3BlbkNhdGNoV2VpZ2h0ID0gZEZjYXdlMi5zdWJ0cmFjdChkRml2Y3cyKS5zZXRTY2FsZShudW1iZXJPZkRlY2ltYWxzLnRvSW50ZWdlcigpLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpOw0KDQogICAgfQ0KDQogICAgcmVjZWl2ZWRRdWFudGl0eUFsdFVtID0gZEZycHFhMi5zdWJ0cmFjdChkRml2cWEyKS5zZXRTY2FsZShpbnRPcmRlclVtRGNjZCwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTsNCiAgICByZWNlaXZlZFF1YW50aXR5ID0gZEZycHF0Mi5zdWJ0cmFjdChkRml2cXQyKS5zZXRTY2FsZShpbnRCYXNpY1VtRGNjZCwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTsNCiAgICBvcGVRdWFudGl0eU9yZGVyVW0gPSBkRnJwcWEyLnN1YnRyYWN0KGRGaXZxYTIpLnNldFNjYWxlKGludEJhc2ljVW1EY2NkLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpOw0KDQogICAgQmlnRGVjaW1hbCBkT3BlbkFtb3VudExvY2FsQ3VycmVuY3kgPSBkRnJjYWMyLnN1YnRyYWN0KGRGaWNhYzIpOw0KICAgIG9wZW5BbW91bnRMb2NhbEN1cnJlbmN5ID0gZE9wZW5BbW91bnRMb2NhbEN1cnJlbmN5LnRvUGxhaW5TdHJpbmcoKTsNCg0KICAgIGlmIChvRG1jdS5lcXVhbHMoIjEiKSkgew0KICAgICAgb3BlbkFtb3VudE9yZGVyVW0gPSBkT3BlbkFtb3VudExvY2FsQ3VycmVuY3kuZGl2aWRlKGRGc2VyYTIsIG51bWJlck9mRGVjaW1hbHMudG9JbnRlZ2VyKCksIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCk7DQoJICANCgl9IGVsc2UgaWYgKG9EbWN1LmVxdWFscygiMiIpKSB7DQogICAgICBvcGVuQW1vdW50T3JkZXJVbSA9IGRPcGVuQW1vdW50TG9jYWxDdXJyZW5jeS5tdWx0aXBseShkRnNlcmEyKS5zZXRTY2FsZShudW1iZXJPZkRlY2ltYWxzLnRvSW50ZWdlcigpLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpOw0KCSAgDQoJfQ0KDQogICAgZWFjaExpbmVSZWNlaXB0LnB1dCgncmVjZWl2ZWRRdWFudGl0eUFsdFVtJywgcmVjZWl2ZWRRdWFudGl0eUFsdFVtKTsNCiAgICBlYWNoTGluZVJlY2VpcHQucHV0KCdvcGVRdWFudGl0eU9yZGVyVW0nLCBvcGVRdWFudGl0eU9yZGVyVW0pOw0KICAgIGVhY2hMaW5lUmVjZWlwdC5wdXQoJ29wZW5DYXRjaFdlaWdodCcsIG9wZW5DYXRjaFdlaWdodCk7DQogICAgZWFjaExpbmVSZWNlaXB0LnB1dCgnb3BlblF1YW50aXR5UHVyY2hhc2VPcmRlclByaWNlVW0nLCBvcGVuUXVhbnRpdHlQdXJjaGFzZU9yZGVyUHJpY2VVbSk7DQogICAgZWFjaExpbmVSZWNlaXB0LnB1dCgnb3BlbkFtb3VudExvY2FsQ3VycmVuY3knLCBvcGVuQW1vdW50TG9jYWxDdXJyZW5jeSk7DQogICAgZWFjaExpbmVSZWNlaXB0LnB1dCgnb3BlbkFtb3VudE9yZGVyVW0nLCBvcGVuQW1vdW50T3JkZXJVbSk7DQogICAgZWFjaExpbmVSZWNlaXB0LnB1dCgncmVjZWl2ZWRRdWFudGl0eScsIHJlY2VpdmVkUXVhbnRpdHkpOw0KICB9DQoNCg0KIC8qKg0KICAqIGNoZWNrIG9wZW4gcmVjZWlwdCBsaW5lDQogICogDQogICovDQogICANCiAgcHVibGljIGJvb2xlYW4gaWZPcGVuUmVjZWlwdChIYXNodGFibGUgZWFjaExpbmVSZWNlaXB0KSB7DQogICAgb3BlbkxpbmVSZWNlaXB0TGlzdCA9IG5ldyBBcnJheUxpc3QgPCBIYXNodGFibGUgPiAoKTsNCiAgICBTdHJpbmcgaUZpbXN0MiA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YySU1TVCcpOw0KICAgIFN0cmluZyBpT3BlblF1YW50aXR5T3JkZXJVbSA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ29wZVF1YW50aXR5T3JkZXJVbScpOw0KICAgIGlGaW1zdDIgPSBpRmltc3QyID09IG51bGwgPyAiIiA6IGlGaW1zdDIudHJpbSgpOw0KICAgIGlPcGVuUXVhbnRpdHlPcmRlclVtID0gaU9wZW5RdWFudGl0eU9yZGVyVW0gPT0gbnVsbCA/ICIiIDogaU9wZW5RdWFudGl0eU9yZGVyVW0udHJpbSgpOw0KICAgIGlPcGVuUXVhbnRpdHlPcmRlclVtID0gaU9wZW5RdWFudGl0eU9yZGVyVW0uZXF1YWxzKCIiKSA/ICIwIiA6IGlPcGVuUXVhbnRpdHlPcmRlclVtLnJlcGxhY2UoJywnLCAnLicpOw0KICAgIERvdWJsZSBkT3BlblF1YW50aXR5T3JkZXJVbSA9IERvdWJsZS5wYXJzZURvdWJsZShpT3BlblF1YW50aXR5T3JkZXJVbSk7DQoNCiAgICByZXR1cm4gKCFpRmltc3QyLmVxdWFscygiOSIpICYmIChEb3VibGUuY29tcGFyZShkT3BlblF1YW50aXR5T3JkZXJVbSwgMC4wMDAxZCkgPiAwIHx8IERvdWJsZS5jb21wYXJlKGRPcGVuUXVhbnRpdHlPcmRlclVtLCAtMC4wMDAxZCkgPCAwKSk7DQogIH0NCg0KIC8qKg0KICAqIHNlbmQgUE8gbGluZSByZWNlaXB0IGRldGFpbHMgdG8gb3V0cHV0DQogICogDQogICovDQogICANCiAgcHVibGljIHdyaXRlUmVjZWlwdHMoU3RyaW5nIGVhY2hQdW5vLCBIYXNodGFibGUgZWFjaE9wZW5MaW5lUmVjZWlwdCwgSGFzaHRhYmxlIGVhY2hMaW5lKSB7DQogICAgc3RhbmRhcmRVbml0TWVhc3VyZSA9IGVhY2hMaW5lLmdldCgnc3RhbmRhcmRVbScpLnRvU3RyaW5nKCk7DQogICAgdW5pdE1lYXN1cmUgPSBlYWNoTGluZS5nZXQoJ1VOTVMnKS50b1N0cmluZygpOw0KICAgIGFsdGVybmF0ZVVuaXRNZWFzdXJlID0gZWFjaExpbmUuZ2V0KCdhbHRlcm5hdGVVbScpLnRvU3RyaW5nKCk7DQogICAgU3RyaW5nIFJRQVVNID0gZWFjaE9wZW5MaW5lUmVjZWlwdC5nZXQoJ3JlY2VpdmVkUXVhbnRpdHlBbHRVbScpOw0KICAgIFN0cmluZyBPQUxDID0gZWFjaE9wZW5MaW5lUmVjZWlwdC5nZXQoJ29wZW5BbW91bnRMb2NhbEN1cnJlbmN5JykudG9TdHJpbmcoKTsNCiAgICBkb3VibGUgUlFBTSA9IERvdWJsZS5wYXJzZURvdWJsZShSUUFVTSk7DQoJDQogICAgZG91YmxlIGFscHJDYXRjaFdlaWdodCA9IDAuMA0KICAgIGRvdWJsZSBhbHRwQ2F0Y2hXZWlnaHQgPSAwLjANCiAgICBpZiAoIWVhY2hPcGVuTGluZVJlY2VpcHQuZ2V0KCdvcGVuQ2F0Y2hXZWlnaHQnKS50b1N0cmluZygpLmVxdWFscygiIikpeyANCiAgICBhbHByQ2F0Y2hXZWlnaHQgPSBEb3VibGUucGFyc2VEb3VibGUoZWFjaExpbmUuZ2V0KCdMTkFNJykudG9TdHJpbmcoKSkgLyBEb3VibGUucGFyc2VEb3VibGUoZWFjaE9wZW5MaW5lUmVjZWlwdC5nZXQoJ29wZW5DYXRjaFdlaWdodCcpLnRvU3RyaW5nKCkpDQogICAgYWx0cENhdGNoV2VpZ2h0ID0gRG91YmxlLnBhcnNlRG91YmxlKGVhY2hPcGVuTGluZVJlY2VpcHQuZ2V0KCdvcGVuQW1vdW50T3JkZXJVbScpLnRvU3RyaW5nKCkpIC8gRG91YmxlLnBhcnNlRG91YmxlKGVhY2hPcGVuTGluZVJlY2VpcHQuZ2V0KCdvcGVuQ2F0Y2hXZWlnaHQnKS50b1N0cmluZygpKQ0KICAgICAgDQogICAgfQ0KCVN0cmluZyBjb252ZXJ0ZWRQcmljZSA9ICIiOw0KICAgIA0KICAgIGlmIChSUUFNICE9IDAuMCkgew0KICAgICAgDQogICAgICBkb3VibGUgY29udmVydGVkID0gRG91YmxlLnBhcnNlRG91YmxlKGVhY2hPcGVuTGluZVJlY2VpcHQuZ2V0KCdvcGVuQW1vdW50T3JkZXJVbScpLnRvU3RyaW5nKCkpIC8gRG91YmxlLnBhcnNlRG91YmxlKGVhY2hPcGVuTGluZVJlY2VpcHQuZ2V0KCdyZWNlaXZlZFF1YW50aXR5QWx0VW0nKS50b1N0cmluZygpKTsNCiAgICAgIA0KICAgICAgRGVjaW1hbEZvcm1hdCBkZWNPYmplY3QgPSBuZXcgRGVjaW1hbEZvcm1hdCgiIy4jIyMjIyMiKTsNCiAgICAgIGNvbnZlcnRlZFByaWNlID0gZGVjT2JqZWN0LmZvcm1hdChjb252ZXJ0ZWQpOw0KICAgIH0gZWxzZSB7DQogICAgICANCiAgICAgIGRvdWJsZSBjb252ZXJ0ZWQgPSAwLjAwMDAwMDsNCiAgICAgIERlY2ltYWxGb3JtYXQgZGVjT2JqZWN0ID0gbmV3IERlY2ltYWxGb3JtYXQoIiMuIyMjIyMjIik7DQogICAgICBjb252ZXJ0ZWRQcmljZSA9IGRlY09iamVjdC5mb3JtYXQoY29udmVydGVkKTsNCiAgICB9DQogICAgZG91YmxlIHZhbHVlUmVjUXR5ID0gRG91YmxlLnBhcnNlRG91YmxlKGVhY2hPcGVuTGluZVJlY2VpcHQuZ2V0KCdyZWNlaXZlZFF1YW50aXR5QWx0VW0nKS50b1N0cmluZygpKTsNCg0KICAgIGlmICh2YWx1ZVJlY1F0eSA+IDAgfHwgdmFsdWVSZWNRdHkgPCAwKSB7DQoJICBpZiAoZWFjaExpbmUuZ2V0KCdQVVNMJykudG9TdHJpbmcoKSA8ICc4NScgJiYgIW9JYXBjLmVxdWFscygiMSIpICYmICghZWFjaExpbmUuZ2V0KCdQVVNMJykudG9TdHJpbmcoKS5lcXVhbHMoJzQwJykgJiYgIWVhY2hMaW5lLmdldCgnUFVTTCcpLnRvU3RyaW5nKCkuZXF1YWxzKCc0NScpKSkgew0KCSAgbWkub3V0RGF0YS5wdXQoJ1JDVFAnLCAnTFInKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVTk8nLCBlYWNoUHVubyk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdQTkxJJywgZWFjaExpbmUuZ2V0KCdQTkxJJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdQTkxTJywgZWFjaExpbmUuZ2V0KCdQTkxTJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdJVE5PJywgZWFjaExpbmUuZ2V0KCdJVE5PJykudG9TdHJpbmcoKSk7DQoNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BOTEknLCBlYWNoTGluZS5nZXQoJ1BOTEknKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BOTFMnLCBlYWNoTGluZS5nZXQoJ1BOTFMnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1RSRFQnLCBlYWNoTGluZS5nZXQoJ1RSRFQnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xXSEwnLCBlYWNoTGluZS5nZXQoJ1dITE8nKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0lUTk8nLCBlYWNoTGluZS5nZXQoJ0lUTk8nKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BJVEQnLCBlYWNoTGluZS5nZXQoJ1BJVEQnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BJVFQnLCBlYWNoTGluZS5nZXQoJ1BJVFQnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1NJVEUnLCBlYWNoTGluZS5nZXQoJ1NJVEUnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NBUUEnLCBlYWNoTGluZS5nZXQoJ0NBUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JKUUEnLCBlYWNoTGluZS5nZXQoJ1JKUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1NEUUEnLCBlYWNoTGluZS5nZXQoJ1NEUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09SUUEnLCBlYWNoTGluZS5nZXQoJ09SUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0lWUUEnLCBlYWNoTGluZS5nZXQoJ0lWUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JWUUEnLCBlYWNoTGluZS5nZXQoJ1JWUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NGUUEnLCBlYWNoTGluZS5nZXQoJ0NGUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09RUFUnLCBlYWNoTGluZS5nZXQoJ29wZW5RdWFudGl0eVByaWNlVW0nKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVUkMnLCBlYWNoTGluZS5nZXQoJ1BVUkMnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xCVVknLCBlYWNoTGluZS5nZXQoJ0JVWUUnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1NUVU0nLCBlYWNoTGluZS5nZXQoJ3N0YW5kYXJkVW0nKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1VOTVMnLCBlYWNoTGluZS5nZXQoJ1VOTVMnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMVU0nLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0ZVVtJykudG9TdHJpbmcoKSk7DQogICAgICAgIGlmIChlYWNoT3BlbkxpbmVSZWNlaXB0LmdldCgnb3BlbkNhdGNoV2VpZ2h0JykudG9TdHJpbmcoKSAhPSAiIikgew0KICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDV1VOJywgZWFjaExpbmUuZ2V0KCdDV1VOJykudG9TdHJpbmcoKSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NXVU4nLCAiIik7DQogICAgICAgIH0NCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xOQU0nLCBlYWNoTGluZS5nZXQoJ0xOQU0nKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVUFInLCBlYWNoTGluZS5nZXQoJ3ByaWNlUGVyUGllY2VTdGFuZGFyZFVtJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdQVVFUJywgZWFjaExpbmUuZ2V0KCdQVVFUJykudG9TdHJpbmcoKSk7DQogICAgICAgIA0KICAgICAgICBpZiAoIWVhY2hPcGVuTGluZVJlY2VpcHQuZ2V0KCdvcGVuQ2F0Y2hXZWlnaHQnKS50b1N0cmluZygpLmVxdWFscygiIikpew0KCQkgICAgbWkub3V0RGF0YS5wdXQoJ0FMUFInLCBhbHRwQ2F0Y2hXZWlnaHQudG9TdHJpbmcoKSkNCiAgICAgICAgICANCiAgICAgICAgfQ0KCQkgICAgZWxzZXsNCgkJICAgICAgLy9taS5vdXREYXRhLnB1dCgnQUxQUicsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRpdmVQcmljZScpLnRvU3RyaW5nKCkpDQoJCSAgICAgIG1pLm91dERhdGEucHV0KCdBTFBSJywgIiIpDQoJCSAgICB9DQogICAgICAgIG1pLm91dERhdGEucHV0KCdQVENEJywgZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKSk7DQogICAgICAgIGlmIChlYWNoTGluZS5nZXQoJ1ZUQ0QnKS50b1N0cmluZygpLmxlbmd0aCgpID09IDEpIHsNCg0KICAgICAgICAgIG1pLm91dERhdGEucHV0KCdWVENEJywgJzAnICsgZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKSk7DQogICAgICAgIH0gZWxzZSB7DQoNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVlRDRCcsIGVhY2hMaW5lLmdldCgnVlRDRCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICB9DQogICAgICAgIG1pLm91dERhdGEucHV0KCdHUk1UJywgZWFjaExpbmUuZ2V0KCdHUk1UJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdMTU9EJywgZWFjaExpbmUuZ2V0KCdNT0RMJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdMVEVEJywgZWFjaExpbmUuZ2V0KCdURURMJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdMVEVMJywgZWFjaExpbmUuZ2V0KCdURUwxJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdMUFNMJywgZWFjaExpbmUuZ2V0KCdQVVNMJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdMUFNUJywgZWFjaExpbmUuZ2V0KCdQVVNUJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdQT1BOJywgZWFjaExpbmUuZ2V0KCdwb3BuRWExMycpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnUk9SQycsIGVhY2hMaW5lLmdldCgnUk9SQycpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnUk9STicsIGVhY2hMaW5lLmdldCgnUk9STicpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnUk9STCcsIGVhY2hMaW5lLmdldCgnUk9STCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnUk9SWCcsIGVhY2hMaW5lLmdldCgnUk9SWCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnU1VETycsIGVhY2hMaW5lLmdldCgnU1VETycpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnRlJSQycsIGVhY2hMaW5lLmdldCgnRlJSQycpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnRlJSRScsIGVhY2hMaW5lLmdldCgnRlJSRScpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnQURRQScsIGVhY2hMaW5lLmdldCgnQURRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1JRVCcsIGVhY2hMaW5lLmdldCgnT1JRVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnQU1PUCcsIGVhY2hMaW5lLmdldCgnYW1vdW50T3BlbicpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnQU1PUicsIGVhY2hMaW5lLmdldCgnTE5BTScpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFJDRScsIGNvbnZlcnRlZFByaWNlKQ0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnVU5JVCcsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRlVW0nKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09QUVQnLCBlYWNoTGluZS5nZXQoJ29wZW5RdWFudGl0eVN0YW5kYXJkVW0nKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUSVYnLCBlYWNoTGluZS5nZXQoJ2ludm9pY2VkUXVhbnRpdHlTdGFuZGFyZFVtJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdRVE9SJywgZWFjaExpbmUuZ2V0KCdvcmRlcmVkUXVhbnRpdHlTdGFuZGFyZFVtJykudG9TdHJpbmcoKSkNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUUlYnLCBlYWNoTGluZS5nZXQoJ3JlY2VpdmVkUXVhbnRpdHlTdGFuZGFyZFVtJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdBTFRVJywgZWFjaExpbmUuZ2V0KCdhbHRlcm5hdGVVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxRTycsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4nKS50b1N0cmluZygpKTsNCiAgICAgICAgDQogICAgICAgIGlmICghYWx0cENhdGNoV2VpZ2h0LmVxdWFscygiMC4wIikpew0KCQlpZiAoIWVhY2hPcGVuTGluZVJlY2VpcHQuZ2V0KCdyZWNlaXZlZFF1YW50aXR5QWx0VW0nKS50b1N0cmluZygpLmVxdWFscygiIikpew0KCQltaS5vdXREYXRhLnB1dCgnQUxUUCcsIGFsdHBDYXRjaFdlaWdodC50b1N0cmluZygpKX0NCgkJaWYgKGVhY2hPcGVuTGluZVJlY2VpcHQuZ2V0KCdyZWNlaXZlZFF1YW50aXR5QWx0VW0nKS50b1N0cmluZygpLmVxdWFscygiIikpew0KCQltaS5vdXREYXRhLnB1dCgnQUxUUCcsICIiKX0NCiAgICAgICAgfQ0KICAgICAgICBlbHNlew0KICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTFRQJywgZWFjaExpbmUuZ2V0KCdhbHRlcm5hdGl2ZVByaWNlJykudG9TdHJpbmcoKSk7DQogICAgICAgIH0NCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JFTFAnLCBlYWNoT3BlbkxpbmVSZWNlaXB0LmdldCgnRjJSRUxQJykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdSUE5NJywgZWFjaE9wZW5MaW5lUmVjZWlwdC5nZXQoJ0YyUkVQTicpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnUlBEVCcsIGVhY2hPcGVuTGluZVJlY2VpcHQuZ2V0KCdGMlRSRFQnKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JQUVQnLCBlYWNoT3BlbkxpbmVSZWNlaXB0LmdldCgncmVjZWl2ZWRRdWFudGl0eScpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnUlFBTCcsIGVhY2hPcGVuTGluZVJlY2VpcHQuZ2V0KCdyZWNlaXZlZFF1YW50aXR5QWx0VW0nKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09BT1UnLCBlYWNoT3BlbkxpbmVSZWNlaXB0LmdldCgnb3BlbkFtb3VudE9yZGVyVW0nKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09BTEMnLCBlYWNoT3BlbkxpbmVSZWNlaXB0LmdldCgnb3BlbkFtb3VudExvY2FsQ3VycmVuY3knKS50b1N0cmluZygpKTsNCiAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09QQ1cnLCBlYWNoT3BlbkxpbmVSZWNlaXB0LmdldCgnb3BlbkNhdGNoV2VpZ2h0JykudG9TdHJpbmcoKSk7DQogICAgICAgIG1pLm91dERhdGEucHV0KCdPUU9VJywgZWFjaE9wZW5MaW5lUmVjZWlwdC5nZXQoJ3JlY2VpdmVkUXVhbnRpdHlBbHRVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1FQTScsIGVhY2hPcGVuTGluZVJlY2VpcHQuZ2V0KCdvcGVuUXVhbnRpdHlQdXJjaGFzZU9yZGVyUHJpY2VVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgICBtaS53cml0ZSgpOw0KCSAgfQ0KICAgIH0NCg0KICB9DQoNCiAvKioNCiAgKiByZXRyaXZlIHJlY2VpcHQgY2hhcmdlcyBmcm9tIHRhYmxlIEZHUlBDTA0KICAqIA0KICAqLw0KICAgDQogIHB1YmxpYyBnYXRoZXJSZWNlaXB0Q2hhcmdlcyhTdHJpbmcgZWFjaFB1bm8sIEhhc2h0YWJsZSBlYWNoTGluZVJlY2VpcHQsIEhhc2h0YWJsZSBlYWNoTGluZSkgew0KICAgIGxpbmVDaGFyZ2VSZWNlaXB0TGlzdCA9IG5ldyBBcnJheUxpc3QgPCBIYXNodGFibGUgPiAoKTsNCiAgICBEQkFjdGlvbiBxdWVyeUZncnBjbCA9IGRhdGFiYXNlLnRhYmxlKCJGR1JQQ0wiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIkYzQ09OTyIsICJGM0RJVkkiLCAiRjNQVU5PIiwgIkYzUE5MSSIsICJGM1BOTFMiLCAiRjNSRVBOIiwgIkYzUkVMUCIsICJGM0NEU0UiLCAiRjNDRUlEIiwgIkYzRVhUWSIsICJGM1NDT0MiLCAiRjNTQ09QIiwgIkYzSVZRVCIsICJGM0lWUUEiLCAiRjNSQ0FDIiwgIkYzSUNBQyIpLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgcmVjb3JkRmdycGNsID0gcXVlcnlGZ3JwY2wuZ2V0Q29udGFpbmVyKCk7DQogICAgcmVjb3JkRmdycGNsLnNldCgiRjNDT05PIiwgSW50ZWdlci5wYXJzZUludChDT05PLnRyaW0oKSkpOw0KICAgIHJlY29yZEZncnBjbC5zZXQoIkYzRElWSSIsIG9EaXZpLnRyaW0oKSk7DQogICAgcmVjb3JkRmdycGNsLnNldCgiRjNQVU5PIiwgZWFjaFB1bm8udHJpbSgpKTsNCiAgICByZWNvcmRGZ3JwY2wuc2V0KCJGM1BOTEkiLCBlYWNoTGluZS5nZXQoJ1BOTEknKS50b1N0cmluZygpLnRvSW50ZWdlcigpKTsNCiAgICByZWNvcmRGZ3JwY2wuc2V0KCJGM1BOTFMiLCBlYWNoTGluZS5nZXQoJ1BOTFMnKS50b1N0cmluZygpLnRvSW50ZWdlcigpKTsNCiAgICByZWNvcmRGZ3JwY2wuc2V0KCdGM1JFUE4nLCBMb25nLnBhcnNlTG9uZyhlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMlJFUE4nKS50b1N0cmluZygpKSk7DQogICAgcmVjb3JkRmdycGNsLnNldCgnRjNSRUxQJywgSW50ZWdlci5wYXJzZUludChlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMlJFTFAnKS50b1N0cmluZygpKSk7DQogICAgDQogICAgaW50IHJlYWRzID0gcXVlcnlGZ3JwY2wucmVhZEFsbChyZWNvcmRGZ3JwY2wsIDcsIGdldEZncnBjbFJlY29yZHMpOw0KICB9DQoNCiAgQ2xvc3VyZSA8ID8gPiBnZXRGZ3JwY2xSZWNvcmRzID0gew0KICAgIERCQ29udGFpbmVyIHJlY29yZCAtPg0KICAgIEhhc2h0YWJsZSB0ZW1wVGFibGUgPSBuZXcgSGFzaHRhYmxlIDwgU3RyaW5nLA0KICAgIFN0cmluZyA+ICgpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ2Nkc2VMY3InLCByZWNvcmQuZ2V0KCdGM0NEU0UnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdjZWlkTGNyJywgcmVjb3JkLmdldCgnRjNDRUlEJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnZXh0eUxjcicsIHJlY29yZC5nZXQoJ0YzRVhUWScpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ3Njb2NMY3InLCByZWNvcmQuZ2V0KCdGM1NDT0MnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdzY29wTGNyJywgcmVjb3JkLmdldCgnRjNTQ09QJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnaXZxdExjcicsIHJlY29yZC5nZXQoJ0YzSVZRVCcpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ3B1bm9MY3InLCByZWNvcmQuZ2V0KCdGM1BVTk8nKS50b1N0cmluZygpICsgcmVjb3JkLmdldCgnRjNQTkxJJykudG9TdHJpbmcoKSArIHJlY29yZC5nZXQoJ0YzUE5MUycpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ2l2cWFMY3InLCByZWNvcmQuZ2V0KCdGM0lWUUEnKS50b1N0cmluZygpKTsNCiAgICB0ZW1wVGFibGUucHV0KCdyY2FjTGNyJywgcmVjb3JkLmdldCgnRjNSQ0FDJykudG9TdHJpbmcoKSk7DQogICAgdGVtcFRhYmxlLnB1dCgnaWNhY0xjcicsIHJlY29yZC5nZXQoJ0YzSUNBQycpLnRvU3RyaW5nKCkpOw0KICAgIHRlbXBUYWJsZUNoYXJnZXMucHV0KHJlY29yZC5nZXQoJ0YzUFVOTycpLnRvU3RyaW5nKCkudHJpbSgpICsgcmVjb3JkLmdldCgnRjNQTkxJJykudG9TdHJpbmcoKS50cmltKCkgKyByZWNvcmQuZ2V0KCdGM1BOTFMnKS50b1N0cmluZygpLnRyaW0oKSArIHJlY29yZC5nZXQoJ0YzQ0RTRScpLnRvU3RyaW5nKCkudHJpbSgpLCByZWNvcmQuZ2V0KCdGM0lWUUEnKS50b1N0cmluZygpLnRyaW0oKSk7DQogICAgdGVtcFRhYmxlQ2hhcmdlczEucHV0KHJlY29yZC5nZXQoJ0YzUFVOTycpLnRvU3RyaW5nKCkudHJpbSgpLCByZWNvcmQuZ2V0KCdGM1BOTEknKS50b1N0cmluZygpLnRyaW0oKSk7DQogICAgbGluZUNoYXJnZVJlY2VpcHRMaXN0LmFkZCh0ZW1wVGFibGUpOw0KICAgIA0KICB9DQoNCiAgLyoqIHJldHJpdmUgY2hhcmdlIHRleHQgdXNpbmcgUFBTMjgwTUkuR2V0RWxlbWVudA0KICAgKiANCiAgICovDQogICANCiAgIA0KICBwdWJsaWMgZ2V0Q2hhcmdlVGV4dChIYXNodGFibGUgZWFjaExpbmVDaGFyZ2VSZWNlaXB0KSB7DQogICAgU3RyaW5nIENFSUQgPSBlYWNoTGluZUNoYXJnZVJlY2VpcHQuZ2V0KCdjZWlkTGNyJyk7DQogICAgU3RyaW5nIFRYMzAgPSAiIjsNCiAgICBib29sZWFuIHJlY29yZEV4aXN0cyA9IHRydWU7DQogICAgZGVmIGNhbGxiYWNrID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpOw0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBUWDMwID0gcmVzdWx0cy5nZXQoJ1RYMzAnKTsNCg0KICAgICAgfQ0KICAgICAgZWFjaExpbmVDaGFyZ2VSZWNlaXB0LnB1dCgndHgzMExjcicsIFRYMzApOw0KDQogICAgfQ0KICAgIGRlZiBwYXJhbXMgPSBbIkNFSUQiOiBDRUlELnRyaW0oKV07DQogICAgbWlDYWxsZXIuY2FsbCgiUFBTMjgwTUkiLCAiR2V0RWxlbWVudCIsIHBhcmFtcywgY2FsbGJhY2spOw0KICB9DQogIA0KICAvKiogY2FsY3VsYXRlIHJlY2VpcHQgY2hhcmdlIHF1YW50aXRpZXMNCiAgICovDQogIHB1YmxpYyBjYWxjdWxhdGVSZWNlaXB0Q2hhcmdlUXVhbnRpdGllcyhIYXNodGFibGUgZWFjaExpbmUsIEhhc2h0YWJsZSBlYWNoTGluZVJlY2VpcHQsIEhhc2h0YWJsZSBlYWNoTGluZUNoYXJnZVJlY2VpcHQpIHsNCiAgICBTdHJpbmcgUFVVTiA9IGVhY2hMaW5lLmdldCgnUFVVTicpOw0KICAgIFN0cmluZyBQUFVOID0gZWFjaExpbmUuZ2V0KCdQUFVOJyk7DQogICAgU3RyaW5nIEYyQ0FXRSA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YyQ0FXRScpOw0KICAgIFN0cmluZyBSUFFBID0gZWFjaExpbmVSZWNlaXB0LmdldCgnRjJSUFFBJyk7DQogICAgU3RyaW5nIEYyUlBRVCA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YyUlBRVCcpOw0KICAgIFN0cmluZyBGM0lWUVQgPSBlYWNoTGluZUNoYXJnZVJlY2VpcHQuZ2V0KCdpdnF0TGNyJyk7DQogICAgU3RyaW5nIEYyUlBRQSA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YyUlBRQScpOw0KICAgIFN0cmluZyBGM0lWUUEgPSBlYWNoTGluZUNoYXJnZVJlY2VpcHQuZ2V0KCdpdnFhTGNyJyk7DQogICAgaW52UXR5ID0gRjNJVlFBOw0KICAgIA0KICAgIFN0cmluZyBGMklWQ1cgPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMklWQ1cnKTsNCiAgICBTdHJpbmcgRjNSQ0FDID0gZWFjaExpbmVDaGFyZ2VSZWNlaXB0LmdldCgncmNhY0xjcicpOw0KICAgIFN0cmluZyBGM0lDQUMgPSBlYWNoTGluZUNoYXJnZVJlY2VpcHQuZ2V0KCdpY2FjTGNyJyk7DQogICAgU3RyaW5nIEYzU0NPUCA9IGVhY2hMaW5lQ2hhcmdlUmVjZWlwdC5nZXQoJ3Njb3BMY3InKTsNCiAgICBTdHJpbmcgRjNTQ09DID0gZWFjaExpbmVDaGFyZ2VSZWNlaXB0LmdldCgnc2NvY0xjcicpOw0KICAgIFN0cmluZyBGMlNFUkEgPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMlNFUkEnKTsNCg0KICAgIFBVVU4gPSBQVVVOID09IG51bGwgPyAiIiA6IFBVVU4udHJpbSgpOw0KICAgIFBQVU4gPSBQUFVOID09IG51bGwgPyAiIiA6IFBQVU4udHJpbSgpOw0KICAgIEYyQ0FXRSA9IEYyQ0FXRSA9PSBudWxsID8gIiIgOiBGMkNBV0UudHJpbSgpOw0KICAgIFJQUUEgPSBSUFFBID09IG51bGwgPyAiIiA6IFJQUUEudHJpbSgpOw0KICAgIEYyUlBRVCA9IEYyUlBRVCA9PSBudWxsID8gIiIgOiBGMlJQUVQudHJpbSgpOw0KICAgIEYzSVZRVCA9IEYzSVZRVCA9PSBudWxsID8gIiIgOiBGM0lWUVQudHJpbSgpOw0KICAgIEYyUlBRQSA9IEYyUlBRQSA9PSBudWxsID8gIiIgOiBGMlJQUUEudHJpbSgpOw0KICAgIEYzSVZRQSA9IEYzSVZRQSA9PSBudWxsID8gIiIgOiBGM0lWUUEudHJpbSgpOw0KICAgIEYySVZDVyA9IEYySVZDVyA9PSBudWxsID8gIiIgOiBGMklWQ1cudHJpbSgpOw0KICAgIEYzUkNBQyA9IEYzUkNBQyA9PSBudWxsID8gIiIgOiBGM1JDQUMudHJpbSgpOw0KICAgIEYzSUNBQyA9IEYzSUNBQyA9PSBudWxsID8gIiIgOiBGM0lDQUMudHJpbSgpOw0KICAgIEYzU0NPUCA9IEYzU0NPUCA9PSBudWxsID8gIiIgOiBGM1NDT1AudHJpbSgpOw0KICAgIEYzU0NPQyA9IEYzU0NPQyA9PSBudWxsID8gIiIgOiBGM1NDT0MudHJpbSgpOw0KICAgIEYyU0VSQSA9IEYyU0VSQSA9PSBudWxsID8gIiIgOiBGMlNFUkEudHJpbSgpOw0KICAgIG9EbWN1ID0gb0RtY3UgPT0gbnVsbCA/ICIiIDogb0RtY3UudHJpbSgpOw0KICAgIG9yZGVyVW1EY2NkID0gb3JkZXJVbURjY2QgPT0gbnVsbCA/ICIiIDogb3JkZXJVbURjY2QudHJpbSgpOw0KICAgIGJhc2ljVW1EY2NkID0gYmFzaWNVbURjY2QgPT0gbnVsbCA/ICIiIDogYmFzaWNVbURjY2QudHJpbSgpOw0KDQogICAgRG91YmxlIGRGY2F3ZTIgPSBEb3VibGUucGFyc2VEb3VibGUoRjJDQVdFLmlzRW1wdHkoKSA/ICIwIiA6IEYyQ0FXRS50cmltKCkpOw0KICAgIERvdWJsZSBkRnJwcXQyID0gRG91YmxlLnBhcnNlRG91YmxlKEYyUlBRVC5pc0VtcHR5KCkgPyAiMCIgOiBGMlJQUVQudHJpbSgpKTsNCiAgICBEb3VibGUgZEZpdnF0MyA9IERvdWJsZS5wYXJzZURvdWJsZShGM0lWUVQuaXNFbXB0eSgpID8gIjAiIDogRjNJVlFULnRyaW0oKSk7DQogICAgRG91YmxlIGRGcnBxYTIgPSBEb3VibGUucGFyc2VEb3VibGUoRjJSUFFBLmlzRW1wdHkoKSA/ICIwIiA6IEYyUlBRQS50cmltKCkpOw0KICAgIERvdWJsZSBkRnJjYWMzID0gRG91YmxlLnBhcnNlRG91YmxlKEYzUkNBQy5pc0VtcHR5KCkgPyAiMCIgOiBGM1JDQUMudHJpbSgpKTsNCiAgICBEb3VibGUgZEZzZXJhMiA9IERvdWJsZS5wYXJzZURvdWJsZShGMlNFUkEuaXNFbXB0eSgpID8gIjAiIDogRjJTRVJBLnRyaW0oKSk7DQoNCiAgICBpbnQgaW50QmFzaWNVbURjY2QgPSBJbnRlZ2VyLnZhbHVlT2YoYmFzaWNVbURjY2QudHJpbSgpKTsNCiAgICBpbnQgaW50T3JkZXJVbURjY2QgPSBvcmRlclVtRGNjZC5pc0VtcHR5KCkgPyBpbnRCYXNpY1VtRGNjZCA6IEludGVnZXIudmFsdWVPZihvcmRlclVtRGNjZC50cmltKCkpOw0KDQogICAgRG91YmxlIGRSZWNlaXZlZFF1YW50aXR5ID0gMC4wZDsNCiAgICBEb3VibGUgZFJlY2VpdmVkQ29zdEFtb3VudE9yZGVyVW1PcmRlckN1cnJlbmN5ID0gMC4wZDsNCg0KICAgIGlmIChvRG1jdS5lcXVhbHMoIjEiKSkgew0KICAgICAgZEZzZXJhMiA9IDFkIC8gZEZzZXJhMjsNCiAgICB9DQogICAgZFJlY2VpdmVkUXVhbnRpdHkgPSBkRnJwcWEyOw0KICAgIGRSZWNlaXZlZENvc3RBbW91bnRPcmRlclVtT3JkZXJDdXJyZW5jeSA9IERvdWJsZS5jb21wYXJlKGRGcnBxdDIsIDAuMGQpID09IDAgPyAwLjBkIDogKERvdWJsZSkoKGRGcnBxYTIgLyBkRnJwcXQyKSAqIGRGcmNhYzMgKiBkRnNlcmEyKTsNCiAgICByZWNlaXZlZFF1YW50aXR5T3JkZXJVbSA9IERvdWJsZS50b1N0cmluZyhuZXcgQmlnRGVjaW1hbChkUmVjZWl2ZWRRdWFudGl0eSkuc2V0U2NhbGUoaW50T3JkZXJVbURjY2QsIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS5kb3VibGVWYWx1ZSgpKTsNCiAgICByZWNldmRDb3N0QW1vdW50T3JkZXJVbU9yZGVyQ3VycmVuY3kgPSBEb3VibGUudG9TdHJpbmcobmV3IEJpZ0RlY2ltYWwoZFJlY2VpdmVkQ29zdEFtb3VudE9yZGVyVW1PcmRlckN1cnJlbmN5KS5zZXRTY2FsZShudW1iZXJPZkRlY2ltYWxzLnRvSW50ZWdlcigpLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkuZG91YmxlVmFsdWUoKSk7DQogICAgb3BlUXVhbnRpdHlPcmRlclVtID0gRG91YmxlLnRvU3RyaW5nKG5ldyBCaWdEZWNpbWFsKChkRnJwcXQyIC0gZEZpdnF0MykpLnNldFNjYWxlKGludEJhc2ljVW1EY2NkLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkuZG91YmxlVmFsdWUoKSk7DQoNCiAgICBlYWNoTGluZUNoYXJnZVJlY2VpcHQucHV0KCdyZWNlaXZlZFF1YW50aXR5T3JkZXJVbScsIHJlY2VpdmVkUXVhbnRpdHlPcmRlclVtKTsNCiAgICBlYWNoTGluZUNoYXJnZVJlY2VpcHQucHV0KCdyZWNldmRDb3N0QW1vdW50T3JkZXJVbU9yZGVyQ3VycmVuY3knLCByZWNldmRDb3N0QW1vdW50T3JkZXJVbU9yZGVyQ3VycmVuY3kpOw0KICAgIGVhY2hMaW5lQ2hhcmdlUmVjZWlwdC5wdXQoJ29wZVF1YW50aXR5T3JkZXJVbScsIG9wZVF1YW50aXR5T3JkZXJVbSk7DQogIH0NCg0KICAvKiogQ2hlY2sgaWYgcmVjZWlwdCBjaGFyZ2VzIG9wZW4NCiAgICovDQogIHB1YmxpYyBpZlJlY2VpcHRDaGFyZ2VPcGVuKEhhc2h0YWJsZSBlYWNoTGluZUNoYXJnZVJlY2VpcHQpIHsNCiAgICBTdHJpbmcgb3BlUXVhbnRpdHlPcmRlclVtID0gZWFjaExpbmVDaGFyZ2VSZWNlaXB0LmdldCgnb3BlUXVhbnRpdHlPcmRlclVtJyk7DQogICAgU3RyaW5nIHJlY2V2ZENvc3RBbW91bnRPcmRlclVtT3JkZXJDdXJyZW5jeSA9IGVhY2hMaW5lQ2hhcmdlUmVjZWlwdC5nZXQoJ3JlY2V2ZENvc3RBbW91bnRPcmRlclVtT3JkZXJDdXJyZW5jeScpOw0KDQogICAgb3BlUXVhbnRpdHlPcmRlclVtID0gb3BlUXVhbnRpdHlPcmRlclVtID09IG51bGwgPyAiIiA6IG9wZVF1YW50aXR5T3JkZXJVbS50cmltKCk7DQogICAgb3BlUXVhbnRpdHlPcmRlclVtID0gb3BlUXVhbnRpdHlPcmRlclVtLmVxdWFscygiIikgPyAiMCIgOiBvcGVRdWFudGl0eU9yZGVyVW0ucmVwbGFjZSgnLCcsICcuJyk7DQoNCiAgICBCaWdEZWNpbWFsIG9wZW5RdWFudGl0eU9yZGVyVW0gPSBuZXcgQmlnRGVjaW1hbChvcGVRdWFudGl0eU9yZGVyVW0pOw0KDQogICAgcmVjZXZkQ29zdEFtb3VudE9yZGVyVW1PcmRlckN1cnJlbmN5ID0gcmVjZXZkQ29zdEFtb3VudE9yZGVyVW1PcmRlckN1cnJlbmN5ID09IG51bGwgPyAiIiA6IHJlY2V2ZENvc3RBbW91bnRPcmRlclVtT3JkZXJDdXJyZW5jeS50cmltKCk7DQogICAgcmVjZXZkQ29zdEFtb3VudE9yZGVyVW1PcmRlckN1cnJlbmN5ID0gcmVjZXZkQ29zdEFtb3VudE9yZGVyVW1PcmRlckN1cnJlbmN5LmVxdWFscygiIikgPyAiMCIgOiByZWNldmRDb3N0QW1vdW50T3JkZXJVbU9yZGVyQ3VycmVuY3kucmVwbGFjZSgnLCcsICcuJyk7DQoNCiAgICBCaWdEZWNpbWFsIHJlY2VpdmVkQ29zdEFtb3VudE9yZGVyVW1PcmRlckN1cnJlbmN5ID0gbmV3IEJpZ0RlY2ltYWwocmVjZXZkQ29zdEFtb3VudE9yZGVyVW1PcmRlckN1cnJlbmN5KTsNCg0KICAgIFN0cmluZyBleHBvcnRFbXB0eUNoYXJnZXMgPSBleHBvcnRFbXB0eSA9PSBudWxsID8gIiIgOiBleHBvcnRFbXB0eS50cmltKCk7DQoNCiAgICBib29sZWFuIG9wZW5RdWFudGl0eSA9IG9wZW5RdWFudGl0eU9yZGVyVW0uY29tcGFyZVRvKEJpZ0RlY2ltYWwuWkVSTykgIT0gMDsNCg0KICAgIGJvb2xlYW4gb3BlbkFtb3VudCA9IHJlY2VpdmVkQ29zdEFtb3VudE9yZGVyVW1PcmRlckN1cnJlbmN5LmNvbXBhcmVUbyhCaWdEZWNpbWFsLlpFUk8pICE9IDA7DQoNCiAgICBpZiAoIWV4cG9ydEVtcHR5Q2hhcmdlcy5lcXVhbHMoIjEiKSAmJiAhb3BlbkFtb3VudCAmJiBvcGVuUXVhbnRpdHkpIHsNCiAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9IGVsc2Ugew0KICAgICAgcmV0dXJuIG9wZW5RdWFudGl0eTsNCiAgICB9DQogIH0NCiAgLyoqIGNoZWNrIFBPIGxpbmUgY2hhcmdlIG9yZGVyIHByaWNlIGFuZCBCYXNpYyB1bml0DQogICAqLw0KICBwdWJsaWMgY2hlY2tDaGFyZ2VPcmRlclByaWNlQW5kQmFzZVVuaXQoSGFzaHRhYmxlIGVhY2hMaW5lLCBIYXNodGFibGUgZWFjaExpbmVSZWNlaXB0LCBIYXNodGFibGUgZWFjaExpbmVDaGFyZ2VSZWNlaXB0KSB7DQogICAgU3RyaW5nIFBVVU4gPSBlYWNoTGluZS5nZXQoJ1BVVU4nKTsNCiAgICBTdHJpbmcgVU5NUyA9IGVhY2hMaW5lLmdldCgnVU5NUycpOw0KICAgIFN0cmluZyBDV1VOID0gZWFjaExpbmUuZ2V0KCdDV1VOJyk7DQogICAgU3RyaW5nIFBQVU4gPSBlYWNoTGluZS5nZXQoJ1BQVU4nKTsNCiAgICBTdHJpbmcgT1JRQSA9IGVhY2hMaW5lLmdldCgnT1JRQScpOw0KICAgIFN0cmluZyBPUlFUID0gZWFjaExpbmUuZ2V0KCdPUlFUJyk7DQogICAgU3RyaW5nIFJQUUEgPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMlJQUUEnKTsNCiAgICByZXBRdHkgPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMlJQUUEnKTsNCiAgICBTdHJpbmcgUlBRVCA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YyUlBRVCcpOw0KICAgIFN0cmluZyBJVlFBID0gZWFjaExpbmVDaGFyZ2VSZWNlaXB0LmdldCgnaXZxYUxjcicpOw0KICAgIFN0cmluZyBJVlFUID0gZWFjaExpbmVDaGFyZ2VSZWNlaXB0LmdldCgnaXZxdExjcicpOw0KDQogICAgaWYgKFBVVU4udHJpbSgpLmVxdWFscyhVTk1TLnRyaW0oKSkpIHsNCiAgICAgIGVhY2hMaW5lQ2hhcmdlUmVjZWlwdC5yZXBsYWNlKCdpdnF0TGNyJywgSVZRQSk7DQogICAgfSBlbHNlIHsNCiAgICAgIEJpZ0RlY2ltYWwgZGJsSXZxYSA9IG5ldyBCaWdEZWNpbWFsKElWUUEpOw0KICAgICAgQmlnRGVjaW1hbCBkYmxDb2ZhID0gbmV3IEJpZ0RlY2ltYWwob3JkZXJVbUNvZmEpOw0KDQogICAgICBpZiAob3JkZXJVbURtY2YuZXF1YWxzKCIxIikpIHsNCiAgICAgICAgSVZRVCA9IGRibEl2cWEubXVsdGlwbHkoZGJsQ29mYSkuc2V0U2NhbGUoOCwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTsNCg0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgSVZRVCA9IGRibEl2cWEuZGl2aWRlKGRibENvZmEpLnNldFNjYWxlKDgsIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCk7DQogICAgICB9DQogICAgICBlYWNoTGluZUNoYXJnZVJlY2VpcHQucmVwbGFjZSgnaXZxdExjcicsIElWUVQpOw0KICAgIH0NCg0KICAgIGlmIChQUFVOLnRyaW0oKS5lcXVhbHMoUFVVTi50cmltKCkpKSB7DQogICAgICBPUlFBID0gT1JRQSA9PSBudWxsID8gIiIgOiBPUlFBLnRyaW0oKTsNCiAgICAgIFJQUUEgPSBSUFFBID09IG51bGwgPyAiIiA6IFJQUUEudHJpbSgpOw0KICAgICAgSVZRQSA9IElWUUEgPT0gbnVsbCA/ICIiIDogSVZRQS50cmltKCk7DQoNCiAgICAgIG9yZGVyZFF1YW50aXR5UHJpY2VVbSA9IE9SUUE7DQogICAgICByZWNlaXZlZFF1YW50aXR5UHJpY2VVbSA9IFJQUUE7DQogICAgICBpbnZvaWNlZFF1YW50aXR5UHJpY2VVbSA9IElWUUE7DQoNCiAgICAgIEJpZ0RlY2ltYWwgZGJsUnBxYSA9IG5ldyBCaWdEZWNpbWFsKFJQUUEpOw0KICAgICAgQmlnRGVjaW1hbCBkYmxJdnFhID0gbmV3IEJpZ0RlY2ltYWwoSVZRQSk7DQoNCiAgICAgIG9wZW5RdWFudGl0eVByaWNlVW0gPSAoZGJsUnBxYSAtIGRibEl2cWEpLnNldFNjYWxlKDQsIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCk7DQogICAgfQ0KDQogICAgaWYgKFBQVU4udHJpbSgpLmVxdWFscyhVTk1TLnRyaW0oKSkgJiYgIVBQVU4udHJpbSgpLmVxdWFscyhQVVVOLnRyaW0oKSkpIHsNCiAgICAgIE9SUVQgPSBPUlFUID09IG51bGwgPyAiIiA6IE9SUVQudHJpbSgpOw0KICAgICAgUlBRVCA9IFJQUVQgPT0gbnVsbCA/ICIiIDogUlBRVC50cmltKCk7DQogICAgICBJVlFUID0gSVZRVCA9PSBudWxsID8gIiIgOiBJVlFULnRyaW0oKTsNCg0KICAgICAgb3JkZXJkUXVhbnRpdHlQcmljZVVtID0gT1JRVDsNCiAgICAgIHJlY2VpdmVkUXVhbnRpdHlQcmljZVVtID0gUlBRVDsNCiAgICAgIGludm9pY2VkUXVhbnRpdHlQcmljZVVtID0gSVZRVDsNCg0KICAgICAgQmlnRGVjaW1hbCBkYmxScHF0ID0gbmV3IEJpZ0RlY2ltYWwoUlBRVCk7DQogICAgICBCaWdEZWNpbWFsIGRibEl2cXQgPSBuZXcgQmlnRGVjaW1hbChJVlFUKTsNCg0KICAgICAgb3BlblF1YW50aXR5UHJpY2VVbSA9IChkYmxScHF0IC0gZGJsSXZxdCkuc2V0U2NhbGUoNCwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTsNCiAgICB9DQogICAgaWYgKCFQUFVOLnRyaW0oKS5lcXVhbHMoVU5NUy50cmltKCkpICYmICFQUFVOLnRyaW0oKS5lcXVhbHMoUFVVTi50cmltKCkpKSB7DQogICAgICBJVlFUID0gSVZRVCA9PSBudWxsID8gIiIgOiBJVlFULnRyaW0oKTsNCiAgICAgIE9SUVQgPSBPUlFUID09IG51bGwgPyAiIiA6IE9SUVQudHJpbSgpOw0KICAgICAgUlBRVCA9IFJQUVQgPT0gbnVsbCA/ICIiIDogUlBRVC50cmltKCk7DQogICAgICBTdHJpbmcgRENDRCA9IHByaWNlVW1EY2NkID09IG51bGwgPyAiIiA6IHByaWNlVW1EY2NkLnRyaW0oKTsNCiAgICAgIFN0cmluZyBETUNGID0gcHJpY2VVbURtY2YgPT0gbnVsbCA/ICIiIDogcHJpY2VVbURtY2YudHJpbSgpOw0KICAgICAgU3RyaW5nIENPRkEgPSBwcmljZVVtQ29mYSA9PSBudWxsID8gIiIgOiBwcmljZVVtQ29mYS50cmltKCk7DQoNCiAgICAgIEJpZ0RlY2ltYWwgZGJsSXZxdCA9IG5ldyBCaWdEZWNpbWFsKElWUVQpOw0KICAgICAgQmlnRGVjaW1hbCBkYmxDb2ZhID0gbmV3IEJpZ0RlY2ltYWwoQ09GQSk7DQogICAgICBCaWdEZWNpbWFsIGRibE9ycXQgPSBuZXcgQmlnRGVjaW1hbChPUlFUKTsNCiAgICAgIEJpZ0RlY2ltYWwgZGJsUnBxdCA9IG5ldyBCaWdEZWNpbWFsKFJQUVQpOw0KDQogICAgICBpZiAoQVVUUEEuZXF1YWxzKCIxIikpIHsNCiAgICAgICAgaWYgKERNQ0YuZXF1YWxzKCIxIikpIHsNCg0KICAgICAgICAgIG9yZGVyZFF1YW50aXR5UHJpY2VVbSA9IGRibE9ycXQuZGl2aWRlKGRibENvZmEpLnNldFNjYWxlKEludGVnZXIucGFyc2VJbnQoRENDRCksIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCk7DQogICAgICAgICAgcmVjZWl2ZWRRdWFudGl0eVByaWNlVW0gPSBkYmxScHF0LmRpdmlkZShkYmxDb2ZhKS5zZXRTY2FsZShJbnRlZ2VyLnBhcnNlSW50KERDQ0QpLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpOw0KICAgICAgICAgIG9wZW5RdWFudGl0eVByaWNlVW0gPSAoZGJsUnBxdCAtIGRibEl2cXQpLmRpdmlkZShkYmxDb2ZhKS5zZXRTY2FsZShJbnRlZ2VyLnBhcnNlSW50KERDQ0QpLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpOw0KDQogICAgICAgIH0gZWxzZSB7DQoNCiAgICAgICAgICBvcmRlcmRRdWFudGl0eVByaWNlVW0gPSBkYmxPcnF0Lm11bHRpcGx5KGRibENvZmEpLnNldFNjYWxlKEludGVnZXIucGFyc2VJbnQoRENDRCksIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCk7DQogICAgICAgICAgcmVjZWl2ZWRRdWFudGl0eVByaWNlVW0gPSBkYmxScHF0Lm11bHRpcGx5KGRibENvZmEpLnNldFNjYWxlKEludGVnZXIucGFyc2VJbnQoRENDRCksIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCk7DQogICAgICAgICAgb3BlblF1YW50aXR5UHJpY2VVbSA9IChkYmxScHF0IC0gZGJsSXZxdCkubXVsdGlwbHkoZGJsQ29mYSkuc2V0U2NhbGUoSW50ZWdlci5wYXJzZUludChEQ0NEKSwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgaWYgKEFVVFBBLmVxdWFscygiMiIpKSB7DQogICAgICAgIGlmIChETUNGLmVxdWFscygiMSIpKSB7DQoNCiAgICAgICAgICBvcmRlcmRRdWFudGl0eVByaWNlVW0gPSBkYmxPcnF0LmRpdmlkZShkYmxDb2ZhKS5zZXRTY2FsZSgyLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpOw0KICAgICAgICAgIHJlY2VpdmVkUXVhbnRpdHlQcmljZVVtID0gZGJsUnBxdC5kaXZpZGUoZGJsQ29mYSkuc2V0U2NhbGUoMiwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTsNCiAgICAgICAgICBvcGVuUXVhbnRpdHlQcmljZVVtID0gKGRibFJwcXQgLSBkYmxJdnF0KS5kaXZpZGUoZGJsQ29mYSkuc2V0U2NhbGUoMiwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTsNCg0KICAgICAgICB9IGVsc2Ugew0KDQogICAgICAgICAgb3JkZXJkUXVhbnRpdHlQcmljZVVtID0gZGJsT3JxdC5tdWx0aXBseShkYmxDb2ZhKS5zZXRTY2FsZSgyLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpOw0KICAgICAgICAgIHJlY2VpdmVkUXVhbnRpdHlQcmljZVVtID0gZGJsUnBxdC5tdWx0aXBseShkYmxDb2ZhKS5zZXRTY2FsZSgyLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpOw0KICAgICAgICAgIG9wZW5RdWFudGl0eVByaWNlVW0gPSAoZGJsUnBxdCAtIGRibEl2cXQpLm11bHRpcGx5KGRibENvZmEpLnNldFNjYWxlKDIsIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQoNCiAgICBSUFFBID0gUlBRQSA9PSBudWxsID8gIiIgOiBSUFFBLnRyaW0oKTsNCiAgICBJVlFBID0gSVZRQSA9PSBudWxsID8gIiIgOiBJVlFBLnRyaW0oKTsNCiAgICBvcmRlclVtRGNjZCA9IG9yZGVyVW1EY2NkID09IG51bGwgPyAiIiA6IG9yZGVyVW1EY2NkLnRyaW0oKTsNCg0KICAgIEJpZ0RlY2ltYWwgZGJsUnBxYSA9IG5ldyBCaWdEZWNpbWFsKFJQUUEpOw0KICAgIEJpZ0RlY2ltYWwgZGJsSXZxYSA9IG5ldyBCaWdEZWNpbWFsKElWUUEpOw0KICAgIEJpZ0RlY2ltYWwgZGJsSW52UXR5ID0gbmV3IEJpZ0RlY2ltYWwoaW52UXR5KTsNCiAgICBpbnQgaW50T3JkZXJVbURjY2QgPSBJbnRlZ2VyLnZhbHVlT2Yob3JkZXJVbURjY2QpOw0KDQogICAgb3BlUXVhbnRpdHlPcmRlclVtID0gZGJsUnBxYS5zdWJ0cmFjdChkYmxJdnFhKS5zZXRTY2FsZShpbnRPcmRlclVtRGNjZCwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTsNCiAgICBvcGVuUXVhbnRpdHlPcmRlclVtYSA9IGRibFJwcWEuc3VidHJhY3QoZGJsSW52UXR5KS5zZXRTY2FsZShpbnRPcmRlclVtRGNjZCwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTsNCg0KICAgIG9wZVF1YW50aXR5T3JkZXJVbSA9IG9wZVF1YW50aXR5T3JkZXJVbSA9PSBudWxsID8gIiIgOiBvcGVRdWFudGl0eU9yZGVyVW0udHJpbSgpOw0KICAgIHJlY2V2ZENvc3RBbW91bnRPcmRlclVtT3JkZXJDdXJyZW5jeSA9IHJlY2V2ZENvc3RBbW91bnRPcmRlclVtT3JkZXJDdXJyZW5jeSA9PSBudWxsID8gIiIgOiByZWNldmRDb3N0QW1vdW50T3JkZXJVbU9yZGVyQ3VycmVuY3kudHJpbSgpOw0KICAgIHJlY2VpdmVkUXVhbnRpdHlQcmljZVVtID0gcmVjZWl2ZWRRdWFudGl0eVByaWNlVW0gPT0gbnVsbCA/ICIiIDogcmVjZWl2ZWRRdWFudGl0eVByaWNlVW0udHJpbSgpOw0KICAgIHJlY2VpdmVkUXVhbnRpdHlPcmRlclVtID0gcmVjZWl2ZWRRdWFudGl0eU9yZGVyVW0gPT0gbnVsbCA/ICIiIDogcmVjZWl2ZWRRdWFudGl0eU9yZGVyVW0udHJpbSgpOw0KICAgIG9wZW5RdWFudGl0eVByaWNlVW0gPSBvcGVuUXVhbnRpdHlQcmljZVVtID09IG51bGwgPyAiIiA6IG9wZW5RdWFudGl0eVByaWNlVW0udHJpbSgpOw0KDQogICAgQmlnRGVjaW1hbCBkYmxPcGVuUXVhbnRpdHlPcmRlclVtID0gbmV3IEJpZ0RlY2ltYWwob3BlUXVhbnRpdHlPcmRlclVtKTsNCiAgICBCaWdEZWNpbWFsIGRibFJlY2VpdmVkQ29zdEFtb3VudE9yZGVyVW1PcmRlckN1cnJlbmN5ID0gbmV3IEJpZ0RlY2ltYWwocmVjZXZkQ29zdEFtb3VudE9yZGVyVW1PcmRlckN1cnJlbmN5KTsNCiAgICBCaWdEZWNpbWFsIGRibFJlY2VpdmVkUXVhbnRpdHlQcmljZVVtID0gbmV3IEJpZ0RlY2ltYWwocmVjZWl2ZWRRdWFudGl0eVByaWNlVW0pOw0KICAgIEJpZ0RlY2ltYWwgZGJsUmVjZWl2ZWRRdWFudGl0eU9yZGVyVW0gPSBuZXcgQmlnRGVjaW1hbChyZWNlaXZlZFF1YW50aXR5T3JkZXJVbSk7DQogICAgQmlnRGVjaW1hbCBkYmxPcGVuUXVhbnRpdHlQcmljZVVtID0gbmV3IEJpZ0RlY2ltYWwob3BlblF1YW50aXR5UHJpY2VVbSk7DQoNCiAgICBCaWdEZWNpbWFsIGRibFByaWNlUGVyUGllY2VPcmRlclVtID0gZGJsUmVjZWl2ZWRRdWFudGl0eU9yZGVyVW0uY29tcGFyZVRvKDAuMCkgPT0gMCA/IDAuMCA6IGRibFJlY2VpdmVkQ29zdEFtb3VudE9yZGVyVW1PcmRlckN1cnJlbmN5IC8gZGJsUmVjZWl2ZWRRdWFudGl0eU9yZGVyVW07DQogICAgQmlnRGVjaW1hbCBkYmxQcmljZVBlclBpZWNlUHJpY2VVbSA9IGRibFJlY2VpdmVkUXVhbnRpdHlQcmljZVVtLmNvbXBhcmVUbygwLjApID09IDAgPyAwLjAgOiAoZGJsUmVjZWl2ZWRRdWFudGl0eU9yZGVyVW0gLyBkYmxSZWNlaXZlZFF1YW50aXR5UHJpY2VVbSkgKiBkYmxQcmljZVBlclBpZWNlT3JkZXJVbTsNCg0KICAgIGFtb3VudFJlY2VpdmVkUHJpY2VVbSA9IGRibFJlY2VpdmVkUXVhbnRpdHlQcmljZVVtLm11bHRpcGx5KGRibFByaWNlUGVyUGllY2VQcmljZVVtKS5zZXRTY2FsZShudW1iZXJPZkRlY2ltYWxzLnRvSW50ZWdlcigpLCBSb3VuZGluZ01vZGUuSEFMRl9VUCkudG9QbGFpblN0cmluZygpOw0KICAgIGFtb3VudE9wZW5QcmljZVVtID0gZGJsT3BlblF1YW50aXR5UHJpY2VVbS5tdWx0aXBseShkYmxQcmljZVBlclBpZWNlUHJpY2VVbSkuc2V0U2NhbGUobnVtYmVyT2ZEZWNpbWFscy50b0ludGVnZXIoKSwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTsNCiAgICBhbW91bnRPcGVuT3JkZXJVbSA9IGRibE9wZW5RdWFudGl0eU9yZGVyVW0ubXVsdGlwbHkoZGJsUHJpY2VQZXJQaWVjZU9yZGVyVW0pLnNldFNjYWxlKG51bWJlck9mRGVjaW1hbHMudG9JbnRlZ2VyKCksIFJvdW5kaW5nTW9kZS5IQUxGX1VQKS50b1BsYWluU3RyaW5nKCk7DQoNCiAgICBwcmljUGVyUGllY2VQcmljZVVtID0gZGJsUHJpY2VQZXJQaWVjZVByaWNlVW0uc2V0U2NhbGUobnVtYmVyT2ZEZWNpbWFscy50b0ludGVnZXIoKSwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTsNCiAgICBwcmljUGVyUGllY2VPcmRlclVtID0gZGJsUHJpY2VQZXJQaWVjZU9yZGVyVW0uc2V0U2NhbGUobnVtYmVyT2ZEZWNpbWFscy50b0ludGVnZXIoKSwgUm91bmRpbmdNb2RlLkhBTEZfVVApLnRvUGxhaW5TdHJpbmcoKTs7DQoNCiAgfQ0KDQogIC8qKiBhZGQgUE8gbGluZSBvcGVuIGNoYXJnZSB0byByZWNlaXB0IGxpc3QNCiAgICovDQogIHB1YmxpYyBhZGRUb0xpbmVPcGVuQ2hhcmdlUmVjZWlwdExpc3QoU3RyaW5nIGVhY2hQdW5vLCBIYXNodGFibGUgZWFjaExpbmUsIEhhc2h0YWJsZSBlYWNoTGluZVJlY2VpcHQsIEhhc2h0YWJsZSBlYWNoTGluZUNoYXJnZVJlY2VpcHQpIHsNCiAgICBTdHJpbmcgUE5MSSA9IGVhY2hMaW5lLmdldCgnUE5MSScpOw0KICAgIFN0cmluZyBQTkxTID0gZWFjaExpbmUuZ2V0KCdQTkxTJyk7DQogICAgU3RyaW5nIENEU0UgPSBlYWNoTGluZUNoYXJnZVJlY2VpcHQuZ2V0KCdjZHNlTGNyJyk7DQogICAgU3RyaW5nIENFSUQgPSBlYWNoTGluZUNoYXJnZVJlY2VpcHQuZ2V0KCdjZWlkTGNyJyk7DQogICAgU3RyaW5nIFJFUE4gPSBlYWNoTGluZVJlY2VpcHQuZ2V0KCdGMlJFUE4nKTsNCiAgICBTdHJpbmcgUkVMUCA9IGVhY2hMaW5lUmVjZWlwdC5nZXQoJ0YyUkVMUCcpOw0KICAgIFN0cmluZyBUWDMwID0gZWFjaExpbmVDaGFyZ2VSZWNlaXB0LmdldCgndHgzMExjcicpOw0KICAgIFN0cmluZyBFWFRZID0gZWFjaExpbmVDaGFyZ2VSZWNlaXB0LmdldCgnZXh0eUxjcicpOw0KICAgIFN0cmluZyBJVE5PID0gZWFjaExpbmUuZ2V0KCdJVE5PJyk7DQogICAgU3RyaW5nIFBQVU4gPSBlYWNoTGluZS5nZXQoJ1BQVU4nKTsNCiAgICBTdHJpbmcgUFVVTiA9IGVhY2hMaW5lLmdldCgnUFVVTicpOw0KDQogICAgSGFzaHRhYmxlIHRlbXBUYWJsZSA9IG5ldyBIYXNodGFibGUgPCBTdHJpbmcsIFN0cmluZyA+ICgpOw0KICAgIHRlbXBUYWJsZS5wdXQoIlBVTk8iLCBlYWNoUHVubyk7DQogICAgdGVtcFRhYmxlLnB1dCgiUE5MSSIsIFBOTEkpOw0KICAgIHRlbXBUYWJsZS5wdXQoIlBOTFMiLCBQTkxTKTsNCiAgICB0ZW1wVGFibGUucHV0KCJzZXF1ZW5jZU51bWJlciIsIENEU0UpOw0KICAgIHRlbXBUYWJsZS5wdXQoImNvc3RpbmdFbGVtZW50IiwgQ0VJRCk7DQogICAgdGVtcFRhYmxlLnB1dCgicmVjZWlwdE51bWJlciIsIFJFUE4pOw0KICAgIHRlbXBUYWJsZS5wdXQoImNvc3RpbmdFbGVtZW50RGVzY3JpcHRpb24iLCBUWDMwKTsNCiAgICB0ZW1wVGFibGUucHV0KCJjaGFyZ2VUeXBlIiwgRVhUWSk7DQogICAgdGVtcFRhYmxlLnB1dCgiaXRlbU51bWJlciIsIElUTk8pOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0YyUkVMUCcsIFJFTFApOw0KDQogICAgdGVtcFRhYmxlLnB1dCgiYW1vdW50T3BlbiIsIGFtb3VudE9wZW5QcmljZVVtKTsNCiAgICB0ZW1wVGFibGUucHV0KCJhbW91bnRPcmRlcmVkIiwgYW1vdW50UmVjZWl2ZWRQcmljZVVtKTsNCiAgICB0ZW1wVGFibGUucHV0KCJQcmljZSIsIHByaWNQZXJQaWVjZVByaWNlVW0pOw0KICAgIHRlbXBUYWJsZS5wdXQoIlVuaXQiLCBQUFVOKTsNCiAgICB0ZW1wVGFibGUucHV0KCJxdWFudGl0eU9wZW4iLCBvcGVuUXVhbnRpdHlQcmljZVVtKTsNCiAgICB0ZW1wVGFibGUucHV0KCJxdHlJbnZvaWNlZCIsIGludm9pY2VkUXVhbnRpdHlQcmljZVVtKTsNCiAgICB0ZW1wVGFibGUucHV0KCJxdWFudGl0eU9yZGVyZWQiLCBvcmRlcmRRdWFudGl0eVByaWNlVW0pOw0KICAgIHRlbXBUYWJsZS5wdXQoInF1YW50aXR5UmVjZWl2ZWQiLCByZWNlaXZlZFF1YW50aXR5UHJpY2VVbSk7DQoNCiAgICBpZiAoUFVVTi5lcXVhbHMoUFBVTi50cmltKCkpKSB7DQogICAgICB0ZW1wVGFibGUucHV0KCJhbHRlcm5hdGl2ZVVuaXQiLCAiLSIpOw0KICAgICAgdGVtcFRhYmxlLnB1dCgiYWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4iLCAiMC4wIik7DQogICAgICB0ZW1wVGFibGUucHV0KCJhbHRlcm5hdGl2ZVByaWNlIiwgIjAuMCIpOw0KICAgIH0gZWxzZSB7DQogICAgICB0ZW1wVGFibGUucHV0KCJhbHRlcm5hdGl2ZVVuaXQiLCBQVVVOKTsNCiAgICAgIHRlbXBUYWJsZS5wdXQoImFsdGVybmF0aXZlUXVhbnRpdHlPcGVuIiwgb3BlUXVhbnRpdHlPcmRlclVtKTsNCiAgICAgIHRlbXBUYWJsZS5wdXQoImFsdGVybmF0aXZlUHJpY2UiLCBwcmljUGVyUGllY2VPcmRlclVtKTsNCiAgICB9DQogICAgbGluZU9wZW5DaGFyZ2VSZWNlaXB0TGlzdC5hZGQodGVtcFRhYmxlKTsNCg0KICB9DQogIC8qKiBnZXQgbGluZSBjaGFyZ2VzIGZyb20gdGFibGUgTVBPRVhQDQogICAqLw0KICBwcml2YXRlIGdldExpbmVDaGFyZ2VzKFN0cmluZyBlYWNoUHVubywgSGFzaHRhYmxlIGVhY2hMaW5lKSB7DQogICAgdGVtcExpbmVDaGFyZ2VMaXN0ID0gbmV3IEFycmF5TGlzdCA8IEhhc2h0YWJsZSA+ICgpOw0KICAgIGxpbmVDaGFyZ2VMaXN0ID0gbmV3IEFycmF5TGlzdCA8IEhhc2h0YWJsZSA+ICgpOw0KICAgIERCQWN0aW9uIHF1ZXJ5TXBvZXhwID0gZGF0YWJhc2UudGFibGUoIk1QT0VYUCIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiSVZDT05PIiwgIklWUFVOTyIsICJJVlBOTEkiLCAiSVZQTkxTIiwgIklWQ0RTRSIsICJJVlJFUE4iLCAiSVZFWFRZIiwgIklWQ0VJRCIsICJJVkVYSUMiLCAiSVZXU09QIiwgIklWQ1VDRCIsICJJVkNFVkEiLCAiSVZDRVZKIiwgIklWVEhQUiIsICJJVklWQ1EiLCAiSVZBQ0lOIikuYnVpbGQoKTsNCiAgICBEQkNvbnRhaW5lciByZWNvcmRNcG9leHAgPSBxdWVyeU1wb2V4cC5nZXRDb250YWluZXIoKTsNCiAgICByZWNvcmRNcG9leHAuc2V0KCJJVkNPTk8iLCBJbnRlZ2VyLnBhcnNlSW50KENPTk8udHJpbSgpKSk7DQogICAgcmVjb3JkTXBvZXhwLnNldCgiSVZQVU5PIiwgZWFjaFB1bm8udHJpbSgpKTsNCiAgICByZWNvcmRNcG9leHAuc2V0KCJJVlBOTEkiLCBJbnRlZ2VyLnBhcnNlSW50KGVhY2hMaW5lLmdldCgnUE5MSScpLnRvU3RyaW5nKCkpKTsNCiAgICByZWNvcmRNcG9leHAuc2V0KCJJVlBOTFMiLCBJbnRlZ2VyLnBhcnNlSW50KGVhY2hMaW5lLmdldCgnUE5MUycpLnRvU3RyaW5nKCkpKTsNCiAgICANCiAgICBpbnQgcmVhZHMgPSBxdWVyeU1wb2V4cC5yZWFkQWxsKHJlY29yZE1wb2V4cCwgNCwgZ2V0TXBvZXhwTGluZVJlY29yZHMpOw0KDQogIH0NCg0KICBDbG9zdXJlIDwgPyA+IGdldE1wb2V4cExpbmVSZWNvcmRzID0gew0KICAgIERCQ29udGFpbmVyIHJlY29yZCAtPg0KICAgIFN0cmluZyBQTkxJID0gcmVjb3JkLmdldCgnSVZQTkxJJyk7DQogICAgU3RyaW5nIFBOTFMgPSByZWNvcmQuZ2V0KCdJVlBOTFMnKTsNCiAgICBTdHJpbmcgQ0RTRSA9IHJlY29yZC5nZXQoJ0lWQ0RTRScpOw0KICAgIFN0cmluZyBSRVBOID0gcmVjb3JkLmdldCgnSVZSRVBOJyk7DQogICAgU3RyaW5nIEVYVFkgPSByZWNvcmQuZ2V0KCdJVkVYVFknKTsNCiAgICBTdHJpbmcgQ0VJRCA9IHJlY29yZC5nZXQoJ0lWQ0VJRCcpOw0KICAgIFN0cmluZyBFWElDID0gcmVjb3JkLmdldCgnSVZFWElDJyk7DQogICAgU3RyaW5nIFdTT1AgPSByZWNvcmQuZ2V0KCdJVldTT1AnKTsNCiAgICBTdHJpbmcgQ1VDRCA9IHJlY29yZC5nZXQoJ0lWQ1VDRCcpOw0KICAgIFN0cmluZyBDRVZBID0gcmVjb3JkLmdldCgnSVZDRVZBJyk7DQogICAgU3RyaW5nIENFVkogPSByZWNvcmQuZ2V0KCdJVkNFVkonKTsNCiAgICBTdHJpbmcgVEhQUiA9IHJlY29yZC5nZXQoJ0lWVEhQUicpOw0KICAgIFN0cmluZyBJVkNRID0gcmVjb3JkLmdldCgnSVZJVkNRJyk7DQogICAgU3RyaW5nIEFDSU4gPSByZWNvcmQuZ2V0KCdJVkFDSU4nKTsNCiAgICBIYXNodGFibGUgdGVtcFRhYmxlID0gbmV3IEhhc2h0YWJsZSA8IFN0cmluZywNCiAgICBTdHJpbmcgPiAoKTsNCiAgICB0ZW1wVGFibGUucHV0KCdQTkxJJywgUE5MSSk7DQogICAgdGVtcFRhYmxlLnB1dCgnUE5MUycsIFBOTFMpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0NEU0UnLCBDRFNFKTsNCiAgICB0ZW1wVGFibGUucHV0KCdSRVBOJywgUkVQTik7DQogICAgdGVtcFRhYmxlLnB1dCgnRVhUWScsIEVYVFkpOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0NFSUQnLCBDRUlEKTsNCiAgICB0ZW1wVGFibGUucHV0KCdFWElDJywgRVhJQyk7DQogICAgdGVtcFRhYmxlLnB1dCgnV1NPUCcsIFdTT1ApOw0KICAgIHRlbXBUYWJsZS5wdXQoJ0NVQ0QnLCBDVUNEKTsNCiAgICB0ZW1wVGFibGUucHV0KCdDRVZBJywgQ0VWQSk7DQogICAgdGVtcFRhYmxlLnB1dCgnQ0VWSicsIENFVkopOw0KICAgIHRlbXBUYWJsZS5wdXQoJ1RIUFInLCBUSFBSKTsNCiAgICB0ZW1wVGFibGUucHV0KCdJVkNRJywgSVZDUSk7DQogICAgdGVtcFRhYmxlLnB1dCgnQUNJTicsIEFDSU4pOw0KICAgIHRlbXBMaW5lQ2hhcmdlTGlzdC5hZGQodGVtcFRhYmxlKTsNCg0KICB9DQogIC8qKiBnZXQgbGluZSBjaGFyZ2UgdGV4dCB1c2luZyBQUFMyODBNSS5HZXRFbGVtZW50DQogICAqLw0KICBwcml2YXRlIGdldExpbmVDaGFyZ2VUZXh0KFN0cmluZyBlYWNoUHVubywgSGFzaHRhYmxlIGVhY2hUZW1wTGluZUNoYXJnZSwgSGFzaHRhYmxlIGVhY2hMaW5lKSB7DQogICAgU3RyaW5nIENFSUQgPSBlYWNoVGVtcExpbmVDaGFyZ2UuZ2V0KCdDRUlEJyk7DQogICAgU3RyaW5nIGlQVU5PID0gZWFjaFB1bm87DQogICAgU3RyaW5nIGlQTkxJID0gZWFjaFRlbXBMaW5lQ2hhcmdlLmdldCgnUE5MSScpOw0KICAgIFN0cmluZyBpUE5MUyA9IGVhY2hUZW1wTGluZUNoYXJnZS5nZXQoJ1BOTFMnKTsNCiAgICBTdHJpbmcgaUNEU0UgPSBlYWNoVGVtcExpbmVDaGFyZ2UuZ2V0KCdDRFNFJyk7DQogICAgU3RyaW5nIGlDRUlEID0gZWFjaFRlbXBMaW5lQ2hhcmdlLmdldCgnQ0VJRCcpOw0KICAgIFN0cmluZyBpV1NPUCA9IGVhY2hUZW1wTGluZUNoYXJnZS5nZXQoJ1dTT1AnKTsNCiAgICBTdHJpbmcgVFgzMCA9ICIiOw0KICAgIGJvb2xlYW4gcmVjb3JkRXhpc3RzID0gdHJ1ZTsNCiAgICBkZWYgY2FsbGJhY2sgPSB7DQogICAgICBNYXAgPCBTdHJpbmcsDQogICAgICBTdHJpbmcgPiByZXN1bHRzIC0+DQogICAgICByZWNvcmRFeGlzdHMgPSAhcmVzdWx0cy5nZXQoJ2Vycm9yJyk7DQogICAgICBpZiAocmVjb3JkRXhpc3RzKSB7DQogICAgICAgIFRYMzAgPSByZXN1bHRzLmdldCgnVFgzMCcpOw0KDQogICAgICB9DQoNCiAgICAgIFN0cmluZyBFWFRZID0gZWFjaFRlbXBMaW5lQ2hhcmdlLmdldCgnRVhUWScpOw0KDQogICAgICBpZiAodmFsaWRDaGFyZ2VUeXBlcy5jb250YWlucyhFWFRZLnRyaW0oKSkpIHsNCg0KICAgICAgICBsaW5lT3BlbkNoYXJnZVJlY2VpcHRMaXN0LmVhY2ggew0KDQogICAgICAgICAgbGluZU9wZW5DaGFyZ2VSZWNlaXB0IC0+DQogICAgICAgICAgICBIYXNodGFibGUgaHRPcGVuUmVjZWlwdENoYXJnZSA9IGxpbmVPcGVuQ2hhcmdlUmVjZWlwdDsNCg0KICAgICAgICAgIFN0cmluZyBwdW5vID0gaHRPcGVuUmVjZWlwdENoYXJnZS5jb250YWluc0tleSgiUFVOTyIpID8gaHRPcGVuUmVjZWlwdENoYXJnZQ0KICAgICAgICAgICAgLmdldCgiUFVOTyIpIDogbnVsbDsNCiAgICAgICAgICBTdHJpbmcgcG5saSA9IGh0T3BlblJlY2VpcHRDaGFyZ2UuY29udGFpbnNLZXkoIlBOTEkiKSA/IGh0T3BlblJlY2VpcHRDaGFyZ2UNCiAgICAgICAgICAgIC5nZXQoIlBOTEkiKSA6IG51bGw7DQogICAgICAgICAgU3RyaW5nIHBubHMgPSBodE9wZW5SZWNlaXB0Q2hhcmdlLmNvbnRhaW5zS2V5KCJQTkxTIikgPyBodE9wZW5SZWNlaXB0Q2hhcmdlDQogICAgICAgICAgICAuZ2V0KCJQTkxTIikgOiBudWxsOw0KICAgICAgICAgIFN0cmluZyBjZHNlID0gaHRPcGVuUmVjZWlwdENoYXJnZS5jb250YWluc0tleSgic2VxdWVuY2VOdW1iZXIiKSA/IGh0T3BlblJlY2VpcHRDaGFyZ2UNCiAgICAgICAgICAgIC5nZXQoInNlcXVlbmNlTnVtYmVyIikgOiBudWxsOw0KICAgICAgICAgIFN0cmluZyBjZWlkID0gaHRPcGVuUmVjZWlwdENoYXJnZS5jb250YWluc0tleSgiY29zdGluZ0VsZW1lbnQiKSA/IGh0T3BlblJlY2VpcHRDaGFyZ2UNCiAgICAgICAgICAgIC5nZXQoImNvc3RpbmdFbGVtZW50IikgOiBudWxsOw0KICAgICAgICAgIHB1bm8gPSBwdW5vID09IG51bGwgPyAiIiA6IHB1bm8udHJpbSgpOw0KICAgICAgICAgIHBubGkgPSBwbmxpID09IG51bGwgPyAiIiA6IHBubGkudHJpbSgpOw0KICAgICAgICAgIHBubHMgPSBwbmxzID09IG51bGwgPyAiIiA6IHBubHMudHJpbSgpOw0KICAgICAgICAgIGNkc2UgPSBjZHNlID09IG51bGwgPyAiIiA6IGNkc2UudHJpbSgpOw0KICAgICAgICAgIGNlaWQgPSBjZWlkID09IG51bGwgPyAiIiA6IGNlaWQudHJpbSgpOw0KICAgICAgICAgIGlmIChwdW5vLmVxdWFscyhpUFVOTykgJiYgcG5saS5lcXVhbHMoaVBOTEkpICYmIHBubHMuZXF1YWxzKGlQTkxTKSAmJg0KICAgICAgICAgICAgY2RzZS5lcXVhbHMoaUNEU0UpICYmIGNlaWQuZXF1YWxzKGlDRUlEKSkgew0KDQogICAgICAgICAgICBodE9wZW5SZWNlaXB0Q2hhcmdlLnB1dCgiT3BlcmF0b3IiLCBlYWNoVGVtcExpbmVDaGFyZ2UuZ2V0KCdXU09QJykpOw0KICAgICAgICAgICAgaHRPcGVuUmVjZWlwdENoYXJnZS5wdXQoImNvc3RpbmdFbGVtZW50RGVzY3JpcHRpb24iLCBUWDMwKTsNCiAgICAgICAgICAgIGh0T3BlblJlY2VpcHRDaGFyZ2UucHV0KCJ0aGlyZFBhcnR5Q29zdHMiLCBlYWNoVGVtcExpbmVDaGFyZ2UuZ2V0KCdUSFBSJykpOw0KICAgICAgICAgICAgaHRPcGVuUmVjZWlwdENoYXJnZS5wdXQoImludm9pY2VDb3N0cyIsIGVhY2hUZW1wTGluZUNoYXJnZS5nZXQoJ0lWQ1EnKSk7DQogICAgICAgICAgICBodE9wZW5SZWNlaXB0Q2hhcmdlLnB1dCgiYWNjSW52b2ljZUNvc3RzIiwgZWFjaFRlbXBMaW5lQ2hhcmdlLmdldCgnQUNJTicpKTsNCiAgICAgICAgICAgIGh0T3BlblJlY2VpcHRDaGFyZ2UucHV0KCJDdXJyZW5jeSIsIGVhY2hUZW1wTGluZUNoYXJnZS5nZXQoJ0NVQ0QnKSk7DQogICAgICAgICAgICBodE9wZW5SZWNlaXB0Q2hhcmdlLnB1dCgiY29zdGluZ0VsZW1lbnRBbW91bnQiLCBlYWNoVGVtcExpbmVDaGFyZ2UuZ2V0KCdDRVZBJykpOw0KICAgICAgICAgICAgaHRPcGVuUmVjZWlwdENoYXJnZS5wdXQoImFkanVzdGVkQ29zdGluZ0VsZW1lbnRBbW91bnQiLCBlYWNoVGVtcExpbmVDaGFyZ2UuZ2V0KCdDRVZKJykpOw0KICAgICAgICAgICAgaHRPcGVuUmVjZWlwdENoYXJnZS5wdXQoInZhdENvZGUiLCBlYWNoTGluZS5nZXQoJ1ZUQ0QnKSk7DQogICAgICAgICAgICBodE9wZW5SZWNlaXB0Q2hhcmdlLnB1dCgiY2hhcmdlRmFjdG9yIiwgZWFjaFRlbXBMaW5lQ2hhcmdlLmdldCgnRVhJQycpKTsNCiAgICAgICAgICAgIGJvb2xlYW4gYWRkQ2hhcmdlID0gdHJ1ZTsNCiAgICAgICAgICAgIGlXU09QID0gIjIwIjsNCiAgICAgICAgICAgIGlmIChmaXhlZENoYXJnZVR5cGVzLmNvbnRhaW5zKGlXU09QKSkgew0KDQogICAgICAgICAgICAgIEJpZ0RlY2ltYWwgcXVhbnRpdHlJbnZvaWNlZCA9IG5ldyBCaWdEZWNpbWFsKGh0T3BlblJlY2VpcHRDaGFyZ2UuZ2V0KCJxdHlJbnZvaWNlZCIpLnRvU3RyaW5nKCkpOw0KDQogICAgICAgICAgICAgIGh0T3BlblJlY2VpcHRDaGFyZ2UucHV0KCJxdWFudGl0eU9wZW4iLCAiMSIpOw0KICAgICAgICAgICAgICBodE9wZW5SZWNlaXB0Q2hhcmdlLnB1dCgicXR5SW52b2ljZWQiLCAiMSIpOw0KICAgICAgICAgICAgICBodE9wZW5SZWNlaXB0Q2hhcmdlLnB1dCgicXVhbnRpdHlPcmRlcmVkIiwgIjEiKTsNCiAgICAgICAgICAgICAgaHRPcGVuUmVjZWlwdENoYXJnZS5wdXQoInF1YW50aXR5UmVjZWl2ZWQiLCAiMSIpOw0KICAgICAgICAgICAgICBodE9wZW5SZWNlaXB0Q2hhcmdlLnB1dCgiUHJpY2UiLCBodE9wZW5SZWNlaXB0Q2hhcmdlLmdldCgiYW1vdW50T3JkZXJlZCIpKTsNCg0KICAgICAgICAgICAgICBodE9wZW5SZWNlaXB0Q2hhcmdlLnB1dCgiYWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4iLCAiMSIpOw0KICAgICAgICAgICAgICBodE9wZW5SZWNlaXB0Q2hhcmdlLnB1dCgiYWx0ZXJuYXRpdmVQcmljZSIsIGh0T3BlblJlY2VpcHRDaGFyZ2UuZ2V0KCJhbW91bnRPcmRlcmVkIikpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoYWRkQ2hhcmdlKSB7DQoNCiAgICAgICAgICAgICAgbGluZUNoYXJnZUxpc3QuYWRkKGh0T3BlblJlY2VpcHRDaGFyZ2UpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQoNCiAgICB9DQogICAgZGVmIHBhcmFtcyA9IFsiQ0VJRCI6IENFSUQudHJpbSgpXTsNCiAgICBtaUNhbGxlci5jYWxsKCJQUFMyODBNSSIsICJHZXRFbGVtZW50IiwgcGFyYW1zLCBjYWxsYmFjayk7DQogIH0NCiAgLyoqIHNlbmQgbGluZSBjaGFyZ2UgZGV0YWlscyB0byBvdXRwdXQNCiAgICovDQogIHByaXZhdGUgd3JpdGVMaW5lQ2hhcmdlcyhTdHJpbmcgUFVOTywgSGFzaHRhYmxlIGVhY2hMaW5lQ2hhcmdlLCBIYXNodGFibGUgZWFjaExpbmUpIHsNCiAgICBTdHJpbmcgb09yZGVyTnVtYmVyID0gUFVOTzsNCiAgICAgICAgU3RyaW5nIG9MaW5lTnVtYmVyID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJQTkxJIik7DQogICAgICAgIFN0cmluZyBvU3ViTGluZU51bWJlciA9IGVhY2hMaW5lQ2hhcmdlLmdldCgiUE5MUyIpOyAgICAgICAgDQogICAgICAgIFN0cmluZyBvU2VxdWVuY2VOdW1iZXIgPSBlYWNoTGluZUNoYXJnZS5nZXQoInNlcXVlbmNlTnVtYmVyIik7DQogICAgICAgIHRlbXBUYWJsZUNoYXJnZXMuZ2V0KG9PcmRlck51bWJlciArIG9MaW5lTnVtYmVyICsgb1N1YkxpbmVOdW1iZXIgKyBvU2VxdWVuY2VOdW1iZXIpOw0KICAgICAgICBTdHJpbmcgaW52UXR5ID0gdGVtcFRhYmxlQ2hhcmdlcy5nZXQob09yZGVyTnVtYmVyICsgb0xpbmVOdW1iZXIgKyBvU3ViTGluZU51bWJlciArIG9TZXF1ZW5jZU51bWJlcik7DQogICAgICAgIFN0cmluZyBvQ29zdGluZ0VsZW1lbnQgPSBlYWNoTGluZUNoYXJnZS5nZXQoImNvc3RpbmdFbGVtZW50Iik7DQogICAgICAgIFN0cmluZyBvUmVjZWlwdE51bWJlciA9IGVhY2hMaW5lQ2hhcmdlLmdldCgicmVjZWlwdE51bWJlciIpOw0KICAgICAgICBTdHJpbmcgb0Nvc3RpbmdFbGVtZW50RGVzY3JpcHRpb24gPSBlYWNoTGluZUNoYXJnZS5nZXQoImNvc3RpbmdFbGVtZW50RGVzY3JpcHRpb24iKTsNCiAgICAgICAgU3RyaW5nIG9DaGFyZ2VUeXBlID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJjaGFyZ2VUeXBlIik7DQogICAgICAgIFN0cmluZyBvT3BlcmF0b3IgPSBlYWNoTGluZUNoYXJnZS5nZXQoIk9wZXJhdG9yIik7DQogICAgICAgIFN0cmluZyBvSXRlbU51bWJlciA9IGVhY2hMaW5lQ2hhcmdlLmdldCgiaXRlbU51bWJlciIpOw0KICAgICAgICBTdHJpbmcgb1RoaXJkUGFydHlDb3N0cyA9IGVhY2hMaW5lQ2hhcmdlLmdldCgidGhpcmRQYXJ0eUNvc3RzIik7DQogICAgICAgIFN0cmluZyBvSW52b2ljZUNvc3RzID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJpbnZvaWNlQ29zdHMiKTsNCiAgICAgICAgU3RyaW5nIG9DdXJyZW5jeSA9IGVhY2hMaW5lQ2hhcmdlLmdldCgiQ3VycmVuY3kiKTsNCiAgICAgICAgU3RyaW5nIG9Db3N0aW5nRWxlbWVudEFtb3VudCA9IGVhY2hMaW5lQ2hhcmdlLmdldCgiY29zdGluZ0VsZW1lbnRBbW91bnQiKTsNCiAgICAgICAgU3RyaW5nIG9BY2NJbnZvaWNlQ29zdHMgPSBlYWNoTGluZUNoYXJnZS5nZXQoImFjY0ludm9pY2VDb3N0cyIpOw0KICAgICAgICBTdHJpbmcgb0FkanVzdGVkQ29zdGluZ0VsZW1lbnRBbW91bnQgPSBlYWNoTGluZUNoYXJnZS5nZXQoImFkanVzdGVkQ29zdGluZ0VsZW1lbnRBbW91bnQiKTsNCiAgICAgICAgU3RyaW5nIG9WYXRDb2RlID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJ2YXRDb2RlIik7DQogICAgICAgIFN0cmluZyBvQ2hhcmdlRmFjdG9yID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJjaGFyZ2VGYWN0b3IiKTsNCiAgICAgICAgU3RyaW5nIG9BbW91bnRPcGVuID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJhbW91bnRPcGVuIik7DQogICAgICAgIFN0cmluZyBvQW1vdW50T3JkZXJlZCA9IGVhY2hMaW5lQ2hhcmdlLmdldCgiYW1vdW50T3JkZXJlZCIpOw0KICAgICAgICBTdHJpbmcgb1ByaWNlID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJQcmljZSIpOw0KICAgICAgICBTdHJpbmcgb1VuaXQgPSBlYWNoTGluZUNoYXJnZS5nZXQoIlVuaXQiKTsNCiAgICAgICAgU3RyaW5nIG9RdWFudGl0eU9wZW4gPSBlYWNoTGluZUNoYXJnZS5nZXQoInF1YW50aXR5T3BlbiIpOw0KICAgICAgICBTdHJpbmcgb1F1YW50aXR5SW52b2ljZWQgPSBlYWNoTGluZUNoYXJnZS5nZXQoInF0eUludm9pY2VkIik7DQogICAgICAgIFN0cmluZyBvUXVhbnRpdHlPcmRlcmVkID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJxdWFudGl0eU9yZGVyZWQiKTsNCiAgICAgICAgU3RyaW5nIG9RdWFudGl0eVJlY2VpdmVkID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJxdWFudGl0eVJlY2VpdmVkIik7DQogICAgICAgIFN0cmluZyBvQWx0ZXJuYXRpdmVVbml0ID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJhbHRlcm5hdGl2ZVVuaXQiKTsNCiAgICAgICAgU3RyaW5nIG9BbHRlcm5hdGl2ZVF1YW50aXR5T3BlbiA9IGVhY2hMaW5lQ2hhcmdlLmdldCgiYWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4iKTsNCiAgICAgICAgU3RyaW5nIG9BbHRlcm5hdGl2ZVByaWNlID0gZWFjaExpbmVDaGFyZ2UuZ2V0KCJhbHRlcm5hdGl2ZVByaWNlIik7DQogICAgICAgIFN0cmluZyBGMlJFTFAgPSBlYWNoTGluZUNoYXJnZS5nZXQoIkYyUkVMUCIpOw0KDQogICAgICAgIG9BbW91bnRPcGVuID0gb0Ftb3VudE9wZW4gPT0gbnVsbCA/IG9Db3N0aW5nRWxlbWVudEFtb3VudCA6IG9BbW91bnRPcGVuOw0KICAgICAgICBvQW1vdW50T3JkZXJlZCA9IG9BbW91bnRPcmRlcmVkID09IG51bGwgPyAiMSIgOiBvQW1vdW50T3JkZXJlZDsNCiAgICAgICAgb1ByaWNlID0gb1ByaWNlID09IG51bGwgPyBvQ29zdGluZ0VsZW1lbnRBbW91bnQgOiBvUHJpY2U7DQogICAgICAgIG9Vbml0ID0gb1VuaXQgPT0gbnVsbCA/ICIgIiA6IG9Vbml0Ow0KICAgICAgICBvUXVhbnRpdHlPcGVuID0gb1F1YW50aXR5T3BlbiA9PSBudWxsID8gIjEiIDogb1F1YW50aXR5T3BlbjsNCiAgICAgICAgb1F1YW50aXR5SW52b2ljZWQgPSBvUXVhbnRpdHlJbnZvaWNlZCA9PSBudWxsID8gIiAiIDogb1F1YW50aXR5SW52b2ljZWQ7DQogICAgICAgIG9RdWFudGl0eU9yZGVyZWQgPSBvUXVhbnRpdHlPcmRlcmVkID09IG51bGwgPyAiICIgOiBvUXVhbnRpdHlPcmRlcmVkOw0KICAgICAgICBvUXVhbnRpdHlSZWNlaXZlZCA9IG9RdWFudGl0eVJlY2VpdmVkID09IG51bGwgPyAiICIgOiBvUXVhbnRpdHlSZWNlaXZlZDsNCiAgICAgICAgb0FsdGVybmF0aXZlVW5pdCA9IG9BbHRlcm5hdGl2ZVVuaXQgPT0gbnVsbCA/ICIgIiA6IG9BbHRlcm5hdGl2ZVVuaXQ7DQogICAgICAgIG9BbHRlcm5hdGl2ZVF1YW50aXR5T3BlbiA9IG9BbHRlcm5hdGl2ZVF1YW50aXR5T3BlbiA9PSBudWxsID8gIiAiIDogb0FsdGVybmF0aXZlUXVhbnRpdHlPcGVuOw0KICAgICAgICBvQWx0ZXJuYXRpdmVQcmljZSA9IG9BbHRlcm5hdGl2ZVByaWNlID09IG51bGwgPyAiICIgOiBvQWx0ZXJuYXRpdmVQcmljZTsNCiAgICAgICAgU3RyaW5nIFByaWMgPSAiIjsNCiAgICAgICAgU3RyaW5nIG9wZW5RdHk9IiINCiAgICAgICAgDQogICAgICAgIA0KICAgICAgICBTdHJpbmcgYWNJbnZvaWNlQ29zdCA9IERvdWJsZS5wYXJzZURvdWJsZShvQ29zdGluZ0VsZW1lbnRBbW91bnQpIC0gRG91YmxlLnBhcnNlRG91YmxlKG9BY2NJbnZvaWNlQ29zdHMpDQogICAgICAgIGlmKGludlF0eSAhPSBudWxsKXsNCiAgICAgICAgb3BlblF0eSA9IERvdWJsZS5wYXJzZURvdWJsZShyZXBRdHkpIC0gRG91YmxlLnBhcnNlRG91YmxlKGludlF0eSk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCFvcGVuUXR5LmVxdWFscygiMC4wIikgJiYgIW9wZW5RdHkuZXF1YWxzKCIiKSkgew0KICAgICAgICAgIGRvdWJsZSBjb252ZXJ0ZWQgPSBEb3VibGUucGFyc2VEb3VibGUoYWNJbnZvaWNlQ29zdCkgLyBEb3VibGUucGFyc2VEb3VibGUob3BlblF0eSk7DQoNCiAgICAgICAgICBEZWNpbWFsRm9ybWF0IGRlY09iamVjdCA9IG5ldyBEZWNpbWFsRm9ybWF0KCIjLiMjIyMjIyIpOw0KICAgICAgICAgIFByaWMgPSBkZWNPYmplY3QuZm9ybWF0KGNvbnZlcnRlZCk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgZG91YmxlIGNvbnZlcnRlZCA9IDAuMDAwMDAwDQoNCiAgICAgICAgICBEZWNpbWFsRm9ybWF0IGRlY09iamVjdCA9IG5ldyBEZWNpbWFsRm9ybWF0KCIjLiMjIyMjIyIpOw0KICAgICAgICAgIFByaWMgPSBkZWNPYmplY3QuZm9ybWF0KGNvbnZlcnRlZCk7DQogICAgICAgIH0NCiAgICAgICAgZG91YmxlIG9wUXR5ID0gMC4wZA0KICAgICAgICBpZihpbnZRdHkgIT0gbnVsbCl7DQogICAgICAgIG9wUXR5ID0gRG91YmxlLnBhcnNlRG91YmxlKHJlcFF0eSkgLSBEb3VibGUucGFyc2VEb3VibGUoaW52UXR5KTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoZWFjaExpbmUuZ2V0KCdQVVNMJykudG9TdHJpbmcoKSA9PSAnNDAnIHx8IGVhY2hMaW5lLmdldCgnUFVTTCcpLnRvU3RyaW5nKCkgPT0gJzQ1JyAmJiAoZWFjaExpbmVDaGFyZ2UuZ2V0KCJ0aGlyZFBhcnR5Q29zdHMiKSA9PSAxKSkgew0KCQkgICAgDQogICAgICBpZiAoKCFlYWNoTGluZUNoYXJnZS5nZXQoImNvc3RpbmdFbGVtZW50QW1vdW50IikuZXF1YWxzKCIwLjAwIikgJiYgZWFjaExpbmVDaGFyZ2UuZ2V0KCJQcmljZSIpID09IG51bGwpIHx8IGVhY2hMaW5lQ2hhcmdlLmdldCgiUHJpY2UiKSAhPSBudWxsKSB7DQogICAgICAgIGlmIChvcFF0eSA+IDAgfHwgb3BRdHkgPCAwKSB7DQogICAgICAgICAgaWYgKCghb0FjY0ludm9pY2VDb3N0cy5lcXVhbHMoIiIpIHx8ICFvQWNjSW52b2ljZUNvc3RzLmVxdWFscygiMC4wIikpICYmICFvQ2hhcmdlRmFjdG9yLmVxdWFscygiMSIpKSB7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUkNUUCcsICJMQyIpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVTk8nLCBvT3JkZXJOdW1iZXIpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BOTEknLCBvTGluZU51bWJlcik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUE5MUycsIG9TdWJMaW5lTnVtYmVyKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDRFNFJywgb1NlcXVlbmNlTnVtYmVyKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDRUlEJywgb0Nvc3RpbmdFbGVtZW50KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdSUE5NJywgb1JlY2VpcHROdW1iZXIpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09BT1UnLCBhY0ludm9pY2VDb3N0KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPQUxDJywgb3BlbkFtb3VudExvY2FsQ3VycmVuY3kpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09RT1UnLCBvcGVuUXR5KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDRUxEJywgb0Nvc3RpbmdFbGVtZW50RGVzY3JpcHRpb24pOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0VYVFknLCBvQ2hhcmdlVHlwZSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnV1NPUCcsIG9PcGVyYXRvcik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVEhQUicsIG9UaGlyZFBhcnR5Q29zdHMpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NVQ0QnLCBvQ3VycmVuY3kpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0lWQ1MnLCBvSW52b2ljZUNvc3RzKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDSEZDJywgb0NoYXJnZUZhY3Rvcik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0VWQScsIG9Db3N0aW5nRWxlbWVudEFtb3VudCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0VWSicsIG9BZGp1c3RlZENvc3RpbmdFbGVtZW50QW1vdW50KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdWVENEJywgb1ZhdENvZGUpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0lUTk8nLCBvSXRlbU51bWJlcik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQU1PUCcsIG9BbW91bnRPcGVuKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTU9SJywgb0Ftb3VudE9yZGVyZWQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BSQ0UnLCBQcmljKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdVTklUJywgb1VuaXQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09QUVQnLCBvUXVhbnRpdHlPcGVuKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdRVElWJywgb1F1YW50aXR5SW52b2ljZWQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUT1InLCBvUXVhbnRpdHlPcmRlcmVkKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdRVFJWJywgb1F1YW50aXR5UmVjZWl2ZWQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMVFUnLCBvQWx0ZXJuYXRpdmVVbml0KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTFFPJywgb0FsdGVybmF0aXZlUXVhbnRpdHlPcGVuKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTFRQJywgb0FsdGVybmF0aXZlUHJpY2UpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JFTFAnLCBGMlJFTFApOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JQUVQnLCByZWNlaXB0UXVhbnRpdHkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JRQUwnLCByZWNlaXB0UXVhbnRpdHkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BOTEknLCBlYWNoTGluZS5nZXQoJ1BOTEknKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQTkxTJywgZWFjaExpbmUuZ2V0KCdQTkxTJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVFJEVCcsIGVhY2hMaW5lLmdldCgnVFJEVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xXSEwnLCBlYWNoTGluZS5nZXQoJ1dITE8nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdJVE5PJywgZWFjaExpbmUuZ2V0KCdJVE5PJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUElURCcsIGVhY2hMaW5lLmdldCgnUElURCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BJVFQnLCBlYWNoTGluZS5nZXQoJ1BJVFQnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdTSVRFJywgZWFjaExpbmUuZ2V0KCdTSVRFJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0FRQScsIGVhY2hMaW5lLmdldCgnQ0FRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JKUUEnLCBlYWNoTGluZS5nZXQoJ1JKUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdTRFFBJywgZWFjaExpbmUuZ2V0KCdTRFFBJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1JRQScsIGVhY2hMaW5lLmdldCgnT1JRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0lWUUEnLCBpbnZRdHkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JWUUEnLCBlYWNoTGluZS5nZXQoJ1JWUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDRlFBJywgZWFjaExpbmUuZ2V0KCdDRlFBJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1FQVScsIGVhY2hMaW5lLmdldCgnb3BlblF1YW50aXR5UHJpY2VVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVUkMnLCBlYWNoTGluZS5nZXQoJ1BVUkMnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMQlVZJywgZWFjaExpbmUuZ2V0KCdCVVlFJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnU1RVTScsIGVhY2hMaW5lLmdldCgnc3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1VOTVMnLCBlYWNoTGluZS5nZXQoJ1VOTVMnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTFVNJywgZWFjaExpbmUuZ2V0KCdhbHRlcm5hdGVVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NXVU4nLCAiIik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnTE5BTScsIGVhY2hMaW5lLmdldCgnTE5BTScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVUFInLCBlYWNoTGluZS5nZXQoJ3ByaWNlUGVyUGllY2VTdGFuZGFyZFVtJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFVRVCcsIGVhY2hMaW5lLmdldCgnUFVRVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMUFInLCAiIik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFRDRCcsIGVhY2hMaW5lLmdldCgnVlRDRCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgaWYgKGVhY2hMaW5lLmdldCgnVlRDRCcpLnRvU3RyaW5nKCkubGVuZ3RoKCkgPT0gMSkgew0KDQogICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdWVENEJywgJzAnICsgZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVlRDRCcsIGVhY2hMaW5lLmdldCgnVlRDRCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0dSTVQnLCBlYWNoTGluZS5nZXQoJ0dSTVQnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMTU9EJywgZWFjaExpbmUuZ2V0KCdNT0RMJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnTFRFRCcsIGVhY2hMaW5lLmdldCgnVEVETCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xURUwnLCBlYWNoTGluZS5nZXQoJ1RFTDEnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMUFNMJywgZWFjaExpbmUuZ2V0KCdQVVNMJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnTFBTVCcsIGVhY2hMaW5lLmdldCgnUFVTVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BPUE4nLCBlYWNoTGluZS5nZXQoJ3BvcG5FYTEzJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUk9SQycsIGVhY2hMaW5lLmdldCgnUk9SQycpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JPUk4nLCBlYWNoTGluZS5nZXQoJ1JPUk4nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdST1JMJywgZWFjaExpbmUuZ2V0KCdST1JMJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUk9SWCcsIGVhY2hMaW5lLmdldCgnUk9SWCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1NVRE8nLCBlYWNoTGluZS5nZXQoJ1NVRE8nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdGUlJDJywgZWFjaExpbmUuZ2V0KCdGUlJDJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnRlJSRScsIGVhY2hMaW5lLmdldCgnRlJSRScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FEUUEnLCBlYWNoTGluZS5nZXQoJ0FEUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPUlFUJywgZWFjaExpbmUuZ2V0KCdPUlFUJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQU1PUCcsIGVhY2hMaW5lLmdldCgnYW1vdW50T3BlbicpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FNT1InLCBvQ29zdGluZ0VsZW1lbnRBbW91bnQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BSQ0UnLCBQcmljKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdVTklUJywgZWFjaExpbmUuZ2V0KCdhbHRlcm5hdGVVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09QUVQnLCBlYWNoTGluZS5nZXQoJ29wZW5RdWFudGl0eVN0YW5kYXJkVW0nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdRVElWJywgZWFjaExpbmUuZ2V0KCdpbnZvaWNlZFF1YW50aXR5U3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUT1InLCBlYWNoTGluZS5nZXQoJ29yZGVyZWRRdWFudGl0eVN0YW5kYXJkVW0nKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUUlYnLCBlYWNoTGluZS5nZXQoJ3JlY2VpdmVkUXVhbnRpdHlTdGFuZGFyZFVtJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxUVScsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRlVW0nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTFFPJywgZWFjaExpbmUuZ2V0KCdhbHRlcm5hdGl2ZVF1YW50aXR5T3BlbicpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMVFAnLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0aXZlUHJpY2UnKS50b1N0cmluZygpKTsNCg0KICAgICAgICAgICAgbWkud3JpdGUoKTsNCg0KICAgICAgICAgIH0gZWxzZSB7DQoNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdSQ1RQJywgIkxDIik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFVOTycsIG9PcmRlck51bWJlcik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUE5MSScsIG9MaW5lTnVtYmVyKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQTkxTJywgb1N1YkxpbmVOdW1iZXIpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NEU0UnLCBvU2VxdWVuY2VOdW1iZXIpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NFSUQnLCBvQ29zdGluZ0VsZW1lbnQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JQTk0nLCBvUmVjZWlwdE51bWJlcik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT0FPVScsIGFjSW52b2ljZUNvc3QpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09BTEMnLCBvcGVuQW1vdW50TG9jYWxDdXJyZW5jeSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1FPVScsIG9wZW5RdHkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NFTEQnLCBvQ29zdGluZ0VsZW1lbnREZXNjcmlwdGlvbik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnRVhUWScsIG9DaGFyZ2VUeXBlKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdXU09QJywgb09wZXJhdG9yKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdUSFBSJywgb1RoaXJkUGFydHlDb3N0cyk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ1VDRCcsIG9DdXJyZW5jeSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnSVZDUycsIG9JbnZvaWNlQ29zdHMpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NIRkMnLCBvQ2hhcmdlRmFjdG9yKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDRVZBJywgb0Nvc3RpbmdFbGVtZW50QW1vdW50KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDRVZKJywgb0FkanVzdGVkQ29zdGluZ0VsZW1lbnRBbW91bnQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1ZUQ0QnLCBvVmF0Q29kZSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnSVROTycsIG9JdGVtTnVtYmVyKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTU9QJywgb0Ftb3VudE9wZW4pOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FNT1InLCBvQW1vdW50T3JkZXJlZCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFJDRScsIFByaWMpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1VOSVQnLCBvVW5pdCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1BRVCcsIG9RdWFudGl0eU9wZW4pOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUSVYnLCBvUXVhbnRpdHlJbnZvaWNlZCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUVRPUicsIG9RdWFudGl0eU9yZGVyZWQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUUlYnLCBvUXVhbnRpdHlSZWNlaXZlZCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxUVScsIG9BbHRlcm5hdGl2ZVVuaXQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMUU8nLCBvQWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4pOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMVFAnLCBvQWx0ZXJuYXRpdmVQcmljZSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUkVMUCcsIEYyUkVMUCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUlBRVCcsIHJlY2VpcHRRdWFudGl0eSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUlFBTCcsIHJlY2VpcHRRdWFudGl0eSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUE5MSScsIGVhY2hMaW5lLmdldCgnUE5MSScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BOTFMnLCBlYWNoTGluZS5nZXQoJ1BOTFMnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdUUkRUJywgZWFjaExpbmUuZ2V0KCdUUkRUJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnTFdITCcsIGVhY2hMaW5lLmdldCgnV0hMTycpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0lUTk8nLCBlYWNoTGluZS5nZXQoJ0lUTk8nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQSVREJywgZWFjaExpbmUuZ2V0KCdQSVREJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUElUVCcsIGVhY2hMaW5lLmdldCgnUElUVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1NJVEUnLCBlYWNoTGluZS5nZXQoJ1NJVEUnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDQVFBJywgZWFjaExpbmUuZ2V0KCdDQVFBJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUkpRQScsIGVhY2hMaW5lLmdldCgnUkpRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1NEUUEnLCBlYWNoTGluZS5nZXQoJ1NEUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPUlFBJywgZWFjaExpbmUuZ2V0KCdPUlFBJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnSVZRQScsIGludlF0eSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUlZRQScsIGVhY2hMaW5lLmdldCgnUlZRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NGUUEnLCBlYWNoTGluZS5nZXQoJ0NGUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPUVBVJywgZWFjaExpbmUuZ2V0KCdvcGVuUXVhbnRpdHlQcmljZVVtJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFVSQycsIGVhY2hMaW5lLmdldCgnUFVSQycpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xCVVknLCBlYWNoTGluZS5nZXQoJ0JVWUUnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdTVFVNJywgZWFjaExpbmUuZ2V0KCdzdGFuZGFyZFVtJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVU5NUycsIGVhY2hMaW5lLmdldCgnVU5NUycpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMVU0nLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0ZVVtJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ1dVTicsICIiKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMTkFNJywgZWFjaExpbmUuZ2V0KCdMTkFNJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFVQUicsIGVhY2hMaW5lLmdldCgncHJpY2VQZXJQaWVjZVN0YW5kYXJkVW0nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQVVFUJywgZWFjaExpbmUuZ2V0KCdQVVFUJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxQUicsICIiKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQVENEJywgZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBpZiAoZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKS5sZW5ndGgoKSA9PSAxKSB7DQoNCiAgICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1ZUQ0QnLCAnMCcgKyBlYWNoTGluZS5nZXQoJ1ZUQ0QnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdWVENEJywgZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnR1JNVCcsIGVhY2hMaW5lLmdldCgnR1JNVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xNT0QnLCBlYWNoTGluZS5nZXQoJ01PREwnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMVEVEJywgZWFjaExpbmUuZ2V0KCdURURMJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnTFRFTCcsIGVhY2hMaW5lLmdldCgnVEVMMScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xQU0wnLCBlYWNoTGluZS5nZXQoJ1BVU0wnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMUFNUJywgZWFjaExpbmUuZ2V0KCdQVVNUJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUE9QTicsIGVhY2hMaW5lLmdldCgncG9wbkVhMTMnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdST1JDJywgZWFjaExpbmUuZ2V0KCdST1JDJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUk9STicsIGVhY2hMaW5lLmdldCgnUk9STicpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JPUkwnLCBlYWNoTGluZS5nZXQoJ1JPUkwnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdST1JYJywgZWFjaExpbmUuZ2V0KCdST1JYJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnU1VETycsIGVhY2hMaW5lLmdldCgnU1VETycpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0ZSUkMnLCBlYWNoTGluZS5nZXQoJ0ZSUkMnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdGUlJFJywgZWFjaExpbmUuZ2V0KCdGUlJFJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQURRQScsIGVhY2hMaW5lLmdldCgnQURRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09SUVQnLCBlYWNoTGluZS5nZXQoJ09SUVQnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTU9QJywgZWFjaExpbmUuZ2V0KCdhbW91bnRPcGVuJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQU1PUicsIG9Db3N0aW5nRWxlbWVudEFtb3VudCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFJDRScsIFByaWMpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1VOSVQnLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0ZVVtJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1BRVCcsIGVhY2hMaW5lLmdldCgnb3BlblF1YW50aXR5U3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUSVYnLCBlYWNoTGluZS5nZXQoJ2ludm9pY2VkUXVhbnRpdHlTdGFuZGFyZFVtJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUVRPUicsIGVhY2hMaW5lLmdldCgnb3JkZXJlZFF1YW50aXR5U3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUVRSVicsIGVhY2hMaW5lLmdldCgncmVjZWl2ZWRRdWFudGl0eVN0YW5kYXJkVW0nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTFRVJywgZWFjaExpbmUuZ2V0KCdhbHRlcm5hdGVVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMUU8nLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0aXZlUXVhbnRpdHlPcGVuJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxUUCcsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRpdmVQcmljZScpLnRvU3RyaW5nKCkpOw0KDQogICAgICAgICAgICBtaS53cml0ZSgpOw0KICAgICAgICAgIH0NCiAgICAgICAgICB9IA0KCQkgIH0NCgkJICB9DQogICAgIGxvZ2dlci5pbmZvKCJpblN0YXR1czg1IiArIGVhY2hMaW5lQ2hhcmdlLmdldCgidGhpcmRQYXJ0eUNvc3RzIikpDQogICAgIGxvZ2dlci5pbmZvKCJpblN0YXR1cyIgKyBlYWNoTGluZS5nZXQoJ1BVU0wnKS50b1N0cmluZygpKQ0KICAgLy8gaWYoZWFjaExpbmVDaGFyZ2UuZ2V0KCJ0aGlyZFBhcnR5Q29zdHMiKSA9PSAxKXsgLy9lYWNoTGluZS5nZXQoJ1BVU0wnKS50b1N0cmluZygpIDwgJzg1JyB8fCBlYWNoTGluZS5nZXQoJ1BVU0wnKS50b1N0cmluZygpID09ICc4NScgJiYgDQogICAgaWYgKCAoZWFjaExpbmUuZ2V0KCdQVVNMJykudG9TdHJpbmcoKSA+ICc0NScpICYmIGVhY2hMaW5lLmdldCgnUFVTTCcpLnRvU3RyaW5nKCkgPCAnODUnIHx8IGVhY2hMaW5lLmdldCgnUFVTTCcpLnRvU3RyaW5nKCkgPT0gJzg1Jykgew0KCQkgIA0KICAgICAgaWYgKCghZWFjaExpbmVDaGFyZ2UuZ2V0KCJjb3N0aW5nRWxlbWVudEFtb3VudCIpLmVxdWFscygiMC4wMCIpICYmIGVhY2hMaW5lQ2hhcmdlLmdldCgiUHJpY2UiKSA9PSBudWxsKSB8fCBlYWNoTGluZUNoYXJnZS5nZXQoIlByaWNlIikgIT0gbnVsbCkgew0KICAgICAgICBpZiAob3BRdHkgPiAwIHx8IG9wUXR5IDwgMCkgew0KICAgICAgICAgIGlmICgoIW9BY2NJbnZvaWNlQ29zdHMuZXF1YWxzKCIiKSB8fCAhb0FjY0ludm9pY2VDb3N0cy5lcXVhbHMoIjAuMCIpKSAmJiAhb0NoYXJnZUZhY3Rvci5lcXVhbHMoIjEiKSkgew0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JDVFAnLCAiTEMiKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQVU5PJywgb09yZGVyTnVtYmVyKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQTkxJJywgb0xpbmVOdW1iZXIpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BOTFMnLCBvU3ViTGluZU51bWJlcik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0RTRScsIG9TZXF1ZW5jZU51bWJlcik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0VJRCcsIG9Db3N0aW5nRWxlbWVudCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUlBOTScsIG9SZWNlaXB0TnVtYmVyKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPQU9VJywgYWNJbnZvaWNlQ29zdCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT0FMQycsIG9wZW5BbW91bnRMb2NhbEN1cnJlbmN5KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPUU9VJywgb3BlblF0eSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0VMRCcsIG9Db3N0aW5nRWxlbWVudERlc2NyaXB0aW9uKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdFWFRZJywgb0NoYXJnZVR5cGUpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1dTT1AnLCBvT3BlcmF0b3IpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1RIUFInLCBvVGhpcmRQYXJ0eUNvc3RzKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDVUNEJywgb0N1cnJlbmN5KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdJVkNTJywgb0ludm9pY2VDb3N0cyk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0hGQycsIG9DaGFyZ2VGYWN0b3IpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NFVkEnLCBvQ29zdGluZ0VsZW1lbnRBbW91bnQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NFVkonLCBvQWRqdXN0ZWRDb3N0aW5nRWxlbWVudEFtb3VudCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVlRDRCcsIG9WYXRDb2RlKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdJVE5PJywgb0l0ZW1OdW1iZXIpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FNT1AnLCBvQW1vdW50T3Blbik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQU1PUicsIG9BbW91bnRPcmRlcmVkKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQUkNFJywgUHJpYyk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVU5JVCcsIG9Vbml0KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPUFFUJywgb1F1YW50aXR5T3Blbik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUVRJVicsIG9RdWFudGl0eUludm9pY2VkKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdRVE9SJywgb1F1YW50aXR5T3JkZXJlZCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUVRSVicsIG9RdWFudGl0eVJlY2VpdmVkKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTFRVJywgb0FsdGVybmF0aXZlVW5pdCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxRTycsIG9BbHRlcm5hdGl2ZVF1YW50aXR5T3Blbik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxUUCcsIG9BbHRlcm5hdGl2ZVByaWNlKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdSRUxQJywgRjJSRUxQKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdSUFFUJywgcmVjZWlwdFF1YW50aXR5KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdSUUFMJywgcmVjZWlwdFF1YW50aXR5KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQTkxJJywgZWFjaExpbmUuZ2V0KCdQTkxJJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUE5MUycsIGVhY2hMaW5lLmdldCgnUE5MUycpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1RSRFQnLCBlYWNoTGluZS5nZXQoJ1RSRFQnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMV0hMJywgZWFjaExpbmUuZ2V0KCdXSExPJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnSVROTycsIGVhY2hMaW5lLmdldCgnSVROTycpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BJVEQnLCBlYWNoTGluZS5nZXQoJ1BJVEQnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQSVRUJywgZWFjaExpbmUuZ2V0KCdQSVRUJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnU0lURScsIGVhY2hMaW5lLmdldCgnU0lURScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NBUUEnLCBlYWNoTGluZS5nZXQoJ0NBUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdSSlFBJywgZWFjaExpbmUuZ2V0KCdSSlFBJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnU0RRQScsIGVhY2hMaW5lLmdldCgnU0RRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09SUUEnLCBlYWNoTGluZS5nZXQoJ09SUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdJVlFBJywgaW52UXR5KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdSVlFBJywgZWFjaExpbmUuZ2V0KCdSVlFBJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0ZRQScsIGVhY2hMaW5lLmdldCgnQ0ZRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09RUFUnLCBlYWNoTGluZS5nZXQoJ29wZW5RdWFudGl0eVByaWNlVW0nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQVVJDJywgZWFjaExpbmUuZ2V0KCdQVVJDJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnTEJVWScsIGVhY2hMaW5lLmdldCgnQlVZRScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1NUVU0nLCBlYWNoTGluZS5nZXQoJ3N0YW5kYXJkVW0nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdVTk1TJywgZWFjaExpbmUuZ2V0KCdVTk1TJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxVTScsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRlVW0nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDV1VOJywgIiIpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xOQU0nLCBlYWNoTGluZS5nZXQoJ0xOQU0nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQVVBSJywgZWFjaExpbmUuZ2V0KCdwcmljZVBlclBpZWNlU3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVUVQnLCBlYWNoTGluZS5nZXQoJ1BVUVQnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTFBSJywgIiIpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BUQ0QnLCBlYWNoTGluZS5nZXQoJ1ZUQ0QnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIGlmIChlYWNoTGluZS5nZXQoJ1ZUQ0QnKS50b1N0cmluZygpLmxlbmd0aCgpID09IDEpIHsNCg0KICAgICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVlRDRCcsICcwJyArIGVhY2hMaW5lLmdldCgnVlRDRCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1ZUQ0QnLCBlYWNoTGluZS5nZXQoJ1ZUQ0QnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdHUk1UJywgZWFjaExpbmUuZ2V0KCdHUk1UJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnTE1PRCcsIGVhY2hMaW5lLmdldCgnTU9ETCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xURUQnLCBlYWNoTGluZS5nZXQoJ1RFREwnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMVEVMJywgZWFjaExpbmUuZ2V0KCdURUwxJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnTFBTTCcsIGVhY2hMaW5lLmdldCgnUFVTTCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xQU1QnLCBlYWNoTGluZS5nZXQoJ1BVU1QnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQT1BOJywgZWFjaExpbmUuZ2V0KCdwb3BuRWExMycpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JPUkMnLCBlYWNoTGluZS5nZXQoJ1JPUkMnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdST1JOJywgZWFjaExpbmUuZ2V0KCdST1JOJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUk9STCcsIGVhY2hMaW5lLmdldCgnUk9STCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JPUlgnLCBlYWNoTGluZS5nZXQoJ1JPUlgnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdTVURPJywgZWFjaExpbmUuZ2V0KCdTVURPJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnRlJSQycsIGVhY2hMaW5lLmdldCgnRlJSQycpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0ZSUkUnLCBlYWNoTGluZS5nZXQoJ0ZSUkUnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBRFFBJywgZWFjaExpbmUuZ2V0KCdBRFFBJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1JRVCcsIGVhY2hMaW5lLmdldCgnT1JRVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FNT1AnLCBlYWNoTGluZS5nZXQoJ2Ftb3VudE9wZW4nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTU9SJywgb0Nvc3RpbmdFbGVtZW50QW1vdW50KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQUkNFJywgUHJpYyk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVU5JVCcsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRlVW0nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPUFFUJywgZWFjaExpbmUuZ2V0KCdvcGVuUXVhbnRpdHlTdGFuZGFyZFVtJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUVRJVicsIGVhY2hMaW5lLmdldCgnaW52b2ljZWRRdWFudGl0eVN0YW5kYXJkVW0nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdRVE9SJywgZWFjaExpbmUuZ2V0KCdvcmRlcmVkUXVhbnRpdHlTdGFuZGFyZFVtJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdRVFJWJywgZWFjaExpbmUuZ2V0KCdyZWNlaXZlZFF1YW50aXR5U3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMVFUnLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0ZVVtJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxRTycsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTFRQJywgZWFjaExpbmUuZ2V0KCdhbHRlcm5hdGl2ZVByaWNlJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS53cml0ZSgpOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAvL2xvZ2dlci5pbmZvKCJJbkNoYXJnZWVsc2UiKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdSQ1RQJywgIkxDIik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFVOTycsIG9PcmRlck51bWJlcik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUE5MSScsIG9MaW5lTnVtYmVyKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQTkxTJywgb1N1YkxpbmVOdW1iZXIpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NEU0UnLCBvU2VxdWVuY2VOdW1iZXIpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NFSUQnLCBvQ29zdGluZ0VsZW1lbnQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JQTk0nLCBvUmVjZWlwdE51bWJlcik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT0FPVScsIGFjSW52b2ljZUNvc3QpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09BTEMnLCBvcGVuQW1vdW50TG9jYWxDdXJyZW5jeSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1FPVScsIG9wZW5RdHkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NFTEQnLCBvQ29zdGluZ0VsZW1lbnREZXNjcmlwdGlvbik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnRVhUWScsIG9DaGFyZ2VUeXBlKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdXU09QJywgb09wZXJhdG9yKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdUSFBSJywgb1RoaXJkUGFydHlDb3N0cyk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ1VDRCcsIG9DdXJyZW5jeSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnSVZDUycsIG9JbnZvaWNlQ29zdHMpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NIRkMnLCBvQ2hhcmdlRmFjdG9yKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDRVZBJywgb0Nvc3RpbmdFbGVtZW50QW1vdW50KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDRVZKJywgb0FkanVzdGVkQ29zdGluZ0VsZW1lbnRBbW91bnQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1ZUQ0QnLCBvVmF0Q29kZSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnSVROTycsIG9JdGVtTnVtYmVyKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTU9QJywgb0Ftb3VudE9wZW4pOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FNT1InLCBvQW1vdW50T3JkZXJlZCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFJDRScsIFByaWMpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1VOSVQnLCBvVW5pdCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1BRVCcsIG9RdWFudGl0eU9wZW4pOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUSVYnLCBvUXVhbnRpdHlJbnZvaWNlZCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUVRPUicsIG9RdWFudGl0eU9yZGVyZWQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUUlYnLCBvUXVhbnRpdHlSZWNlaXZlZCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxUVScsIG9BbHRlcm5hdGl2ZVVuaXQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMUU8nLCBvQWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4pOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMVFAnLCBvQWx0ZXJuYXRpdmVQcmljZSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUkVMUCcsIEYyUkVMUCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUlBRVCcsIHJlY2VpcHRRdWFudGl0eSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUlFBTCcsIHJlY2VpcHRRdWFudGl0eSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUE5MSScsIGVhY2hMaW5lLmdldCgnUE5MSScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BOTFMnLCBlYWNoTGluZS5nZXQoJ1BOTFMnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdUUkRUJywgZWFjaExpbmUuZ2V0KCdUUkRUJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnTFdITCcsIGVhY2hMaW5lLmdldCgnV0hMTycpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0lUTk8nLCBlYWNoTGluZS5nZXQoJ0lUTk8nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQSVREJywgZWFjaExpbmUuZ2V0KCdQSVREJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUElUVCcsIGVhY2hMaW5lLmdldCgnUElUVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1NJVEUnLCBlYWNoTGluZS5nZXQoJ1NJVEUnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDQVFBJywgZWFjaExpbmUuZ2V0KCdDQVFBJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUkpRQScsIGVhY2hMaW5lLmdldCgnUkpRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1NEUUEnLCBlYWNoTGluZS5nZXQoJ1NEUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPUlFBJywgZWFjaExpbmUuZ2V0KCdPUlFBJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnSVZRQScsIGludlF0eSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUlZRQScsIGVhY2hMaW5lLmdldCgnUlZRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NGUUEnLCBlYWNoTGluZS5nZXQoJ0NGUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPUVBVJywgZWFjaExpbmUuZ2V0KCdvcGVuUXVhbnRpdHlQcmljZVVtJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFVSQycsIGVhY2hMaW5lLmdldCgnUFVSQycpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xCVVknLCBlYWNoTGluZS5nZXQoJ0JVWUUnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdTVFVNJywgZWFjaExpbmUuZ2V0KCdzdGFuZGFyZFVtJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVU5NUycsIGVhY2hMaW5lLmdldCgnVU5NUycpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMVU0nLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0ZVVtJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ1dVTicsICIiKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMTkFNJywgZWFjaExpbmUuZ2V0KCdMTkFNJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFVQUicsIGVhY2hMaW5lLmdldCgncHJpY2VQZXJQaWVjZVN0YW5kYXJkVW0nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQVVFUJywgZWFjaExpbmUuZ2V0KCdQVVFUJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxQUicsICIiKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQVENEJywgZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBpZiAoZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKS5sZW5ndGgoKSA9PSAxKSB7DQoNCiAgICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1ZUQ0QnLCAnMCcgKyBlYWNoTGluZS5nZXQoJ1ZUQ0QnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdWVENEJywgZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnR1JNVCcsIGVhY2hMaW5lLmdldCgnR1JNVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xNT0QnLCBlYWNoTGluZS5nZXQoJ01PREwnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMVEVEJywgZWFjaExpbmUuZ2V0KCdURURMJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnTFRFTCcsIGVhY2hMaW5lLmdldCgnVEVMMScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xQU0wnLCBlYWNoTGluZS5nZXQoJ1BVU0wnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMUFNUJywgZWFjaExpbmUuZ2V0KCdQVVNUJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUE9QTicsIGVhY2hMaW5lLmdldCgncG9wbkVhMTMnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdST1JDJywgZWFjaExpbmUuZ2V0KCdST1JDJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUk9STicsIGVhY2hMaW5lLmdldCgnUk9STicpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JPUkwnLCBlYWNoTGluZS5nZXQoJ1JPUkwnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdST1JYJywgZWFjaExpbmUuZ2V0KCdST1JYJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnU1VETycsIGVhY2hMaW5lLmdldCgnU1VETycpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0ZSUkMnLCBlYWNoTGluZS5nZXQoJ0ZSUkMnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdGUlJFJywgZWFjaExpbmUuZ2V0KCdGUlJFJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQURRQScsIGVhY2hMaW5lLmdldCgnQURRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09SUVQnLCBlYWNoTGluZS5nZXQoJ09SUVQnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTU9QJywgZWFjaExpbmUuZ2V0KCdhbW91bnRPcGVuJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQU1PUicsIG9Db3N0aW5nRWxlbWVudEFtb3VudCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFJDRScsIFByaWMpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1VOSVQnLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0ZVVtJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1BRVCcsIGVhY2hMaW5lLmdldCgnb3BlblF1YW50aXR5U3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUSVYnLCBlYWNoTGluZS5nZXQoJ2ludm9pY2VkUXVhbnRpdHlTdGFuZGFyZFVtJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUVRPUicsIGVhY2hMaW5lLmdldCgnb3JkZXJlZFF1YW50aXR5U3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUVRSVicsIGVhY2hMaW5lLmdldCgncmVjZWl2ZWRRdWFudGl0eVN0YW5kYXJkVW0nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTFRVJywgZWFjaExpbmUuZ2V0KCdhbHRlcm5hdGVVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMUU8nLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0aXZlUXVhbnRpdHlPcGVuJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxUUCcsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRpdmVQcmljZScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkud3JpdGUoKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogICAvLyB9DQogICAgICAgLy8gaWYoZWFjaExpbmVDaGFyZ2UuZ2V0KCJ0aGlyZFBhcnR5Q29zdHMiKSA9PSAwKXsgDQovKiAgICBpZiAoZWFjaExpbmUuZ2V0KCdQVVNMJykudG9TdHJpbmcoKSA8ICc4NScgfHwgZWFjaExpbmUuZ2V0KCdQVVNMJykudG9TdHJpbmcoKSA9PSAnODUnICYmIChvSWFwYy5lcXVhbHMoIjAiKSkpIHsNCgkJICAvL2xvZ2dlci5pbmZvKCJpblN0YXR1czg1IiArIGVhY2hMaW5lQ2hhcmdlLmdldCgidGhpcmRQYXJ0eUNvc3RzIikpDQogICAgICBpZiAoKCFlYWNoTGluZUNoYXJnZS5nZXQoImNvc3RpbmdFbGVtZW50QW1vdW50IikuZXF1YWxzKCIwLjAwIikgJiYgZWFjaExpbmVDaGFyZ2UuZ2V0KCJQcmljZSIpID09IG51bGwpIHx8IGVhY2hMaW5lQ2hhcmdlLmdldCgiUHJpY2UiKSAhPSBudWxsKSB7DQogICAgICAgIGlmIChvcFF0eSA+IDAgfHwgb3BRdHkgPCAwKSB7DQogICAgICAgICAgaWYgKCghb0FjY0ludm9pY2VDb3N0cy5lcXVhbHMoIiIpIHx8ICFvQWNjSW52b2ljZUNvc3RzLmVxdWFscygiMC4wIikpICYmICFvQ2hhcmdlRmFjdG9yLmVxdWFscygiMSIpKSB7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUkNUUCcsICJMQyIpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVTk8nLCBvT3JkZXJOdW1iZXIpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BOTEknLCBvTGluZU51bWJlcik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUE5MUycsIG9TdWJMaW5lTnVtYmVyKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDRFNFJywgb1NlcXVlbmNlTnVtYmVyKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDRUlEJywgb0Nvc3RpbmdFbGVtZW50KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdSUE5NJywgb1JlY2VpcHROdW1iZXIpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09BT1UnLCBhY0ludm9pY2VDb3N0KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPQUxDJywgb3BlbkFtb3VudExvY2FsQ3VycmVuY3kpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09RT1UnLCBvcGVuUXR5KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDRUxEJywgb0Nvc3RpbmdFbGVtZW50RGVzY3JpcHRpb24pOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0VYVFknLCBvQ2hhcmdlVHlwZSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnV1NPUCcsIG9PcGVyYXRvcik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVEhQUicsIG9UaGlyZFBhcnR5Q29zdHMpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NVQ0QnLCBvQ3VycmVuY3kpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0lWQ1MnLCBvSW52b2ljZUNvc3RzKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDSEZDJywgb0NoYXJnZUZhY3Rvcik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0VWQScsIG9Db3N0aW5nRWxlbWVudEFtb3VudCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0VWSicsIG9BZGp1c3RlZENvc3RpbmdFbGVtZW50QW1vdW50KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdWVENEJywgb1ZhdENvZGUpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0lUTk8nLCBvSXRlbU51bWJlcik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQU1PUCcsIG9BbW91bnRPcGVuKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTU9SJywgb0Ftb3VudE9yZGVyZWQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BSQ0UnLCBQcmljKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdVTklUJywgb1VuaXQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09QUVQnLCBvUXVhbnRpdHlPcGVuKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdRVElWJywgb1F1YW50aXR5SW52b2ljZWQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUT1InLCBvUXVhbnRpdHlPcmRlcmVkKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdRVFJWJywgb1F1YW50aXR5UmVjZWl2ZWQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMVFUnLCBvQWx0ZXJuYXRpdmVVbml0KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTFFPJywgb0FsdGVybmF0aXZlUXVhbnRpdHlPcGVuKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTFRQJywgb0FsdGVybmF0aXZlUHJpY2UpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JFTFAnLCBGMlJFTFApOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JQUVQnLCByZWNlaXB0UXVhbnRpdHkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JRQUwnLCByZWNlaXB0UXVhbnRpdHkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BOTEknLCBlYWNoTGluZS5nZXQoJ1BOTEknKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQTkxTJywgZWFjaExpbmUuZ2V0KCdQTkxTJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVFJEVCcsIGVhY2hMaW5lLmdldCgnVFJEVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xXSEwnLCBlYWNoTGluZS5nZXQoJ1dITE8nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdJVE5PJywgZWFjaExpbmUuZ2V0KCdJVE5PJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUElURCcsIGVhY2hMaW5lLmdldCgnUElURCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BJVFQnLCBlYWNoTGluZS5nZXQoJ1BJVFQnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdTSVRFJywgZWFjaExpbmUuZ2V0KCdTSVRFJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0FRQScsIGVhY2hMaW5lLmdldCgnQ0FRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JKUUEnLCBlYWNoTGluZS5nZXQoJ1JKUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdTRFFBJywgZWFjaExpbmUuZ2V0KCdTRFFBJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1JRQScsIGVhY2hMaW5lLmdldCgnT1JRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0lWUUEnLCBpbnZRdHkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JWUUEnLCBlYWNoTGluZS5nZXQoJ1JWUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDRlFBJywgZWFjaExpbmUuZ2V0KCdDRlFBJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1FQVScsIGVhY2hMaW5lLmdldCgnb3BlblF1YW50aXR5UHJpY2VVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVUkMnLCBlYWNoTGluZS5nZXQoJ1BVUkMnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMQlVZJywgZWFjaExpbmUuZ2V0KCdCVVlFJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnU1RVTScsIGVhY2hMaW5lLmdldCgnc3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1VOTVMnLCBlYWNoTGluZS5nZXQoJ1VOTVMnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTFVNJywgZWFjaExpbmUuZ2V0KCdhbHRlcm5hdGVVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NXVU4nLCAiIik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnTE5BTScsIGVhY2hMaW5lLmdldCgnTE5BTScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVUFInLCBlYWNoTGluZS5nZXQoJ3ByaWNlUGVyUGllY2VTdGFuZGFyZFVtJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFVRVCcsIGVhY2hMaW5lLmdldCgnUFVRVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMUFInLCAiIik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUFRDRCcsIGVhY2hMaW5lLmdldCgnVlRDRCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgaWYgKGVhY2hMaW5lLmdldCgnVlRDRCcpLnRvU3RyaW5nKCkubGVuZ3RoKCkgPT0gMSkgew0KDQogICAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdWVENEJywgJzAnICsgZWFjaExpbmUuZ2V0KCdWVENEJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVlRDRCcsIGVhY2hMaW5lLmdldCgnVlRDRCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0dSTVQnLCBlYWNoTGluZS5nZXQoJ0dSTVQnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMTU9EJywgZWFjaExpbmUuZ2V0KCdNT0RMJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnTFRFRCcsIGVhY2hMaW5lLmdldCgnVEVETCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xURUwnLCBlYWNoTGluZS5nZXQoJ1RFTDEnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMUFNMJywgZWFjaExpbmUuZ2V0KCdQVVNMJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnTFBTVCcsIGVhY2hMaW5lLmdldCgnUFVTVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BPUE4nLCBlYWNoTGluZS5nZXQoJ3BvcG5FYTEzJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUk9SQycsIGVhY2hMaW5lLmdldCgnUk9SQycpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JPUk4nLCBlYWNoTGluZS5nZXQoJ1JPUk4nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdST1JMJywgZWFjaExpbmUuZ2V0KCdST1JMJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUk9SWCcsIGVhY2hMaW5lLmdldCgnUk9SWCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1NVRE8nLCBlYWNoTGluZS5nZXQoJ1NVRE8nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdGUlJDJywgZWFjaExpbmUuZ2V0KCdGUlJDJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnRlJSRScsIGVhY2hMaW5lLmdldCgnRlJSRScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FEUUEnLCBlYWNoTGluZS5nZXQoJ0FEUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPUlFUJywgZWFjaExpbmUuZ2V0KCdPUlFUJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQU1PUCcsIGVhY2hMaW5lLmdldCgnYW1vdW50T3BlbicpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FNT1InLCBvQ29zdGluZ0VsZW1lbnRBbW91bnQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BSQ0UnLCBQcmljKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdVTklUJywgZWFjaExpbmUuZ2V0KCdhbHRlcm5hdGVVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09QUVQnLCBlYWNoTGluZS5nZXQoJ29wZW5RdWFudGl0eVN0YW5kYXJkVW0nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdRVElWJywgZWFjaExpbmUuZ2V0KCdpbnZvaWNlZFF1YW50aXR5U3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUT1InLCBlYWNoTGluZS5nZXQoJ29yZGVyZWRRdWFudGl0eVN0YW5kYXJkVW0nKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1FUUlYnLCBlYWNoTGluZS5nZXQoJ3JlY2VpdmVkUXVhbnRpdHlTdGFuZGFyZFVtJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxUVScsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRlVW0nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTFFPJywgZWFjaExpbmUuZ2V0KCdhbHRlcm5hdGl2ZVF1YW50aXR5T3BlbicpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMVFAnLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0aXZlUHJpY2UnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLndyaXRlKCk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIC8vbG9nZ2VyLmluZm8oIkluQ2hhcmdlZWxzZSIpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JDVFAnLCAiTEMiKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQVU5PJywgb09yZGVyTnVtYmVyKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQTkxJJywgb0xpbmVOdW1iZXIpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BOTFMnLCBvU3ViTGluZU51bWJlcik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0RTRScsIG9TZXF1ZW5jZU51bWJlcik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0VJRCcsIG9Db3N0aW5nRWxlbWVudCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUlBOTScsIG9SZWNlaXB0TnVtYmVyKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPQU9VJywgYWNJbnZvaWNlQ29zdCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT0FMQycsIG9wZW5BbW91bnRMb2NhbEN1cnJlbmN5KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPUU9VJywgb3BlblF0eSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0VMRCcsIG9Db3N0aW5nRWxlbWVudERlc2NyaXB0aW9uKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdFWFRZJywgb0NoYXJnZVR5cGUpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1dTT1AnLCBvT3BlcmF0b3IpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1RIUFInLCBvVGhpcmRQYXJ0eUNvc3RzKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDVUNEJywgb0N1cnJlbmN5KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdJVkNTJywgb0ludm9pY2VDb3N0cyk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0hGQycsIG9DaGFyZ2VGYWN0b3IpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NFVkEnLCBvQ29zdGluZ0VsZW1lbnRBbW91bnQpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NFVkonLCBvQWRqdXN0ZWRDb3N0aW5nRWxlbWVudEFtb3VudCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVlRDRCcsIG9WYXRDb2RlKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdJVE5PJywgb0l0ZW1OdW1iZXIpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FNT1AnLCBvQW1vdW50T3Blbik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQU1PUicsIG9BbW91bnRPcmRlcmVkKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQUkNFJywgUHJpYyk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVU5JVCcsIG9Vbml0KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPUFFUJywgb1F1YW50aXR5T3Blbik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUVRJVicsIG9RdWFudGl0eUludm9pY2VkKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdRVE9SJywgb1F1YW50aXR5T3JkZXJlZCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUVRSVicsIG9RdWFudGl0eVJlY2VpdmVkKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTFRVJywgb0FsdGVybmF0aXZlVW5pdCk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxRTycsIG9BbHRlcm5hdGl2ZVF1YW50aXR5T3Blbik7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxUUCcsIG9BbHRlcm5hdGl2ZVByaWNlKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdSRUxQJywgRjJSRUxQKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdSUFFUJywgcmVjZWlwdFF1YW50aXR5KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdSUUFMJywgcmVjZWlwdFF1YW50aXR5KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQTkxJJywgZWFjaExpbmUuZ2V0KCdQTkxJJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUE5MUycsIGVhY2hMaW5lLmdldCgnUE5MUycpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1RSRFQnLCBlYWNoTGluZS5nZXQoJ1RSRFQnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMV0hMJywgZWFjaExpbmUuZ2V0KCdXSExPJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnSVROTycsIGVhY2hMaW5lLmdldCgnSVROTycpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BJVEQnLCBlYWNoTGluZS5nZXQoJ1BJVEQnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQSVRUJywgZWFjaExpbmUuZ2V0KCdQSVRUJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnU0lURScsIGVhY2hMaW5lLmdldCgnU0lURScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0NBUUEnLCBlYWNoTGluZS5nZXQoJ0NBUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdSSlFBJywgZWFjaExpbmUuZ2V0KCdSSlFBJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnU0RRQScsIGVhY2hMaW5lLmdldCgnU0RRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09SUUEnLCBlYWNoTGluZS5nZXQoJ09SUUEnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdJVlFBJywgaW52UXR5KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdSVlFBJywgZWFjaExpbmUuZ2V0KCdSVlFBJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0ZRQScsIGVhY2hMaW5lLmdldCgnQ0ZRQScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ09RUFUnLCBlYWNoTGluZS5nZXQoJ29wZW5RdWFudGl0eVByaWNlVW0nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQVVJDJywgZWFjaExpbmUuZ2V0KCdQVVJDJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnTEJVWScsIGVhY2hMaW5lLmdldCgnQlVZRScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1NUVU0nLCBlYWNoTGluZS5nZXQoJ3N0YW5kYXJkVW0nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdVTk1TJywgZWFjaExpbmUuZ2V0KCdVTk1TJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxVTScsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRlVW0nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdDV1VOJywgIiIpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xOQU0nLCBlYWNoTGluZS5nZXQoJ0xOQU0nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQVVBSJywgZWFjaExpbmUuZ2V0KCdwcmljZVBlclBpZWNlU3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BVUVQnLCBlYWNoTGluZS5nZXQoJ1BVUVQnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTFBSJywgIiIpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1BUQ0QnLCBlYWNoTGluZS5nZXQoJ1ZUQ0QnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIGlmIChlYWNoTGluZS5nZXQoJ1ZUQ0QnKS50b1N0cmluZygpLmxlbmd0aCgpID09IDEpIHsNCg0KICAgICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVlRDRCcsICcwJyArIGVhY2hMaW5lLmdldCgnVlRDRCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1ZUQ0QnLCBlYWNoTGluZS5nZXQoJ1ZUQ0QnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdHUk1UJywgZWFjaExpbmUuZ2V0KCdHUk1UJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnTE1PRCcsIGVhY2hMaW5lLmdldCgnTU9ETCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xURUQnLCBlYWNoTGluZS5nZXQoJ1RFREwnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdMVEVMJywgZWFjaExpbmUuZ2V0KCdURUwxJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnTFBTTCcsIGVhY2hMaW5lLmdldCgnUFVTTCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0xQU1QnLCBlYWNoTGluZS5nZXQoJ1BVU1QnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQT1BOJywgZWFjaExpbmUuZ2V0KCdwb3BuRWExMycpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JPUkMnLCBlYWNoTGluZS5nZXQoJ1JPUkMnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdST1JOJywgZWFjaExpbmUuZ2V0KCdST1JOJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUk9STCcsIGVhY2hMaW5lLmdldCgnUk9STCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JPUlgnLCBlYWNoTGluZS5nZXQoJ1JPUlgnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdTVURPJywgZWFjaExpbmUuZ2V0KCdTVURPJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnRlJSQycsIGVhY2hMaW5lLmdldCgnRlJSQycpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0ZSUkUnLCBlYWNoTGluZS5nZXQoJ0ZSUkUnKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBRFFBJywgZWFjaExpbmUuZ2V0KCdBRFFBJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnT1JRVCcsIGVhY2hMaW5lLmdldCgnT1JRVCcpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FNT1AnLCBlYWNoTGluZS5nZXQoJ2Ftb3VudE9wZW4nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTU9SJywgb0Nvc3RpbmdFbGVtZW50QW1vdW50KTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdQUkNFJywgUHJpYyk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnVU5JVCcsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRlVW0nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdPUFFUJywgZWFjaExpbmUuZ2V0KCdvcGVuUXVhbnRpdHlTdGFuZGFyZFVtJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnUVRJVicsIGVhY2hMaW5lLmdldCgnaW52b2ljZWRRdWFudGl0eVN0YW5kYXJkVW0nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdRVE9SJywgZWFjaExpbmUuZ2V0KCdvcmRlcmVkUXVhbnRpdHlTdGFuZGFyZFVtJykudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdRVFJWJywgZWFjaExpbmUuZ2V0KCdyZWNlaXZlZFF1YW50aXR5U3RhbmRhcmRVbScpLnRvU3RyaW5nKCkpOw0KICAgICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0FMVFUnLCBlYWNoTGluZS5nZXQoJ2FsdGVybmF0ZVVtJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQUxRTycsIGVhY2hMaW5lLmdldCgnYWx0ZXJuYXRpdmVRdWFudGl0eU9wZW4nKS50b1N0cmluZygpKTsNCiAgICAgICAgICAgIG1pLm91dERhdGEucHV0KCdBTFRQJywgZWFjaExpbmUuZ2V0KCdhbHRlcm5hdGl2ZVByaWNlJykudG9TdHJpbmcoKSk7DQogICAgICAgICAgICBtaS53cml0ZSgpOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0qLw0KICAgIH0NCiAgLy99DQp9"}}}