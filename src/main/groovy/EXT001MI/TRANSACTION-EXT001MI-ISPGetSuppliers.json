{"programModules":{"EXT001MI":{"program":"EXT001MI","triggers":{},"transactions":{"ISPGetSuppliers":{"sourceUuid":"2a01a64a-904e-40cf-814d-6eed84d468ea","name":"ISPGetSuppliers","program":"EXT001MI","description":"ALL_MI_0001_GetSuppliers","active":true,"multi":true,"modified":1686758351436,"modifiedBy":"SMALALI","outputFields":[{"name":"RCTP","description":"Record Type","length":1,"mandatory":false,"type":"A"},{"name":"DIVI","description":"division","length":3,"mandatory":false,"type":"A"},{"name":"SUNO","description":"supplier","length":10,"mandatory":false,"type":"A"},{"name":"SUNM","description":"supplier name","length":36,"mandatory":false,"type":"A"},{"name":"PHNO","description":"telephone number 1","length":16,"mandatory":false,"type":"A"},{"name":"TEPY","description":"payment terms","length":3,"mandatory":false,"type":"A"},{"name":"TECD","description":"cash discount term","length":3,"mandatory":false,"type":"A"},{"name":"PYME","description":"payment method - accounts payable","length":3,"mandatory":false,"type":"A"},{"name":"VTCD","description":"VAT code","length":2,"mandatory":false,"type":"N"},{"name":"CSCD","description":"country","length":3,"mandatory":false,"type":"A"},{"name":"STAT","description":"status","length":2,"mandatory":false,"type":"A"},{"name":"VRNO","description":"VAT registration number","length":16,"mandatory":false,"type":"A"},{"name":"EMAL","description":"email address","length":60,"mandatory":false,"type":"A"},{"name":"PRSU","description":"payee","length":10,"mandatory":false,"type":"A"},{"name":"SUCM","description":"supplier computer communication address","length":20,"mandatory":false,"type":"A"},{"name":"ADR1","description":"address line 1","length":36,"mandatory":false,"type":"A"},{"name":"ADR2","description":"address line 2","length":36,"mandatory":false,"type":"A"},{"name":"ADR3","description":"address line 3","length":36,"mandatory":false,"type":"A"},{"name":"ADR4","description":"address line 4","length":36,"mandatory":false,"type":"A"},{"name":"ASCD","description":"CSCD Address","length":3,"mandatory":false,"type":"A"},{"name":"PONO","description":"Postal code","length":10,"mandatory":false,"type":"A"},{"name":"EDES","description":"place","length":10,"mandatory":false,"type":"A"},{"name":"TOWN","description":"city","length":20,"mandatory":false,"type":"A"},{"name":"ECAR","description":"state","length":2,"mandatory":false,"type":"A"},{"name":"IAPC","description":"invoice approval condition 1","length":1,"mandatory":false,"type":"N"},{"name":"BDIV","description":"Bank Division","length":3,"mandatory":false,"type":"A"},{"name":"BKID","description":"bank account identity","length":5,"mandatory":false,"type":"A"},{"name":"BAF1","description":"bank account field 1","length":15,"mandatory":false,"type":"A"},{"name":"FIAN","description":"account number at financial institution","length":25,"mandatory":false,"type":"A"},{"name":"IBAN","description":"international bank account number","length":34,"mandatory":false,"type":"A"},{"name":"CBPY","description":"bank priority","length":2,"mandatory":false,"type":"N"},{"name":"BKST","description":"Bank Status","length":2,"mandatory":false,"type":"A"},{"name":"ALSU","description":"Search key","length":10,"mandatory":false,"type":"A"}],"inputFields":[{"name":"STAT","description":"Status","length":2,"mandatory":false,"type":"A"},{"name":"SUNO","description":"supplier","length":10,"mandatory":false,"type":"A"},{"name":"DIVI","description":"Division","length":3,"mandatory":false,"type":"A"}],"utilities":[]}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"2a01a64a-904e-40cf-814d-6eed84d468ea":{"uuid":"2a01a64a-904e-40cf-814d-6eed84d468ea","updated":1688395759227,"updatedBy":"SMALALI","created":1686758171994,"createdBy":"SMALALI","apiVersion":"0.14","beVersion":"16.0.0.20230419174557.9","language":"GROOVY","codeHash":"90AC02855D3732385A688B52321A179304619D341ED6A47121093C4638994C99","code":"LyoqDQoqIFJFQURNRQ0KKiBUaGlzIGV4dGVuc2lvbiBTZW5kcyBNMyBTdXBwbGllciBkZXRhaWxzIChCYXNpYyBkZXRhaWxzLCBhZGRyZXNzIGRldGFpbHMsIGVtYWlsIGFkZHJlc3MsIEJhbmsgRGV0YWlscykgdG8gM3JkIHBhcnR5IGFwcGxpY2F0aW9uIElTUC4gDQoqIA0KKg0KKiBOYW1lOiBFWFQwMDFNSS5JU1BHZXRTdXBwbGllcnMNCiogRGVzY3JpcHRpb246IA0KKiBEYXRlICAgICAgICAgIENoYW5nZWQgYnkgICAgICAgICAgICAgIERlc2NyaXB0aW9uDQoqIDIwMjEtMDUtMTkgICAgSGl0ZXNoIENob3RyYW5pICAgICAgICAgSW5pdGlhbCB2ZXJzaW9uDQoqIDIwMjMtMDMtMTAgICAgU2hhc2hhbmsgTWFsYWxpICAgICAgICAgUmVtb3ZlIHVudXNlZCBjb2RlLCB1c2FnZSBsb3dlckNhbWVsQ2FzZQ0KKiAyMDIzLTA1LTI2ICAgIFNoYXNoYW5rIE1hbGFsaSAgICAgICAgIEFkZCBTdXBwbGllciBleGNlcHRpb25zIHRvIG91dHB1dCANCiovDQoNCg0KcHVibGljIGNsYXNzIElTUEdldFN1cHBsaWVycyBleHRlbmRzIEV4dGVuZE0zVHJhbnNhY3Rpb24gew0KICBwcml2YXRlIGZpbmFsIE1JQVBJIG1pOw0KICBwcml2YXRlIGZpbmFsIFByb2dyYW1BUEkgcHJvZ3JhbTsNCiAgcHJpdmF0ZSBmaW5hbCBNSUNhbGxlckFQSSBtaUNhbGxlcjsNCiAgcHJpdmF0ZSBmaW5hbCBMb2dnZXJBUEkgbG9nZ2VyOw0KICBwcml2YXRlIFN0cmluZyBkaXZpc2lvbkxpc3QgPSAiIjsNCiAgcHJpdmF0ZSBTdHJpbmcgc3RhdHVzTGlzdCA9ICIiOw0KICBwcml2YXRlIFN0cmluZyBhY3RpdmVTdXBwbGllciA9ICIiDQogIHByaXZhdGUgU3RyaW5nIGFjdGl2ZVN1cHBsaWVyTmFtZSA9ICIiDQogIHByaXZhdGUgU3RyaW5nIENPTk8gPSAiIjsNCiAgcHJpdmF0ZSBTdHJpbmcgRlJTVSA9ICIiOw0KICBwcml2YXRlIEFycmF5TGlzdCA8IFN0cmluZyA+IGJhbmtBY2NvdW50c3RhdHVzTGlzdCA9IG51bGw7DQogIHByaXZhdGUgQXJyYXlMaXN0IDwgU3RyaW5nID4gZXhjbHVkZWRBY2NvdW50c0xpc3QgPSBudWxsOw0KICBwcml2YXRlIEFycmF5TGlzdCA8IFN0cmluZyA+IGFkZHJlc3NUeXBlc0xpc3QgPSBudWxsOw0KICBwcml2YXRlIEFycmF5TGlzdCA8IFN0cmluZyA+IGFkZHJlc3NJZHNMaXN0ID0gbnVsbDsNCiAgcHJpdmF0ZSBIYXNodGFibGUgdGVtcFRhYmxlRXhjZXB0aW9uID0gbnVsbDsNCiAgcHJpdmF0ZSBBcnJheUxpc3QgPCBTdHJpbmcgPiBleGNlcHRpb25EaXZpID0gbnVsbDsNCiAgcHJpdmF0ZSBBcnJheUxpc3QgPCBIYXNodGFibGUgPiBzdXBwbGllckxpc3QgPSBudWxsOw0KICBwcml2YXRlIEFycmF5TGlzdCA8IEhhc2h0YWJsZSA+IGFkZHJlc3NMaXN0ID0gbnVsbDsNCiAgcHJpdmF0ZSBTdHJpbmcgU1RBVCA9ICIiLCBQSE5PID0gIiIsIENTQ0QgPSAiIiwgVlJOTyA9ICIiLCBTVUNNID0gIiIsIFZUQ0QgPSAiIiwgVEVQWSA9ICIiLCBQWU1FID0gIiIsIFBSU1UgPSAiIiwgVEVDRCA9ICIiLCBJQVBDID0gIiIsIEFMU1UgPSAiIiwgRU1BTCA9ICIiLCBkaXZpc2lvbkV4Y2VwdCA9ICIiOw0KICBwcml2YXRlIFN0cmluZyBBRFIxID0gIiIsIEFEUjIgPSAiIiwgQURSMyA9ICIiLCBBRFI0ID0gIiIsIFRPV04gPSAiIiwgRUNBUiA9ICIiLCBQT05PID0gIiIsIEFTQ0QgPSAiIiwgRURFUyA9ICIiLCBzdW5vRXhjZXB0PSIiLCB2dGNkRXhjZXB0PSIiLCB0ZXB5RXhjZXB0ID0iIiwgcHltZUV4Y2VwdCA9IiIsIHRlY2RFeGNlcHQgPSIiOw0KICBwcml2YXRlIGJvb2xlYW4gZW5kT2ZMaXN0ID0gZmFsc2U7DQogIGludCBjb3VudCA9IDANCg0KICBwdWJsaWMgSVNQR2V0U3VwcGxpZXJzKE1JQVBJIG1pLCBQcm9ncmFtQVBJIHByb2dyYW0sIE1JQ2FsbGVyQVBJIG1pQ2FsbGVyLCBMb2dnZXJBUEkgbG9nZ2VyKSB7DQogICAgdGhpcy5taSA9IG1pOw0KICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW07DQogICAgdGhpcy5taUNhbGxlciA9IG1pQ2FsbGVyOw0KICAgIHRoaXMubG9nZ2VyID0gbG9nZ2VyOw0KICB9DQoNCiAgcHVibGljIHZvaWQgbWFpbigpIHsNCiAgICB0ZW1wVGFibGVFeGNlcHRpb24gPSBuZXcgSGFzaHRhYmxlIDwgU3RyaW5nLCBTdHJpbmcgPiAoKTsNCiAgICBkaXZpc2lvbkxpc3QgPSBtaS5pbkRhdGEuZ2V0KCdESVZJJyk7DQogICAgQ09OTyA9IHByb2dyYW0uTERBWkQuZ2V0KCdDT05PJyk7DQogICAgRlJTVSA9IG1pLmluRGF0YS5nZXQoJ1NVTk8nKTsNCiAgICBwb3B1bGF0ZUNvbnRyb2xQcm9wZXJ0aWVzKCk7DQogICAgZ2F0aGVyQWxsU3VwcGxpZXJzKCk7DQogICAgaWYgKHN1cHBsaWVyTGlzdC5zaXplKCkgPCAyMDApIHsNCiAgICAgIGVuZE9mTGlzdCA9IHRydWU7DQogICAgfQ0KICAgIGlmICghRlJTVS50cmltKCkuaXNFbXB0eSgpKSB7DQogICAgICBzdXBwbGllckxpc3QucmVtb3ZlKDApOw0KICAgIH0NCiAgICBpZiAoc3VwcGxpZXJMaXN0LnNpemUoKSA+IDIwMCkgew0KICAgICAgLy9zdXBwbGllckxpc3Quc2l6ZSA9IDIwMDsNCiAgICB9DQogICAgIA0KICAgIHN1cHBsaWVyTGlzdC5lYWNoIHsNCiAgICAgIHZhbHVlIC0+DQogICAgICBIYXNodGFibGUgZWFjaFN1cHBsaWVyID0gdmFsdWU7DQogICAgICBjbGVhclN1cHBsaWVyRGV0YWlsc1ZhcmlhYmxlcygpOw0KICAgICAgZ2V0U3VwcGxpZXJEZXRhaWxzKGVhY2hTdXBwbGllcik7DQogICAgICBnZXRTdXBwbGllckxvY2FsRXhjZXB0aW9ucyhlYWNoU3VwcGxpZXIpOw0KICAgICAgZ2V0U3VwcGxpZXJFbWFpbChlYWNoU3VwcGxpZXIpOw0KICAgICAgZ2V0U3VwcGxpZXJBZGRyZXNzKGVhY2hTdXBwbGllcik7DQogICAgICBzZXRhZGRyZXNzKCk7DQogICAgICB3cml0ZVN1cHBsaWVyVG9PdXRwdXQoZWFjaFN1cHBsaWVyKTsNCiAgICAgIGdldEJhbmtEZXRhaWxzKGVhY2hTdXBwbGllcik7DQoNCiAgICB9DQogICAgaWYgKGVuZE9mTGlzdCkgew0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1JDVFAnLCAnTCcpOw0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1NVTk8nLCAnJSVFT0YlJScpOw0KICAgICAgbWkud3JpdGUoKTsNCiAgICB9DQoNCiAgfQ0KDQogIC8qKg0KICAgKiBHZXQgQ29udHJvbCBwcm9wZXJpZXMgZnJvbSBDVUdFWDENCiAgICogDQogICAqLw0KICAgDQogIHB1YmxpYyBwb3B1bGF0ZUNvbnRyb2xQcm9wZXJ0aWVzKCkgew0KICAgIGJhbmtBY2NvdW50c3RhdHVzTGlzdCA9IG5ldyBBcnJheUxpc3QgPCBTdHJpbmcgPiAoKTsNCiAgICBib29sZWFuIHJlY29yZEV4aXN0cyA9IHRydWU7DQogICAgZGVmIGNhbGxiYWNrID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpOw0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBTdHJpbmcgYmFua0FjY291bnRTdGF0dXNlcyA9IHJlc3VsdHMuZ2V0KCdBMTIxJyk7DQogICAgICAgIFN0cmluZ1tdIGJhbmtBY2NvdW50U3RhdHVzQXJyYXkgPSBiYW5rQWNjb3VudFN0YXR1c2VzLnNwbGl0KCc7Jyk7DQogICAgICAgIGJhbmtBY2NvdW50U3RhdHVzQXJyYXkuZWFjaCB7DQogICAgICAgICAgdmFsdWUgLT4NCiAgICAgICAgICAgIFN0cmluZyBiYW5rQWNjb3VudFN0YXR1cyA9IHZhbHVlOw0KICAgICAgICAgIGJhbmtBY2NvdW50c3RhdHVzTGlzdC5hZGQoYmFua0FjY291bnRTdGF0dXMudHJpbSgpKTsNCg0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICBtaS5lcnJvcigiUGxlYXNlIG1haW50YWluIHJlY29yZCBpbiBDVUdFWDEgZm9yIEJBTktBQ0NPVU5UU1RBVFVTIik7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICB9DQogICAgZGVmIHBhcmFtcyA9IFsiRklMRSI6ICJJU1BGSUxFIiwgIlBLMDEiOiAiR0VUU1VQUExJRVJTIiwgIlBLMDIiOiAiQkFOS0FDQ09VTlRTVEFUVVMiXTsNCiAgICBtaUNhbGxlci5jYWxsKCJDVVNFWFRNSSIsICJHZXRGaWVsZFZhbHVlIiwgcGFyYW1zLCBjYWxsYmFjayk7DQoNCiAgICBleGNsdWRlZEFjY291bnRzTGlzdCA9IG5ldyBBcnJheUxpc3QgPCBTdHJpbmcgPiAoKTsNCiAgICBkZWYgY2FsbGJhY2syID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpOw0KICAgICAgaWYgKHJlY29yZEV4aXN0cykgew0KICAgICAgICBTdHJpbmcgZXhjbHVkZWRBY2NvdW50cyA9IHJlc3VsdHMuZ2V0KCdBMTIxJyk7DQogICAgICAgIFN0cmluZ1tdIGV4Y2x1ZGVkQWNjb3VudHNBcnJheSA9IGV4Y2x1ZGVkQWNjb3VudHMuc3BsaXQoJzsnKTsNCiAgICAgICAgZXhjbHVkZWRBY2NvdW50c0FycmF5LmVhY2ggew0KICAgICAgICAgIHZhbHVlIC0+DQogICAgICAgICAgICBTdHJpbmcgZXhjbHVkZWRBY2NvdW50ID0gdmFsdWU7DQogICAgICAgICAgZXhjbHVkZWRBY2NvdW50c0xpc3QuYWRkKGV4Y2x1ZGVkQWNjb3VudCk7DQoNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgbWkuZXJyb3IoIlBsZWFzZSBtYWludGFpbiByZWNvcmQgaW4gQ1VHRVgxIGZvciBFWENMVURFREFDQ09VTlRTIik7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICB9DQogICAgZGVmIHBhcmFtczIgPSBbIkZJTEUiOiAiSVNQRklMRSIsICJQSzAxIjogIkdFVFNVUFBMSUVSUyIsICJQSzAyIjogIkVYQ0xVREVEQUNDT1VOVFMiXTsNCiAgICBtaUNhbGxlci5jYWxsKCJDVVNFWFRNSSIsICJHZXRGaWVsZFZhbHVlIiwgcGFyYW1zMiwgY2FsbGJhY2syKTsNCg0KICAgIGFkZHJlc3NUeXBlc0xpc3QgPSBuZXcgQXJyYXlMaXN0IDwgU3RyaW5nID4gKCk7DQogICAgZGVmIGNhbGxiYWNrMyA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKTsNCiAgICAgIGlmIChyZWNvcmRFeGlzdHMpIHsNCiAgICAgICAgU3RyaW5nIGFkZHJlc3NUeXBlcyA9IHJlc3VsdHMuZ2V0KCdBMTIxJyk7DQogICAgICAgIFN0cmluZ1tdIGFkZHJlc3NUeXBlc0FycmF5ID0gYWRkcmVzc1R5cGVzLnNwbGl0KCc7Jyk7DQogICAgICAgIGFkZHJlc3NUeXBlc0FycmF5LmVhY2ggew0KICAgICAgICAgIHZhbHVlIC0+DQogICAgICAgICAgICBTdHJpbmcgYWRkcmVzc1R5cGUgPSB2YWx1ZTsNCiAgICAgICAgICBhZGRyZXNzVHlwZXNMaXN0LmFkZChhZGRyZXNzVHlwZSk7DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIG1pLmVycm9yKCJQbGVhc2UgbWFpbnRhaW4gcmVjb3JkIGluIENVR0VYMSBmb3IgQUREUkVTU1RZUEUiKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgIH0NCiAgICBkZWYgcGFyYW1zMyA9IFsiRklMRSI6ICJJU1BGSUxFIiwgIlBLMDEiOiAiR0VUU1VQUExJRVJTIiwgIlBLMDIiOiAiQUREUkVTU1RZUEUiXTsNCiAgICBtaUNhbGxlci5jYWxsKCJDVVNFWFRNSSIsICJHZXRGaWVsZFZhbHVlIiwgcGFyYW1zMywgY2FsbGJhY2szKTsNCg0KICAgIGFkZHJlc3NJZHNMaXN0ID0gbmV3IEFycmF5TGlzdCA8IFN0cmluZyA+ICgpOw0KICAgIGRlZiBjYWxsYmFjazQgPSB7DQogICAgICBNYXAgPCBTdHJpbmcsDQogICAgICBTdHJpbmcgPiByZXN1bHRzIC0+DQogICAgICByZWNvcmRFeGlzdHMgPSAhcmVzdWx0cy5nZXQoJ2Vycm9yJyk7DQogICAgICBpZiAocmVjb3JkRXhpc3RzKSB7DQogICAgICAgIFN0cmluZyBhZGRyZXNzSWRzID0gcmVzdWx0cy5nZXQoJ0ExMjEnKTsNCiAgICAgICAgU3RyaW5nW10gYWRkcmVzc0lkc0FycmF5ID0gYWRkcmVzc0lkcy5zcGxpdCgnOycpOw0KICAgICAgICBhZGRyZXNzSWRzQXJyYXkuZWFjaCB7DQogICAgICAgICAgdmFsdWUgLT4NCiAgICAgICAgICAgIFN0cmluZyBhZGRyZXNzSWQgPSB2YWx1ZTsNCiAgICAgICAgICBhZGRyZXNzSWRzTGlzdC5hZGQoYWRkcmVzc0lkKTsNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgbWkuZXJyb3IoIlBsZWFzZSBtYWludGFpbiByZWNvcmQgaW4gQ1VHRVgxIGZvciBBRERSRVNTSUQiKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgIH0NCiAgICBkZWYgcGFyYW1zNCA9IFsiRklMRSI6ICJJU1BGSUxFIiwgIlBLMDEiOiAiR0VUU1VQUExJRVJTIiwgIlBLMDIiOiAiQUREUkVTU0lEIl07DQogICAgbWlDYWxsZXIuY2FsbCgiQ1VTRVhUTUkiLCAiR2V0RmllbGRWYWx1ZSIsIHBhcmFtczQsIGNhbGxiYWNrNCk7DQogIH0NCg0KICAvKioNCiAgICogTGlzdCBhbGwgU3VwcGxpZXJzIHVzaW5nIENSUzYyME1JLkxzdFN1cHBsaWVycw0KICAgKiANCiAgICovDQogICANCiAgcHVibGljIGdhdGhlckFsbFN1cHBsaWVycygpIHsNCiAgICBzdXBwbGllckxpc3QgPSBuZXcgQXJyYXlMaXN0IDwgSGFzaHRhYmxlID4gKCk7DQogICAgYm9vbGVhbiByZWNvcmRFeGlzdHMgPSB0cnVlOw0KICAgIGRlZiBjYWxsYmFjayA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKTsNCiAgICAgIGlmIChyZWNvcmRFeGlzdHMpIHsNCiAgICAgICAgU3RyaW5nIFNVTk8gPSByZXN1bHRzLmdldCgnU1VOTycpOw0KICAgICAgICBTdHJpbmcgU1VOTSA9IHJlc3VsdHMuZ2V0KCdTVU5NJyk7DQogICAgICAgIEhhc2h0YWJsZSB0ZW1wVGFibGUgPSBuZXcgSGFzaHRhYmxlKCk7DQogICAgICAgIHRlbXBUYWJsZS5wdXQoJ1NVTk8nLCBTVU5PLnRyaW0oKSk7DQogICAgICAgIHRlbXBUYWJsZS5wdXQoJ1NVTk0nLCBTVU5NLnRyaW0oKSk7DQogICAgICAgIHN1cHBsaWVyTGlzdC5hZGQodGVtcFRhYmxlKTsNCiAgICAgIH0NCiAgICB9DQogICAgZGVmIHBhcmFtcyA9IFsiQ09OTyI6IENPTk8sICdGUlNVJzogRlJTVV07DQogICAgbWlDYWxsZXIuc2V0TGlzdE1heFJlY29yZHMoMjAxKTsNCiAgICBtaUNhbGxlci5jYWxsKCJDUlM2MjBNSSIsICJMc3RTdXBwbGllcnMiLCBwYXJhbXMsIGNhbGxiYWNrKTsNCiAgfQ0KDQoNCi8qKiBDbGVhciB0aGUgdmVyaWFibGVzDQogICAqIA0KICAqLw0KICANCiAgcHVibGljIGNsZWFyU3VwcGxpZXJEZXRhaWxzVmFyaWFibGVzKCkgew0KICAgIFNUQVQgPSAiIjsNCiAgICBQSE5PID0gIiI7DQogICAgQ1NDRCA9ICIiOw0KICAgIFZSTk8gPSAiIjsNCiAgICBTVUNNID0gIiI7DQogICAgVlRDRCA9ICIiOw0KICAgIFRFUFkgPSAiIjsNCiAgICBQWU1FID0gIiI7DQogICAgUFJTVSA9ICIiOw0KICAgIFRFQ0QgPSAiIjsNCiAgICBJQVBDID0gIiI7DQoJICBBTFNVID0gIiI7DQogICAgRU1BTCA9ICIiOw0KICAgIEFEUjEgPSAiIjsNCiAgICBBRFIyID0gIiI7DQogICAgQURSMyA9ICIiOw0KICAgIEFEUjQgPSAiIjsNCiAgICBUT1dOID0gIiI7DQogICAgRUNBUiA9ICIiOw0KICAgIFBPTk8gPSAiIjsNCiAgICBBU0NEID0gIiI7DQogICAgRURFUyA9ICIiOw0KICAgIGRpdmlzaW9uRXhjZXB0PSIiDQogICAgc3Vub0V4Y2VwdD0iIiANCiAgICB2dGNkRXhjZXB0PSIiIA0KICAgIHRlcHlFeGNlcHQgPSIiIA0KICAgIHB5bWVFeGNlcHQgPSIiIA0KICAgIHRlY2RFeGNlcHQgPSIiDQogIH0NCg0KICAvKioNCiAgICogR2V0IEJhc2ljIGRldGFpbHMgZm9yIGVhY2ggc3VwcGxpZXINCiAgICogDQogICAqLw0KICBwdWJsaWMgZ2V0U3VwcGxpZXJEZXRhaWxzKEhhc2h0YWJsZSBlYWNoU3VwcGxpZXIpIHsNCiAgICBTdHJpbmcgU1VOTyA9IGVhY2hTdXBwbGllci5nZXQoJ1NVTk8nKTsNCg0KICAgIGJvb2xlYW4gcmVjb3JkRXhpc3RzID0gdHJ1ZTsNCiAgICBkZWYgY2FsbGJhY2sgPSB7DQogICAgICBNYXAgPCBTdHJpbmcsDQogICAgICBTdHJpbmcgPiByZXN1bHRzIC0+DQogICAgICByZWNvcmRFeGlzdHMgPSAhcmVzdWx0cy5nZXQoJ2Vycm9yJyk7DQogICAgICBpZiAocmVjb3JkRXhpc3RzKSB7DQogICAgICAgIFNUQVQgPSByZXN1bHRzLmdldCgnU1RBVCcpOw0KICAgICAgICBQSE5PID0gcmVzdWx0cy5nZXQoJ1BITk8nKTsNCiAgICAgICAgQ1NDRCA9IHJlc3VsdHMuZ2V0KCdDU0NEJyk7DQogICAgICAgIFZSTk8gPSByZXN1bHRzLmdldCgnVlJOTycpOw0KICAgICAgICBTVUNNID0gcmVzdWx0cy5nZXQoJ1NVQ00nKTsNCiAgICAgICAgVlRDRCA9IHJlc3VsdHMuZ2V0KCdWVENEJyk7DQogICAgICAgIFRFUFkgPSByZXN1bHRzLmdldCgnVEVQWScpOw0KICAgICAgICBQWU1FID0gcmVzdWx0cy5nZXQoJ1BZTUUnKTsNCiAgICAgICAgUFJTVSA9IHJlc3VsdHMuZ2V0KCdQUlNVJykgIT0gbnVsbCAmJiAhcmVzdWx0cy5nZXQoJ1BSU1UnKS50cmltKCkuaXNCbGFuaygpID8gcmVzdWx0cy5nZXQoJ1BSU1UnKSA6IFNVTk87DQogICAgICAgIFRFQ0QgPSByZXN1bHRzLmdldCgnVEVDRCcpOw0KICAgICAgICBJQVBDID0gcmVzdWx0cy5nZXQoJ0lBUEMnKTsNCgkJQUxTVSA9IHJlc3VsdHMuZ2V0KCdBTFNVJyk7DQoNCiAgICAgIH0NCiAgICB9DQogICAgZGVmIHBhcmFtcyA9IFsiQ09OTyI6IENPTk8sICJTVU5PIjogU1VOT107DQogICAgDQogICAgbWlDYWxsZXIuY2FsbCgiQ1JTNjIwTUkiLCAiR2V0QmFzaWNEYXRhIiwgcGFyYW1zLCBjYWxsYmFjayk7DQogIH0NCiAgDQogICAgLyoqDQogICAqIEdldCBsb2NhbCBleGNlcHRpb25zIGZvciBlYWNoIHN1cHBsaWVyDQogICAqIA0KICAgKi8NCiAgcHVibGljIGdldFN1cHBsaWVyTG9jYWxFeGNlcHRpb25zKEhhc2h0YWJsZSBlYWNoU3VwcGxpZXIpIHsNCiAgICBleGNlcHRpb25EaXZpID0gbmV3IEFycmF5TGlzdCA8IFN0cmluZyA+ICgpOw0KICAgIFN0cmluZyBTVU5PID0gZWFjaFN1cHBsaWVyLmdldCgnU1VOTycpOw0KICAgICBTdHJpbmcgU1VOTSA9IGVhY2hTdXBwbGllci5nZXQoJ1NVTk0nKTsNCiAgICBib29sZWFuIHJlY29yZEV4aXN0cyA9IHRydWU7DQogICAgZGVmIGNhbGxiYWNrID0gew0KICAgICAgTWFwIDwgU3RyaW5nLA0KICAgICAgU3RyaW5nID4gcmVzdWx0cyAtPg0KICAgICAgcmVjb3JkRXhpc3RzID0gIXJlc3VsdHMuZ2V0KCdlcnJvcicpOw0KICAgICAgaWYgKHJlY29yZEV4aXN0cyAmJiBjb3VudCA9PSAwKSB7DQogICAgICAgIHRlbXBUYWJsZUV4Y2VwdGlvbi5wdXQocmVzdWx0cy5nZXQoJ1NVTk8nKS50b1N0cmluZygpLnRyaW0oKStyZXN1bHRzLmdldCgnRElWSScpLCByZXN1bHRzLmdldCgnVlRDRCcpKyIjIityZXN1bHRzLmdldCgnVEVQWScpKyIjIityZXN1bHRzLmdldCgnUFlNRScpKyIjIityZXN1bHRzLmdldCgnVEVDRCcpKQ0KICAgICAgICAvL2V4Y2VwdGlvbkRpdmkuYWRkKHJlc3VsdHMuZ2V0KCdESVZJJykpDQogICAgICBpZighZXhjZXB0aW9uRGl2aS5jb250YWlucyhyZXN1bHRzLmdldCgnRElWSScpKSl7DQogICAgICAgZXhjZXB0aW9uRGl2aS5hZGQocmVzdWx0cy5nZXQoJ0RJVkknKSkNCiAgICAgIH0NCiAgICAgICAgIGxvZ2dlci5pbmZvKCJleGNlcHRpb25EaXZpIitleGNlcHRpb25EaXZpKQ0KICAgICAgICBsb2dnZXIuaW5mbygidGVtcFRhYmxlRXhjZXB0aW9uIit0ZW1wVGFibGVFeGNlcHRpb24pDQogICAgICAgIA0KICAgICAgfQ0KICAgIH0NCiAgICBkZWYgcGFyYW1zID0gWyJTVU5PIjogU1VOTywgIkRJVkkiOiAiIl07DQogICAgDQogICAgbWlDYWxsZXIuY2FsbCgiTUZTNjIwTUkiLCAiTHN0U3VwcExvY2FsRXhjIiwgcGFyYW1zLCBjYWxsYmFjayk7DQogICAgLy9jb3VudCsrOw0KICAgIC8vbG9nZ2VyLmluZm8oImNvdW50Iitjb3VudCkNCiAgfQ0KDQogIC8qKg0KICAgKiBHZXQgZW1haWwgYWRkcmVzcyBmb3IgZWFjaCBzdXBwbGllcg0KICAgKiANCiAgICovDQogICANCiAgcHVibGljIGdldFN1cHBsaWVyRW1haWwoSGFzaHRhYmxlIGVhY2hTdXBwbGllcikgew0KICAgIFN0cmluZyBTVU5PID0gZWFjaFN1cHBsaWVyLmdldCgnU1VOTycpOw0KDQogICAgYm9vbGVhbiByZWNvcmRFeGlzdHMgPSB0cnVlOw0KICAgIGRlZiBjYWxsYmFjayA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKTsNCiAgICAgIGlmIChyZWNvcmRFeGlzdHMpIHsNCiAgICAgICAgRU1BTCA9IHJlc3VsdHMuZ2V0KCdFTUFMJyk7DQoNCiAgICAgIH0NCiAgICB9DQogICAgZGVmIHBhcmFtcyA9IFsiRU1UUCI6ICIwMiIsICJFTUtZIjogU1VOT107DQogICAgbWlDYWxsZXIuY2FsbCgiQ1JTMTExTUkiLCAiR2V0IiwgcGFyYW1zLCBjYWxsYmFjayk7DQogIH0NCg0KICAvKioNCiAgICogRGVwZW5kIHVwb24gY29udHJvbCBwcm9wZXJ0eSAsIGdldCBzdXBwbGllciBhZGRyZXNzIGRldGFpbHMNCiAgICogDQogICAqLw0KICAgDQogIHB1YmxpYyBnZXRTdXBwbGllckFkZHJlc3MoSGFzaHRhYmxlIGVhY2hTdXBwbGllcikgew0KICAgIFN0cmluZyBTVU5PID0gZWFjaFN1cHBsaWVyLmdldCgnU1VOTycpOw0KDQogICAgYm9vbGVhbiByZWNvcmRFeGlzdHMgPSB0cnVlOw0KICAgIGRlZiBjYWxsYmFjayA9IHsNCiAgICAgIE1hcCA8IFN0cmluZywNCiAgICAgIFN0cmluZyA+IHJlc3VsdHMgLT4NCiAgICAgIHJlY29yZEV4aXN0cyA9ICFyZXN1bHRzLmdldCgnZXJyb3InKTsNCiAgICAgIGlmIChyZWNvcmRFeGlzdHMpIHsNCg0KICAgICAgICBTdHJpbmcgQURURSA9ICIiOw0KICAgICAgICBTdHJpbmcgQURJRCA9ICIiOw0KICAgICAgICBBRFRFID0gcmVzdWx0cy5nZXQoJ0FEVEUnKTsNCiAgICAgICAgQURJRCA9IHJlc3VsdHMuZ2V0KCdBRElEJyk7DQogICAgICAgIEFEUjEgPSByZXN1bHRzLmdldCgnQURSMScpOw0KICAgICAgICBBRFIyID0gcmVzdWx0cy5nZXQoJ0FEUjInKTsNCiAgICAgICAgQURSMyA9IHJlc3VsdHMuZ2V0KCdBRFIzJyk7DQogICAgICAgIEFEUjQgPSByZXN1bHRzLmdldCgnQURSNCcpOw0KICAgICAgICBUT1dOID0gcmVzdWx0cy5nZXQoJ1RPV04nKTsNCiAgICAgICAgRUNBUiA9IHJlc3VsdHMuZ2V0KCdFQ0FSJyk7DQogICAgICAgIFBPTk8gPSByZXN1bHRzLmdldCgnUE9OTycpOw0KICAgICAgICBBU0NEID0gcmVzdWx0cy5nZXQoJ0NTQ0QnKTsNCiAgICAgICAgRURFUyA9IHJlc3VsdHMuZ2V0KCdFREVTJyk7DQoNCiAgICAgICAgSGFzaHRhYmxlIHRlbXBUYWJsZSA9IG5ldyBIYXNodGFibGUoKTsNCiAgICAgICAgdGVtcFRhYmxlLnB1dCgnQURURScsIEFEVEUpOw0KICAgICAgICB0ZW1wVGFibGUucHV0KCdBRElEJywgQURJRCk7DQogICAgICAgIHRlbXBUYWJsZS5wdXQoJ0FEUjEnLCBBRFIxKTsNCiAgICAgICAgdGVtcFRhYmxlLnB1dCgnQURSMicsIEFEUjIpOw0KICAgICAgICB0ZW1wVGFibGUucHV0KCdBRFIzJywgQURSMyk7DQogICAgICAgIHRlbXBUYWJsZS5wdXQoJ0FEUjQnLCBBRFI0KTsNCiAgICAgICAgdGVtcFRhYmxlLnB1dCgnVE9XTicsIFRPV04pOw0KICAgICAgICB0ZW1wVGFibGUucHV0KCdFQ0FSJywgRUNBUik7DQogICAgICAgIHRlbXBUYWJsZS5wdXQoJ1BPTk8nLCBQT05PKTsNCiAgICAgICAgdGVtcFRhYmxlLnB1dCgnQ1NDRCcsIENTQ0QpOw0KICAgICAgICB0ZW1wVGFibGUucHV0KCdFREVTJywgRURFUyk7DQogICAgICAgIGFkZHJlc3NMaXN0LmFkZCh0ZW1wVGFibGUpOw0KDQogICAgICB9DQogICAgfQ0KICAgIGRlZiBwYXJhbXMgPSBbIlNVTk8iOiBTVU5PXTsNCiAgICBtaUNhbGxlci5zZXRMaXN0TWF4UmVjb3Jkcyg1MCk7DQogICAgbWlDYWxsZXIuY2FsbCgiQ1JTNjIwTUkiLCAiTHN0QWRkcmVzc2VzIiwgcGFyYW1zLCBjYWxsYmFjayk7DQogIH0NCiAgDQogIC8qKiBzZXQgdGhlIGFkZHJlc3MgbG9vcA0KICAgKiANCiAgKi8NCg0KICBwdWJsaWMgc2V0YWRkcmVzcygpIHsNCiAgICBhZGRyZXNzTGlzdC5lYWNoIHsNCiAgICAgIHZhbHVlIC0+DQogICAgICAgIEhhc2h0YWJsZSBlYWNoYWRkcmVzc0xpc3QgPSB2YWx1ZTsNCiAgICAgIHNldEFkZHJlc3NEZXRhaWxzKGVhY2hhZGRyZXNzTGlzdCk7DQogICAgfQ0KICB9DQoNCiAgLyoqIHNldCB0aGUgYWRkcmVzcyBkZXRhaWxzIGluIG91dHB1dCB2ZXJpYWJsZXMNCiAgICogDQogICovDQoNCiAgcHVibGljIHNldEFkZHJlc3NEZXRhaWxzKEhhc2h0YWJsZSBlYWNoYWRkcmVzc0xpc3QpIHsNCg0KICAgIFN0cmluZyB0ZW1wQURURSA9IGVhY2hhZGRyZXNzTGlzdC5nZXQoJ0FEVEUnKTsNCiAgICBTdHJpbmcgdGVtcEFESUQgPSBlYWNoYWRkcmVzc0xpc3QuZ2V0KCdBRElEJyk7DQogICAgU3RyaW5nIHRlbXBBRFIxID0gZWFjaGFkZHJlc3NMaXN0LmdldCgnQURSMScpOw0KICAgIFN0cmluZyB0ZW1wQURSMiA9IGVhY2hhZGRyZXNzTGlzdC5nZXQoJ0FEUjInKTsNCiAgICBTdHJpbmcgdGVtcEFEUjMgPSBlYWNoYWRkcmVzc0xpc3QuZ2V0KCdBRFIzJyk7DQogICAgU3RyaW5nIHRlbXBBRFI0ID0gZWFjaGFkZHJlc3NMaXN0LmdldCgnQURSNCcpOw0KICAgIFN0cmluZyB0ZW1wVE9XTiA9IGVhY2hhZGRyZXNzTGlzdC5nZXQoJ1RPV04nKTsNCiAgICBTdHJpbmcgdGVtcEVDQVIgPSBlYWNoYWRkcmVzc0xpc3QuZ2V0KCdFQ0FSJyk7DQogICAgU3RyaW5nIHRlbXBQT05PID0gZWFjaGFkZHJlc3NMaXN0LmdldCgnUE9OTycpOw0KICAgIFN0cmluZyB0ZW1wQ1NDRCA9IGVhY2hhZGRyZXNzTGlzdC5nZXQoJ0NTQ0QnKTsNCiAgICBTdHJpbmcgdGVtcEVERVMgPSBlYWNoYWRkcmVzc0xpc3QuZ2V0KCdFREVTJyk7DQoNCiAgICBpZiAoYWRkcmVzc1R5cGVzTGlzdC5jb250YWlucyh0ZW1wQURURS50cmltKCkpICYmIGFkZHJlc3NJZHNMaXN0LmNvbnRhaW5zKHRlbXBBRElELnRyaW0oKSkpIHsNCiAgICAgIEFEUjEgPSBlYWNoYWRkcmVzc0xpc3QuZ2V0KCdBRFIxJyk7DQogICAgICBBRFIyID0gZWFjaGFkZHJlc3NMaXN0LmdldCgnQURSMicpOw0KICAgICAgQURSMyA9IGVhY2hhZGRyZXNzTGlzdC5nZXQoJ0FEUjMnKTsNCiAgICAgIEFEUjQgPSBlYWNoYWRkcmVzc0xpc3QuZ2V0KCdBRFI0Jyk7DQogICAgICBUT1dOID0gZWFjaGFkZHJlc3NMaXN0LmdldCgnVE9XTicpOw0KICAgICAgRUNBUiA9IGVhY2hhZGRyZXNzTGlzdC5nZXQoJ0VDQVInKTsNCiAgICAgIFBPTk8gPSBlYWNoYWRkcmVzc0xpc3QuZ2V0KCdQT05PJyk7DQogICAgICBDU0NEID0gZWFjaGFkZHJlc3NMaXN0LmdldCgnQ1NDRCcpOw0KICAgICAgRURFUyA9IGVhY2hhZGRyZXNzTGlzdC5nZXQoJ0VERVMnKTsNCiAgICB9DQoNCiAgfQ0KICANCiAgICAvKioNCiAgICogV3JpdGUgc3VwcGxpZXIgZGV0YWlscyB0byBvdXRwdXQgb2YgdGhlIGFwaQ0KICAgKiANCiAgICovDQoNCiAgcHVibGljIHdyaXRlU3VwcGxpZXJUb091dHB1dChIYXNodGFibGUgZWFjaFN1cHBsaWVyKSB7DQogICAgDQogICAgYm9vbGVhbiBpc0luRm9yTG9vcCA9IGZhbHNlDQogICAgU3RyaW5nIFNVTk8gPSBlYWNoU3VwcGxpZXIuZ2V0KCdTVU5PJyk7DQogICAgU3RyaW5nIFNVTk0gPSBlYWNoU3VwcGxpZXIuZ2V0KCdTVU5NJyk7DQogICAgaW50IGkgPSAwDQogICAgbG9nZ2VyLmluZm8oIlNVUFBJRkJFRk9SRSIrU1VOTykNCiAgICBsb2dnZXIuaW5mbygic2l6ZSIrZXhjZXB0aW9uRGl2aS5zaXplKCkpDQogICAgZm9yIChpPTA7IGk8IGV4Y2VwdGlvbkRpdmkuc2l6ZSgpO2krKyl7DQogICAgICANCiAgICBTdHJpbmcgRElWSSA9IGV4Y2VwdGlvbkRpdmkuZ2V0KGkpDQogICAgU3RyaW5nIERpdmlzaW9uID0gRElWSS50cmltKCkNCiAgICBsb2dnZXIuaW5mbygiRGl2aXNpb25TVVBQIitTVU5PLnRyaW0oKStEaXZpc2lvbikNCiAgICANCiAgICBtaS5vdXREYXRhLnB1dCgnUkNUUCcsICdIJyk7DQogICAgDQogICAgaWYodGVtcFRhYmxlRXhjZXB0aW9uLmNvbnRhaW5zS2V5KFNVTk8udHJpbSgpK0RpdmlzaW9uKSl7DQogICAgICBpc0luRm9yTG9vcCA9IHRydWUNCiAgICAgIGxvZ2dlci5pbmZvKCJEaXZpc2lvblNVUFBjb250YWluc2tleSIrRGl2aXNpb24rU1VOTykNCiAgICAgIFN0cmluZyBPdXRwdXQgPSB0ZW1wVGFibGVFeGNlcHRpb24uZ2V0KFNVTk8udHJpbSgpK0RpdmlzaW9uKQ0KICAgICAgU3RyaW5nW10gT3V0cHV0MSA9IE91dHB1dC5zcGxpdCgiIyIpOw0KICAgICAgc3Vub0V4Y2VwdCA9IFNVTk8udHJpbSgpDQogICAgICBkaXZpc2lvbkV4Y2VwdCA9IERpdmlzaW9uLnRyaW0oKTsNCiAgICAgIHZ0Y2RFeGNlcHQgPSBPdXRwdXQxWzBdDQogICAgICB0ZXB5RXhjZXB0ID0gT3V0cHV0MVsxXQ0KICAgICAgcHltZUV4Y2VwdCA9IE91dHB1dDFbMl0NCiAgICAgIHRlY2RFeGNlcHQgPSBPdXRwdXQxWzNdDQogICAgICANCiAgICAgIG1pLm91dERhdGEucHV0KCdESVZJJyxkaXZpc2lvbkV4Y2VwdCApDQogICAgICBtaS5vdXREYXRhLnB1dCgnU1VOTycsIHN1bm9FeGNlcHQpDQogICAgICBpZiAodnRjZEV4Y2VwdC50cmltKCkubGVuZ3RoKCkgPT0gMSkgew0KICAgICAgDQogICAgICBtaS5vdXREYXRhLnB1dCgnVlRDRCcsICIwIiArIHZ0Y2RFeGNlcHQudG9TdHJpbmcoKSk7DQogICAgfQ0KICAgIGVsc2Ugew0KICAgICAgDQogICAgICBtaS5vdXREYXRhLnB1dCgnVlRDRCcsIHZ0Y2RFeGNlcHQpOw0KICAgIH0NCiAgICAgIA0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1RFUFknLCB0ZXB5RXhjZXB0KQ0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1BZTUUnLCBweW1lRXhjZXB0KQ0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1RFQ0QnLCB0ZWNkRXhjZXB0KQ0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1NVTk0nLCBTVU5NKTsNCiAgICBtaS5vdXREYXRhLnB1dCgnUEhOTycsIFBITk8pOw0KICAgIG1pLm91dERhdGEucHV0KCdDU0NEJywgQ1NDRCk7DQogICAgbWkub3V0RGF0YS5wdXQoJ1NUQVQnLCBTVEFUKTsNCiAgICBtaS5vdXREYXRhLnB1dCgnVlJOTycsIFZSTk8pOw0KICAgIG1pLm91dERhdGEucHV0KCdFTUFMJywgRU1BTCk7DQogICAgbWkub3V0RGF0YS5wdXQoJ1BSU1UnLCBQUlNVKTsNCiAgICBtaS5vdXREYXRhLnB1dCgnU1VDTScsIFNVQ00pOw0KICAgIG1pLm91dERhdGEucHV0KCdBRFIxJywgQURSMSk7DQogICAgbWkub3V0RGF0YS5wdXQoJ0FEUjInLCBBRFIyKTsNCiAgICBtaS5vdXREYXRhLnB1dCgnQURSMycsIEFEUjMpOw0KICAgIG1pLm91dERhdGEucHV0KCdBRFI0JywgQURSNCk7DQogICAgbWkub3V0RGF0YS5wdXQoJ0FTQ0QnLCBBU0NEKTsNCiAgICBtaS5vdXREYXRhLnB1dCgnUE9OTycsIFBPTk8pOw0KICAgIG1pLm91dERhdGEucHV0KCdFREVTJywgRURFUyk7DQogICAgbWkub3V0RGF0YS5wdXQoJ1RPV04nLCBUT1dOKTsNCiAgICBtaS5vdXREYXRhLnB1dCgnRUNBUicsIEVDQVIpOw0KICAgIG1pLm91dERhdGEucHV0KCdJQVBDJywgSUFQQyk7DQoJICBtaS5vdXREYXRhLnB1dCgnQUxTVScsIEFMU1UpOw0KICAgIG1pLndyaXRlKCk7DQogICAgfQ0KICAgIH0gLy9lbmQgb2YgZm9yIGxvb3ANCiAgICANCiAgICBpZiAoIWlzSW5Gb3JMb29wIHx8IChpPT1leGNlcHRpb25EaXZpLnNpemUoKSkpew0KICAgICBtaS5vdXREYXRhLnB1dCgnUkNUUCcsICdIJyk7DQogICAgICBtaS5vdXREYXRhLnB1dCgnRElWSScsICIiKQ0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1NVTk8nLCBTVU5PKQ0KICAgICAgaWYgKFZUQ0QudHJpbSgpLmxlbmd0aCgpID09IDEpIHsNCiAgICAgIA0KICAgICAgbWkub3V0RGF0YS5wdXQoJ1ZUQ0QnLCAiMCIgKyBWVENELnRvU3RyaW5nKCkpOw0KICAgIH0gZWxzZSB7DQogICAgICANCiAgICAgIG1pLm91dERhdGEucHV0KCdWVENEJywgVlRDRCk7DQogICAgfQ0KICAgICAgDQogICAgICBtaS5vdXREYXRhLnB1dCgnVEVQWScsIFRFUFkpDQogICAgICBtaS5vdXREYXRhLnB1dCgnUFlNRScsIFBZTUUpDQogICAgICBtaS5vdXREYXRhLnB1dCgnVEVDRCcsIFRFQ0QpDQogICAgICBtaS5vdXREYXRhLnB1dCgnU1VOTScsIFNVTk0pOw0KICAgIG1pLm91dERhdGEucHV0KCdQSE5PJywgUEhOTyk7DQogICAgbWkub3V0RGF0YS5wdXQoJ0NTQ0QnLCBDU0NEKTsNCiAgICBtaS5vdXREYXRhLnB1dCgnU1RBVCcsIFNUQVQpOw0KICAgIG1pLm91dERhdGEucHV0KCdWUk5PJywgVlJOTyk7DQogICAgbWkub3V0RGF0YS5wdXQoJ0VNQUwnLCBFTUFMKTsNCiAgICBtaS5vdXREYXRhLnB1dCgnUFJTVScsIFBSU1UpOw0KICAgIG1pLm91dERhdGEucHV0KCdTVUNNJywgU1VDTSk7DQogICAgbWkub3V0RGF0YS5wdXQoJ0FEUjEnLCBBRFIxKTsNCiAgICBtaS5vdXREYXRhLnB1dCgnQURSMicsIEFEUjIpOw0KICAgIG1pLm91dERhdGEucHV0KCdBRFIzJywgQURSMyk7DQogICAgbWkub3V0RGF0YS5wdXQoJ0FEUjQnLCBBRFI0KTsNCiAgICBtaS5vdXREYXRhLnB1dCgnQVNDRCcsIEFTQ0QpOw0KICAgIG1pLm91dERhdGEucHV0KCdQT05PJywgUE9OTyk7DQogICAgbWkub3V0RGF0YS5wdXQoJ0VERVMnLCBFREVTKTsNCiAgICBtaS5vdXREYXRhLnB1dCgnVE9XTicsIFRPV04pOw0KICAgIG1pLm91dERhdGEucHV0KCdFQ0FSJywgRUNBUik7DQogICAgbWkub3V0RGF0YS5wdXQoJ0lBUEMnLCBJQVBDKTsNCgkgIG1pLm91dERhdGEucHV0KCdBTFNVJywgQUxTVSk7DQogICAgbWkud3JpdGUoKTsNCiAgICB9DQogIA0KDQogIH0NCg0KICAvKioNCiAgICogRGVwZW5kIHVwb24gY29udHJvbCBwcm9wZXJ0eSAsIGdldCBzdXBwbGllciBiYW5rIGRldGFpbHMNCiAgICogDQogICAqLw0KDQogIHB1YmxpYyBnZXRCYW5rRGV0YWlscyhIYXNodGFibGUgZWFjaFN1cHBsaWVyKSB7DQoNCiAgICBTdHJpbmcgU1VOTyA9IGVhY2hTdXBwbGllci5nZXQoJ1NVTk8nKTsNCiAgICBTdHJpbmcgU1VOTSA9IGVhY2hTdXBwbGllci5nZXQoJ1NVTk0nKTsNCg0KICAgIGJvb2xlYW4gcmVjb3JkRXhpc3RzID0gdHJ1ZTsNCiAgICBkZWYgY2FsbGJhY2sgPSB7DQogICAgICBNYXAgPCBTdHJpbmcsDQogICAgICBTdHJpbmcgPiByZXN1bHRzIC0+DQogICAgICByZWNvcmRFeGlzdHMgPSAhcmVzdWx0cy5nZXQoJ2Vycm9yJyk7DQogICAgICBpZiAocmVjb3JkRXhpc3RzKSB7DQogICAgICAgIFN0cmluZyBTVEFUID0gcmVzdWx0cy5nZXQoJ1NUQVQnKTsNCiAgICAgICAgU3RyaW5nIERJVkkgPSByZXN1bHRzLmdldCgnRElWSScpOw0KICAgICAgICBTdHJpbmcgQktJRCA9IHJlc3VsdHMuZ2V0KCdCS0lEJyk7DQogICAgICAgIFN0cmluZyBBQ0hPID0gcmVzdWx0cy5nZXQoJ0FDSE8nKTsNCiAgICAgICAgU3RyaW5nIENCUFkgPSByZXN1bHRzLmdldCgnQ0JQWScpOw0KICAgICAgICBTdHJpbmcgRklBTiA9IHJlc3VsdHMuZ2V0KCdGSUFOJyk7DQogICAgICAgIFN0cmluZyBJQkFOID0gcmVzdWx0cy5nZXQoJ0lCQU4nKTsNCiAgICAgICAgU3RyaW5nIEJBRjEgPSByZXN1bHRzLmdldCgnQkFGMScpOw0KICAgICAgICBib29sZWFuIHRlc3QgPSBiYW5rQWNjb3VudHN0YXR1c0xpc3QuY29udGFpbnMoU1RBVC50cmltKCkpOw0KDQogICAgICAgIGlmIChiYW5rQWNjb3VudHN0YXR1c0xpc3QuY29udGFpbnMoU1RBVCkgJiYgIWV4Y2x1ZGVkQWNjb3VudHNMaXN0LmNvbnRhaW5zKEJLSUQudHJpbSgpKSAmJiAoZGl2aXNpb25MaXN0LmlzRW1wdHkoKSB8fCBkaXZpc2lvbkxpc3QudHJpbSgpLmVxdWFscygiMSIpIHx8IGRpdmlzaW9uTGlzdC5jb250YWlucyhESVZJLnRyaW0oKSkpKSB7DQogICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1JDVFAnLCAiQiIpOw0KICAgICAgICAgIG1pLm91dERhdGEucHV0KCdESVZJJywgIiIpOw0KICAgICAgICAgIG1pLm91dERhdGEucHV0KCdTVU5PJywgU1VOTyk7DQogICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ1NVTk0nLCBTVU5NKTsNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQktJRCcsIEJLSUQpOw0KICAgICAgICAgIG1pLm91dERhdGEucHV0KCdCRElWJywgRElWSSk7DQogICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0JLU1QnLCBTVEFUKTsNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQ0JQWScsIENCUFkpOw0KICAgICAgICAgIG1pLm91dERhdGEucHV0KCdGSUFOJywgRklBTik7DQogICAgICAgICAgbWkub3V0RGF0YS5wdXQoJ0lCQU4nLCBJQkFOKTsNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgnQkFGMScsIEJBRjEpOw0KICAgICAgICAgIG1pLndyaXRlKCk7DQogICAgICAgIH0NCg0KICAgICAgfQ0KICAgIH0NCg0KICAgIA0KICAgIGRlZiBwYXJhbXMgPSBbIkJLVFAiOiAiMDMiLCAiQUNITyI6IFNVTk9dOw0KICAgIA0KICAgIG1pQ2FsbGVyLmNhbGwoIkNSUzY5Mk1JIiwgIkxzdEJ5QWNjSG9sZGVyIiwgcGFyYW1zLCBjYWxsYmFjayk7DQoNCiAgfQ0KDQp9"}}}