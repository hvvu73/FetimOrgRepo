{"programModules":{"EXT005MI":{"program":"EXT005MI","triggers":{},"transactions":{"LstStockToMove":{"sourceUuid":"4012ec27-b1c5-464d-a259-0907dab2d37b","name":"LstStockToMove","program":"EXT005MI","description":"AKT003 Stock to Move","active":true,"multi":true,"modified":1673260079756,"modifiedBy":"ARTWRI","outputFields":[{"name":"WHSL","description":"location","length":10,"mandatory":false,"type":"A"},{"name":"FACI","description":"facility","length":3,"mandatory":false,"type":"A"},{"name":"ITNO","description":"item number","length":15,"mandatory":false,"type":"A"},{"name":"WHLO","description":"warehouse","length":3,"mandatory":false,"type":"A"},{"name":"COFA","description":"conversion factor","length":15,"mandatory":false,"type":"N"},{"name":"DMCF","description":"conversion form","length":1,"mandatory":false,"type":"N"},{"name":"AGQT","description":"agreed quantity","length":15,"mandatory":false,"type":"N"},{"name":"STQT","description":"on-hand balance approved","length":15,"mandatory":false,"type":"N"}],"inputFields":[{"name":"CONO","description":"company","length":3,"mandatory":true,"type":"N"}],"utilities":[]}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"4012ec27-b1c5-464d-a259-0907dab2d37b":{"uuid":"4012ec27-b1c5-464d-a259-0907dab2d37b","updated":1663938602497,"updatedBy":"ARTWRI","created":1673260071959,"createdBy":"ARTWRI","apiVersion":"0.15","beVersion":"16.0.0.20221014171123","language":"GROOVY","codeHash":"775CF5D1AA4886B1355F6FB14A2AF8CD12D6D5ACD87F60CD0F9B15A42B6C6CA0","code":"LyoqDQogKiAgQnVzaW5lc3MgRW5naW5lIEV4dGVuc2lvbg0KICovDQogLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCiBFeHRlbnNpb24gTmFtZTogTHN0U3RvY2tUb01vdmUNCiBUeXBlIDogRXh0ZW5kTTNUcmFuc2FjdGlvbg0KIFNjcmlwdCBBdXRob3I6IEFydW4gVGl3YXJpDQogRGF0ZTogMjAyMi0wMS0xMw0KICANCiBEZXNjcmlwdGlvbjoNCiAgICAgICBHZXQgdGhlIFN0b2NrIHF0eSB3aGljaCBjYW4gYmUgbW92ZWQgdG8gZGlmZmVyZW50IGxvY2F0aW9uLg0KICAgICAgICAgIA0KIFJldmlzaW9uIEhpc3Rvcnk6DQogTmFtZSAgICAgICAgICAgICAgICAgICAgRGF0ZSAgICAgICAgICAgICBWZXJzaW9uICAgICAgICAgIERlc2NyaXB0aW9uIG9mIENoYW5nZXMNCiBBcnVuIFRpd2FyaSAgICAgICAgICAgIDIwMjItMDEtMTMgICAgICAgICAxLjAgICAgICAgICAgICAgIEluaXRpYWwgVmVyc2lvbg0KICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8NCiANCiBpbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZQ0KIGltcG9ydCBqYXZhLnRleHQuRGVjaW1hbEZvcm1hdA0KIGltcG9ydCBqYXZhLnRpbWUuZm9ybWF0LkRhdGVUaW1lRm9ybWF0dGVyDQogDQpwdWJsaWMgY2xhc3MgTHN0U3RvY2tUb01vdmUgZXh0ZW5kcyBFeHRlbmRNM1RyYW5zYWN0aW9uIHsNCiAgcHJpdmF0ZSBmaW5hbCBNSUFQSSBtaQ0KICBwcml2YXRlIGZpbmFsIERhdGFiYXNlQVBJIGRhdGFiYXNlDQogIHByaXZhdGUgZmluYWwgUHJvZ3JhbUFQSSBwcm9ncmFtDQogIHByaXZhdGUgZmluYWwgTG9nZ2VyQVBJIGxvZ2dlcg0KICBwcml2YXRlIFN0cmluZyBpbklUTk8NCg0KICBwdWJsaWMgTHN0U3RvY2tUb01vdmUoTUlBUEkgbWksIERhdGFiYXNlQVBJIGRhdGFiYXNlLCBVdGlsaXR5QVBJIHV0aWxpdHksIFByb2dyYW1BUEkgcHJvZ3JhbSxMb2dnZXJBUEkgbG9nZ2VyKSB7DQogICAgdGhpcy5taSA9IG1pDQogICAgdGhpcy5kYXRhYmFzZSA9IGRhdGFiYXNlDQogICAgdGhpcy5wcm9ncmFtID0gcHJvZ3JhbQ0KICAgIHRoaXMubG9nZ2VyID0gbG9nZ2VyDQogIH0NCg0KICBwcml2YXRlIHN0YXRpYyBmaW5hbCBEZWNpbWFsRm9ybWF0IGRmID0gbmV3IERlY2ltYWxGb3JtYXQoIjAuMDAiKQ0KICBwdWJsaWMgdm9pZCBtYWluKCkgew0KICAgIGludCBpbkNPTk8gPSBtaS5pbi5nZXQoIkNPTk8iKQ0KICAgIERvdWJsZSBETFFUID0gMGQNCiAgICBEb3VibGUgSVZRVCA9IDBkDQogICAgRG91YmxlIFNUUVQgPSAwZA0KICAgIGludCBETUNGIA0KICAgIERvdWJsZSBDT0ZBIA0KDQogICAgZGVmIE9BR1JMTl9EYXRhID0gW10NCg0KICAgIExvY2FsRGF0ZSBzZGYgPSBMb2NhbERhdGUubm93KCkucGx1c0RheXMoNykNCiAgICBTdHJpbmcgZGF0ZUFmdGVyID0gc2RmLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIikpDQogICAgU3RyaW5nIGN1cnJlbnRNb250aCA9IExvY2FsRGF0ZS5ub3coKS5mb3JtYXQoRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJ5eXl5TU0iKSkNCg0KICAgIC8vbG9nZ2VyLmluZm8oIkRhdGUgQWZ0ZXIgOiAke2RhdGVBZnRlcn0iKQ0KICAgIC8vbG9nZ2VyLmluZm8oIkN1cnJlbnQgRGF0ZSA6ICR7Y3VycmVudE1vbnRofSIpDQogICAgLy9zZWxlY3QgT0FHUkxODQogICAgRXhwcmVzc2lvbkZhY3RvcnkgZXhwX09BR1JMTiA9IGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJPQUdSTE4iKQ0KICAgIGV4cF9PQUdSTE4gPSAgZXhwX09BR1JMTi5lcSgiVVdBR1NUIiwiMjAiKS5hbmQoZXhwX09BR1JMTi5sdCgiVVdTVERUIixkYXRlQWZ0ZXIpKQ0KICAgIERCQWN0aW9uIE9BR1JMTl9xdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJPQUdSTE4iKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIlVXQUdRVCIsIlVXVU5JVCIsIlVXQUdOTyIsIlVXT0JWMSIsIlVXT0JWMiIsIlVXQ1VOTyIpLm1hdGNoaW5nKGV4cF9PQUdSTE4pLmJ1aWxkKCkNCiAgICBEQkNvbnRhaW5lciBPQUdSTE5fY29udGFpbmVyID0gT0FHUkxOX3F1ZXJ5LmdldENvbnRhaW5lcigpDQogICAgT0FHUkxOX2NvbnRhaW5lci5zZXQoIlVXQ09OTyIsIGluQ09OTykNCg0KICAgIENsb3N1cmU8Pz4gcHJvY2Vzc09BR1JMTlJlY29yZCA9IHsgREJDb250YWluZXIgcmVjb3JkX09BR1JMTiAtPg0KDQogICAgICBTdHJpbmcgQUdOTyA9IHJlY29yZF9PQUdSTE4uZ2V0U3RyaW5nKCJVV0FHTk8iKS50cmltKCkNCiAgICAgIFN0cmluZyBVTklUID0gcmVjb3JkX09BR1JMTi5nZXRTdHJpbmcoIlVXVU5JVCIpLnRyaW0oKQ0KICAgICAgU3RyaW5nIE9CVjEgPSByZWNvcmRfT0FHUkxOLmdldFN0cmluZygiVVdPQlYxIikudHJpbSgpDQogICAgICBTdHJpbmcgT0JWMiA9IHJlY29yZF9PQUdSTE4uZ2V0U3RyaW5nKCJVV09CVjIiKS50cmltKCkNCiAgICAgIFN0cmluZyBDVU5PID0gcmVjb3JkX09BR1JMTi5nZXRTdHJpbmcoIlVXQ1VOTyIpLnRyaW0oKQ0KICAgICAgRG91YmxlIEFHUVQgPSBEb3VibGUucGFyc2VEb3VibGUocmVjb3JkX09BR1JMTi5nZXQoIlVXQUdRVCIpLnRvU3RyaW5nKCkpDQoNCiAgICAgIC8vc2VsZWN0IE1JVE1BUw0KICAgICAgREJBY3Rpb24gTUlUTUFTX3F1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIk1JVE1BUyIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiTU1VTk1TIikuYnVpbGQoKQ0KICAgICAgREJDb250YWluZXIgTUlUTUFTX2NvbnRhaW5lciA9IE1JVE1BU19xdWVyeS5nZXRDb250YWluZXIoKQ0KICAgICAgTUlUTUFTX2NvbnRhaW5lci5zZXQoIk1NQ09OTyIsIGluQ09OTykNCiAgICAgIE1JVE1BU19jb250YWluZXIuc2V0KCJNTUlUTk8iLCBPQlYyKQ0KDQogICAgICBDbG9zdXJlPD8+IHByb2Nlc3NNSVRNQVNSZWNvcmQgPSB7IERCQ29udGFpbmVyIHJlY29yZF9NSVRNQVMgLT4NCg0KICAgICAgICBpZihVTklULmVxdWFscyhyZWNvcmRfTUlUTUFTLmdldFN0cmluZygiTU1VTk1TIikudHJpbSgpKSkgew0KDQogICAgICAgICAgLy9zZWxlY3QgQ01ORElWDQogICAgICAgICAgRXhwcmVzc2lvbkZhY3RvcnkgZXhwX0NNTkRJViA9IGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJDTU5ESVYiKQ0KICAgICAgICAgIGV4cF9DTU5ESVYgPSAgZXhwX0NNTkRJVi5lcSgiQ0NGQUNJIixPQlYxKQ0KICAgICAgICAgIERCQWN0aW9uIENNTkRJVl9xdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJDTU5ESVYiKS5pbmRleCgiMDAiKS5zZWxlY3Rpb24oIkNDQ0NEMyIpLm1hdGNoaW5nKGV4cF9DTU5ESVYpLmJ1aWxkKCkNCiAgICAgICAgICBEQkNvbnRhaW5lciBDTU5ESVZfY29udGFpbmVyID0gQ01ORElWX3F1ZXJ5LmdldENvbnRhaW5lcigpDQogICAgICAgICAgQ01ORElWX2NvbnRhaW5lci5zZXQoIkNDQ09OTyIsIGluQ09OTykNCg0KDQogICAgICAgICAgQ2xvc3VyZTw/PiBwcm9jZXNzQ01ORElWUmVjb3JkID0geyBEQkNvbnRhaW5lciByZWNvcmRfQ01ORElWIC0+DQogICAgICAgICAgICBTdHJpbmcgQ0NEMyA9IHJlY29yZF9DTU5ESVYuZ2V0U3RyaW5nKCJDQ0NDRDMiKS50cmltKCkNCiAgICAgICAgICAgIFN0cmluZyBXSExPID0gcmVjb3JkX0NNTkRJVi5nZXRTdHJpbmcoIkNDV0hMTyIpLnRyaW0oKQ0KDQogICAgICAgICAgICAvL3NlbGVjdCBPT0xJQVINCiAgICAgICAgICAgIEV4cHJlc3Npb25GYWN0b3J5IGV4cF9PT0xJQVIgPSBkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiT09MSUFSIikNCiAgICAgICAgICAgIGV4cF9PT0xJQVIgPSAgZXhwX09PTElBUi5lcSgiVVhJVE5PIixPQlYyKQ0KICAgICAgICAgICAgREJBY3Rpb24gT09MSUFSX3F1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIk9PTElBUiIpLmluZGV4KCIxMCIpLnNlbGVjdGlvbigiVVhETFFUIiwiVVhJVlFUIikubWF0Y2hpbmcoZXhwX09PTElBUikuYnVpbGQoKQ0KICAgICAgICAgICAgREJDb250YWluZXIgT09MSUFSX2NvbnRhaW5lciA9IE9PTElBUl9xdWVyeS5nZXRDb250YWluZXIoKQ0KICAgICAgICAgICAgT09MSUFSX2NvbnRhaW5lci5zZXQoIlVYQ09OTyIsIGluQ09OTykNCiAgICAgICAgICAgIC8vT09MSUFSX2NvbnRhaW5lci5zZXQoIlVYT1JOTyIsICIiKQ0KICAgICAgICAgICAgT09MSUFSX2NvbnRhaW5lci5zZXQoIlVYUE9OUiIsIDApDQogICAgICAgICAgICBPT0xJQVJfY29udGFpbmVyLnNldCgiVVhQT1NYIiwgMCkNCiAgICAgICAgICAgIE9PTElBUl9jb250YWluZXIuc2V0KCJVWENVTk8iLCBDVU5PKQ0KICAgICAgICAgICAgT09MSUFSX2NvbnRhaW5lci5zZXQoIlVYQUdOTyIsIEFHTk8pDQogICAgICAgICAgICBETFFUID0gMGQNCiAgICAgICAgICAgIElWUVQgPSAwZA0KDQoNCiAgICAgICAgICAgIENsb3N1cmU8Pz4gcHJvY2Vzc09PTElBUlJlY29yZCA9IHsgREJDb250YWluZXIgcmVjb3JkX09PTElBUiAtPg0KDQogICAgICAgICAgICAgIERMUVQgPSBEb3VibGUucGFyc2VEb3VibGUocmVjb3JkX09PTElBUi5nZXQoIlVYRExRVCIpLnRvU3RyaW5nKCkpDQogICAgICAgICAgICAgIElWUVQgPSBEb3VibGUucGFyc2VEb3VibGUocmVjb3JkX09PTElBUi5nZXQoIlVYSVZRVCIpLnRvU3RyaW5nKCkpDQoNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIE9PTElBUl9xdWVyeS5yZWFkQWxsKE9PTElBUl9jb250YWluZXIsNiwgcHJvY2Vzc09PTElBUlJlY29yZCkNCg0KICAgICAgICAgICAgLy9zZWxlY3QgTUlUTE9DDQogICAgICAgICAgICBEQkFjdGlvbiBNSVRMT0NfcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiTUlUTE9DIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJNTFNUUVQiKS5idWlsZCgpDQogICAgICAgICAgICBEQkNvbnRhaW5lciBNSVRMT0NfY29udGFpbmVyID0gTUlUTE9DX3F1ZXJ5LmdldENvbnRhaW5lcigpDQogICAgICAgICAgICBNSVRMT0NfY29udGFpbmVyLnNldCgiTUxDT05PIiwgaW5DT05PKQ0KICAgICAgICAgICAgTUlUTE9DX2NvbnRhaW5lci5zZXQoIk1MV0hMTyIsIENDRDMpDQogICAgICAgICAgICBNSVRMT0NfY29udGFpbmVyLnNldCgiTUxJVE5PIiwgT0JWMikNCiAgICAgICAgICAgIE1JVExPQ19jb250YWluZXIuc2V0KCJNTFdIU0wiLCBBR05PKQ0KICAgICAgICAgICAgTUlUTE9DX2NvbnRhaW5lci5zZXQoIk1MQkFOTyIsICIiKQ0KICAgICAgICAgICAgU1RRVCA9IDBkDQogICAgICAgICAgICBDbG9zdXJlPD8+IHByb2Nlc3NNSVRMT0NSZWNvcmQgPSB7IERCQ29udGFpbmVyIHJlY29yZF9NSVRMT0MgLT4NCiAgICAgICAgICAgICAgU1RRVCA9IERvdWJsZS5wYXJzZURvdWJsZShyZWNvcmRfTUlUTE9DLmdldCgiTUxTVFFUIikudG9TdHJpbmcoKSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIE1JVExPQ19xdWVyeS5yZWFkQWxsKE1JVExPQ19jb250YWluZXIsNSwgcHJvY2Vzc01JVExPQ1JlY29yZCkNCg0KICAgICAgICAgICAgLy9zZWxlY3QgTUlUUENFDQogICAgICAgICAgICBEQkFjdGlvbiBNSVRQQ0VfcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiTUlUUENFIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJNU1dITE8iKS5idWlsZCgpDQogICAgICAgICAgICBEQkNvbnRhaW5lciBNSVRQQ0VfY29udGFpbmVyID0gTUlUUENFX3F1ZXJ5LmdldENvbnRhaW5lcigpDQogICAgICAgICAgICBNSVRQQ0VfY29udGFpbmVyLnNldCgiTVNDT05PIiwgaW5DT05PKQ0KICAgICAgICAgICAgTUlUUENFX2NvbnRhaW5lci5zZXQoIk1TV0hMTyIsIFdITE8pDQogICAgICAgICAgICBNSVRQQ0VfY29udGFpbmVyLnNldCgiTVNXSFNMIiwgQUdOTykNCg0KICAgICAgICAgICAgQ2xvc3VyZTw/PiBwcm9jZXNzTUlUUENFUmVjb3JkID0geyBEQkNvbnRhaW5lciByZWNvcmRfTUlUUENFIC0+DQoNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIE1JVFBDRV9xdWVyeS5yZWFkQWxsKE1JVFBDRV9jb250YWluZXIsMywgcHJvY2Vzc01JVFBDRVJlY29yZCkNCg0KICAgICAgICAgICAgREJBY3Rpb24gTUlUQVVOX3F1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIk1JVEFVTiIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiTVVETUNGIiwiTVVDT0ZBIikuYnVpbGQoKQ0KICAgICAgICAgICAgREJDb250YWluZXIgTUlUQVVOX2NvbnRhaW5lciA9IE1JVEFVTl9xdWVyeS5nZXRDb250YWluZXIoKQ0KICAgICAgICAgICAgTUlUQVVOX2NvbnRhaW5lci5zZXQoIk1VQ09OTyIsIGluQ09OTykNCiAgICAgICAgICAgIE1JVEFVTl9jb250YWluZXIuc2V0KCJNVUlUTk8iLCBPQlYyKQ0KICAgICAgICAgICAgTUlUQVVOX2NvbnRhaW5lci5zZXQoIk1VQVVUUCIsIDEpDQogICAgICAgICAgICBNSVRBVU5fY29udGFpbmVyLnNldCgiTVVBTFVOIiwgIlBLIikNCiAgICAgICAgICAgIERNQ0YgPSAwDQogICAgICAgICAgICBDT0ZBID0gMGQNCg0KICAgICAgICAgICAgQ2xvc3VyZTw/PiBwcm9jZXNzTUlUQVVOUmVjb3JkID0geyBEQkNvbnRhaW5lciByZWNvcmRfTUlUQVVOIC0+DQogICAgICAgICAgICAgIERNQ0YgPSBJbnRlZ2VyLnBhcnNlSW50KHJlY29yZF9NSVRBVU4uZ2V0KCJNVURNQ0YiKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgICBDT0ZBID0gRG91YmxlLnBhcnNlRG91YmxlKHJlY29yZF9NSVRBVU4uZ2V0KCJNVUNPRkEiKS50b1N0cmluZygpKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgTUlUQVVOX3F1ZXJ5LnJlYWRBbGwoTUlUQVVOX2NvbnRhaW5lciw0LCBwcm9jZXNzTUlUQVVOUmVjb3JkKQ0KDQogICAgICAgICAgICBpZihETUNGID09IDEpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgIENPRkEgPShpbnQpIENPRkENCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYoRE1DRiA9PSAwKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICBpZighQ09GQSA9PSAwLjApDQogICAgICAgICAgICAgICAgQ09GQSA9IEludGVnZXIucGFyc2VJbnQoZGYuZm9ybWF0KDEvQ09GQSkpDQogICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBDT0ZBID0gMA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgIENPRkEgPSAxDQogICAgICAgICAgICB9DQogICAgICAgICAgICBpbnQgQUdRVF9OZXcgPSAwDQogICAgICAgICAgICBpZihDT0ZBID09IDAuMCkNCiAgICAgICAgICAgICAgQUdRVF9OZXc9IDANCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgQUdRVF9OZXc9IChpbnQpKChBR1FUIC0gKERMUVQrSVZRVCktU1RRVCkvQ09GQSkNCg0KICAgICAgICAgICAgaWYoQUdRVF9OZXcgPiAwKSB7DQogICAgICAgICAgICAgIE9BR1JMTl9EYXRhLmFkZChBR05PKyJ8IitPQlYxKyJ8IitPQlYyKyJ8IitDQ0QzKyJ8IisoaW50KUNPRkErInwiK0RNQ0YrInwiK0FHUVRfTmV3KQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICBDTU5ESVZfcXVlcnkucmVhZEFsbChDTU5ESVZfY29udGFpbmVyLDEsIHByb2Nlc3NDTU5ESVZSZWNvcmQpDQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIE1JVE1BU19xdWVyeS5yZWFkQWxsKE1JVE1BU19jb250YWluZXIsMiwgcHJvY2Vzc01JVE1BU1JlY29yZCkNCg0KICAgIH0NCiAgICBpZighT0FHUkxOX3F1ZXJ5LnJlYWRBbGwoT0FHUkxOX2NvbnRhaW5lciwgMSwgcHJvY2Vzc09BR1JMTlJlY29yZCkpIHsNCiAgICAgIG1pLmVycm9yKCJBZ3JlZW1lbnQgZG9lcyBub3QgZXhpc3QiKQ0KICAgICAgcmV0dXJuDQogICAgfQ0KDQogICAgZm9yKGRlZiB2YWwgOiBPQUdSTE5fRGF0YSl7DQogICAgICBkZWYgYXJyID0gdmFsLnRvU3RyaW5nKCkudG9rZW5pemUoICd8JyApDQogICAgICBEQkFjdGlvbiBNSVRMT0NfcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiTUlUTE9DIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJNTFNUUVQiLCJNTEFMUVQiKS5idWlsZCgpDQogICAgICBEQkNvbnRhaW5lciBNSVRMT0NfY29udGFpbmVyID0gTUlUTE9DX3F1ZXJ5LmdldENvbnRhaW5lcigpDQogICAgICBNSVRMT0NfY29udGFpbmVyLnNldCgiTUxDT05PIiwgaW5DT05PKQ0KICAgICAgTUlUTE9DX2NvbnRhaW5lci5zZXQoIk1MV0hMTyIsIGFyclszXSkNCiAgICAgIE1JVExPQ19jb250YWluZXIuc2V0KCJNTElUTk8iLCBhcnJbMl0pDQogICAgICBNSVRMT0NfY29udGFpbmVyLnNldCgiTUxXSFNMIiwgIk5PUk1BQUwiKQ0KICAgICAgTUlUTE9DX2NvbnRhaW5lci5zZXQoIk1MQkFOTyIsICIiKQ0KDQogICAgICBDbG9zdXJlPD8+IHByb2Nlc3NNSVRMT0NSZWNvcmQgPSB7IERCQ29udGFpbmVyIHJlY29yZF9NSVRMT0MgLT4NCiAgICAgICAgRG91YmxlIFNUUVQxID0gRG91YmxlLnBhcnNlRG91YmxlKHJlY29yZF9NSVRMT0MuZ2V0KCJNTFNUUVQiKS50b1N0cmluZygpKQ0KICAgICAgICBEb3VibGUgQUxRVDEgPSBEb3VibGUucGFyc2VEb3VibGUocmVjb3JkX01JVExPQy5nZXQoIk1MQUxRVCIpLnRvU3RyaW5nKCkpDQoNCiAgICAgICAgREJBY3Rpb24gTUlUQUZPX3F1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIk1JVEFGTyIpLmluZGV4KCIwMCIpLnNlbGVjdGlvbigiTUZNRFFUIikuYnVpbGQoKQ0KICAgICAgICBEQkNvbnRhaW5lciBNSVRBRk9fY29udGFpbmVyID0gTUlUQUZPX3F1ZXJ5LmdldENvbnRhaW5lcigpDQogICAgICAgIE1JVEFGT19jb250YWluZXIuc2V0KCJNRkNPTk8iLCBpbkNPTk8pDQogICAgICAgIE1JVEFGT19jb250YWluZXIuc2V0KCJNRldITE8iLCBhcnJbM10pDQogICAgICAgIE1JVEFGT19jb250YWluZXIuc2V0KCJNRklUTk8iLCBhcnJbMl0pDQogICAgICAgIE1JVEFGT19jb250YWluZXIuc2V0KCJNRkNZUDYiLCBJbnRlZ2VyLnBhcnNlSW50KGN1cnJlbnRNb250aCkpDQogICAgICAgIERvdWJsZSBNRFFUID0gMGQNCg0KICAgICAgICBDbG9zdXJlPD8+IHByb2Nlc3NNSVRBRk9SZWNvcmQgPSB7IERCQ29udGFpbmVyIHJlY29yZF9NSVRBRk8gLT4NCiAgICAgICAgICBNRFFUID0gRG91YmxlLnBhcnNlRG91YmxlKHJlY29yZF9NSVRBRk8uZ2V0KCJNRk1EUVQiKS50b1N0cmluZygpKQ0KDQogICAgICAgIH0NCiAgICAgICAgTUlUQUZPX3F1ZXJ5LnJlYWRBbGwoTUlUQUZPX2NvbnRhaW5lciw0LCBwcm9jZXNzTUlUQUZPUmVjb3JkKQ0KDQogICAgICAgIGludCBtaXRsb2Nfc3RxdCA9IChpbnQpKChTVFFUMSAtIEFMUVQxLShNRFFUKjEyLzI2KSkpDQoNCiAgICAgICAgaWYobWl0bG9jX3N0cXQgPiAwKSB7DQogICAgICAgICAgbWl0bG9jX3N0cXQgPSAoaW50KSAobWl0bG9jX3N0cXQvQ09GQSkgDQogICAgICAgICAgbWkub3V0RGF0YS5wdXQoIldIU0wiLGFyclswXSkNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiRkFDSSIsYXJyWzFdKQ0KICAgICAgICAgIG1pLm91dERhdGEucHV0KCJJVE5PIixhcnJbMl0pDQogICAgICAgICAgbWkub3V0RGF0YS5wdXQoIldITE8iLGFyclszXSkNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiQ09GQSIsYXJyWzRdKQ0KICAgICAgICAgIG1pLm91dERhdGEucHV0KCJETUNGIixhcnJbNV0pDQogICAgICAgICAgbWkub3V0RGF0YS5wdXQoIkFHUVQiLGFycls2XSkNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiU1RRVCIsU3RyaW5nLnZhbHVlT2YobWl0bG9jX3N0cXQpKQ0KICAgICAgICAgIG1pLndyaXRlKCkNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgTUlUTE9DX3F1ZXJ5LnJlYWRBbGwoTUlUTE9DX2NvbnRhaW5lciw1LCBwcm9jZXNzTUlUTE9DUmVjb3JkKQ0KDQogICAgfQ0KICB9DQp9"}}}